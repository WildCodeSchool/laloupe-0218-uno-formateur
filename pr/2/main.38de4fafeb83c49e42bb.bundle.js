webpackJsonp([1],{"+3/4":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("TToO"),i=function(t){function e(e){t.call(this),this.scheduler=e}return Object(r.__extends)(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(n("YaPU").a)},"+CnV":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){var e,r=n("AMGY").a.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}()},"+iia":function(t,e,n){(function(t){var e=function(){if("undefined"!=typeof t)return t;if("undefined"!=typeof window)return window;if("undefined"!=typeof self)return self;throw new Error("unable to locate global object")}();"undefined"==typeof Promise&&(e.Promise=Promise=n("Gs/g"))}).call(e,n("DuR2"))},"+lT7":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("9/vk");e.assert=r.assert,e.assertionError=r.assertionError;var i=n("ZCyv");e.base64=i.base64,e.base64Decode=i.base64Decode,e.base64Encode=i.base64Encode;var o=n("Ex2A");e.CONSTANTS=o.CONSTANTS;var a=n("iNRZ");e.deepCopy=a.deepCopy,e.deepExtend=a.deepExtend,e.patchProperty=a.patchProperty;var s=n("T970");e.Deferred=s.Deferred;var u=n("C2tt");e.getUA=u.getUA,e.isMobileCordova=u.isMobileCordova,e.isNodeSdk=u.isNodeSdk,e.isReactNative=u.isReactNative;var c=n("GmLp");e.ErrorFactory=c.ErrorFactory,e.FirebaseError=c.FirebaseError,e.patchCapture=c.patchCapture;var l=n("sA4o");e.jsonEval=l.jsonEval,e.stringify=l.stringify;var h=n("lt8x");e.decode=h.decode,e.isAdmin=h.isAdmin,e.issuedAtTime=h.issuedAtTime,e.isValidFormat=h.isValidFormat,e.isValidTimestamp=h.isValidTimestamp;var f=n("Whum");e.clone=f.clone,e.contains=f.contains,e.every=f.every,e.extend=f.extend,e.findKey=f.findKey,e.findValue=f.findValue,e.forEach=f.forEach,e.getAnyKey=f.getAnyKey,e.getCount=f.getCount,e.getValues=f.getValues,e.isEmpty=f.isEmpty,e.isNonNullObject=f.isNonNullObject,e.map=f.map,e.safeGet=f.safeGet;var p=n("YNQF");e.querystring=p.querystring,e.querystringDecode=p.querystringDecode;var d=n("IYGj");e.Sha1=d.Sha1;var y=n("r3eQ");e.async=y.async,e.createSubscribe=y.createSubscribe;var g=n("U/B+");e.errorPrefix=g.errorPrefix,e.validateArgCount=g.validateArgCount,e.validateCallback=g.validateCallback,e.validateContextObject=g.validateContextObject,e.validateNamespace=g.validateNamespace;var m=n("m4rg");e.stringLength=m.stringLength,e.stringToByteArray=m.stringToByteArray},"/iUD":function(t,e,n){"use strict";e.a=function(t){return"function"==typeof t}},"/nXB":function(t,e,n){"use strict";e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=Number.POSITIVE_INFINITY,s=null,u=t[t.length-1];return Object(o.a)(u)?(s=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof u&&(n=t.pop()),null===s&&1===t.length&&t[0]instanceof r.a?t[0]:Object(a.a)(n)(new i.a(t,s))};var r=n("YaPU"),i=n("Veqx"),o=n("1Q68"),a=n("8D5t")},0:function(t,e,n){t.exports=n("x35b")},"1Q68":function(t,e,n){"use strict";e.a=function(t){return t&&"function"==typeof t.schedule}},"8D5t":function(t,e,n){"use strict";var r=n("Qnch");function i(t){return t}e.a=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Object(r.a)(i,null,t)}},"9/vk":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Ex2A");e.assert=function(t,n){if(!t)throw e.assertionError(n)},e.assertionError=function(t){return new Error("Firebase Database ("+r.CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)}},"9eBd":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("+lT7"),i=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o="[DEFAULT]",a=[],s=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e,this.options_=Object(r.deepCopy)(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){a.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){a=a.filter(function(e){return e!==t})}}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);var e=[];return Object.keys(t.services_).forEach(function(n){Object.keys(t.services_[n]).forEach(function(r){e.push(t.services_[n][r])})}),Promise.all(e.map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=o),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==o?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;Object(r.deepExtend)(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(a.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),a=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&u("app-deleted",{name:this.name_})},t}();function u(t,e){throw c.create(t,e)}s.prototype.name&&s.prototype.options||s.prototype.delete||console.log("dc");var c=new r.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."});n.d(e,"firebase",function(){return l});var l=function t(){var e={},n={},a={},c={__esModule:!0,initializeApp:function(t,n){void 0===n?n=o:"string"==typeof n&&""!==n||u("bad-app-name",{name:n+""}),i(e,n)&&u("duplicate-app",{name:n});var r=new s(t,n,c);return e[n]=r,f(r,"create"),r},app:l,apps:null,Promise:Promise,SDK_VERSION:"4.10.1",INTERNAL:{registerService:function(t,e,i,o,f){n[t]&&u("duplicate-service",{name:t}),n[t]=e,o&&(a[t]=o,h().forEach(function(t){o("create",t)}));var p=function(e){return void 0===e&&(e=l()),"function"!=typeof e[t]&&u("invalid-app-argument",{name:t}),e[t]()};return void 0!==i&&Object(r.deepExtend)(p,i),c[t]=p,s.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,f?e:[])},p},createFirebaseNamespace:t,extendNamespace:function(t){Object(r.deepExtend)(c,t)},createSubscribe:r.createSubscribe,ErrorFactory:r.ErrorFactory,removeApp:function(t){f(e[t],"delete"),delete e[t]},factories:n,useAsService:p,Promise:Promise,deepExtend:r.deepExtend}};function l(t){return i(e,t=t||o)||u("no-app",{name:t}),e[t]}function h(){return Object.keys(e).map(function(t){return e[t]})}function f(t,e){Object.keys(n).forEach(function(n){var r=p(0,n);null!==r&&a[r]&&a[r](e,t)})}function p(t,e){return"serverAuth"===e?null:e}return Object(r.patchProperty)(c,"default",c),Object.defineProperty(c,"apps",{get:h}),Object(r.patchProperty)(l,"App",s),c}();e.default=l},AMGY:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return o});var r="undefined"!=typeof window&&window,i="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o=r||"undefined"!=typeof t&&t||i}).call(e,n("DuR2"))},BX3T:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=Array.isArray||function(t){return t&&"number"==typeof t.length}},C2tt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Ex2A");e.getUA=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(e.getUA())},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isNodeSdk=function(){return!0===r.CONSTANTS.NODE_CLIENT||!0===r.CONSTANTS.NODE_ADMIN}},Df3s:function(module,exports,__webpack_require__){(function(global){(function(){var g,goog=goog||{},k=this;function l(t){return"string"==typeof t}function n(t,e){t=t.split("."),e=e||k;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function aa(){}function ba(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function p(t){return"array"==ba(t)}function ca(t){var e=ba(t);return"array"==e||"object"==e&&"number"==typeof t.length}function da(t){return"function"==ba(t)}function ea(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var q="closure_uid_"+(1e9*Math.random()>>>0),fa=0;function ha(t,e,n){return t.call.apply(t.bind,arguments)}function ia(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function r(t,e,n){return(r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:ia).apply(null,arguments)}function ja(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var t=Date.now||function(){return+new Date};function u(t,e){function n(){}n.prototype=e.prototype,t.H=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Ib=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ka(t){if(Error.captureStackTrace)Error.captureStackTrace(this,ka);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function la(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");ka.call(this,n+t[r])}function ma(t,e){throw new la("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function w(){0!=na&&(pa[this[q]||(this[q]=++fa)]=this),this.i=this.i,this.m=this.m}u(ka,Error),ka.prototype.name="CustomError",u(la,ka),la.prototype.name="AssertionError";var na=0,pa={};w.prototype.i=!1,w.prototype.$=function(){if(!this.i&&(this.i=!0,this.w(),0!=na)){var t=this[q]||(this[q]=++fa);if(0!=na&&this.m&&0<this.m.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete pa[t]}},w.prototype.w=function(){if(this.m)for(;this.m.length;)this.m.shift()()};var qa=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(l(t))return l(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ra=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=l(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function sa(t){t:{for(var e=ta,n=t.length,r=l(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:l(t)?t.charAt(e):t[e]}function ua(t){if(!p(t))for(var e=t.length-1;0<=e;e--)delete t[e];t.length=0}function va(t){return Array.prototype.concat.apply([],arguments)}function wa(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function xa(t){return/^[\s\xa0]*$/.test(t)}var ya=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},x;function za(t,e){return t<e?-1:t>e?1:0}t:{var Aa=k.navigator;if(Aa){var Ba=Aa.userAgent;if(Ba){x=Ba;break t}}x=""}function y(t){return-1!=x.indexOf(t)}function Ca(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Da(t){var e,n=[],r=0;for(e in t)n[r++]=t[e];return n}function Ea(t){var e,n=[],r=0;for(e in t)n[r++]=e;return n}function Fa(t){var e,n={};for(e in t)n[e]=t[e];return n}var Ga="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ha(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ga.length;o++)n=Ga[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ia(t){return Ia[" "](t),t}function Ja(t,e){var n=Ka;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}Ia[" "]=aa;var La=y("Opera"),z=y("Trident")||y("MSIE"),Ma=y("Edge"),Na=Ma||z,Oa=y("Gecko")&&!(-1!=x.toLowerCase().indexOf("webkit")&&!y("Edge"))&&!(y("Trident")||y("MSIE"))&&!y("Edge"),Pa=-1!=x.toLowerCase().indexOf("webkit")&&!y("Edge"),Ra,a;function Qa(){var t=k.document;return t?t.documentMode:void 0}t:{var Sa="",Ta=(a=x,Oa?/rv:([^\);]+)(\)|;)/.exec(a):Ma?/Edge\/([\d\.]+)/.exec(a):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):Pa?/WebKit\/(\S+)/.exec(a):La?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(Ta&&(Sa=Ta?Ta[1]:""),z){var Ua=Qa();if(null!=Ua&&Ua>parseFloat(Sa)){Ra=String(Ua);break t}}Ra=Sa}var Ka={},Wa;function Va(t){return Ja(t,function(){for(var e=0,n=ya(String(Ra)).split("."),r=ya(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=za(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||za(0==a[2].length,0==s[2].length)||za(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var Xa=k.document;Wa=Xa&&z?Qa()||("CSS1Compat"==Xa.compatMode?parseInt(Ra,10):5):void 0;var Ya=Object.freeze||function(t){return t},Za=!z||9<=Number(Wa),$a=z&&!Va("9"),ab=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return k.addEventListener("test",aa,e),k.removeEventListener("test",aa,e),t}();function A(t,e){this.type=t,this.a=this.target=e,this.Ra=!0}function bb(t,e){if(A.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Oa){t:{try{Ia(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===r?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=l(t.pointerType)?t.pointerType:cb[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}A.prototype.b=function(){this.Ra=!1},u(bb,A);var cb=Ya({2:"touch",3:"pen",4:"mouse"});bb.prototype.b=function(){bb.H.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,$a)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var db="closure_listenable_"+(1e6*Math.random()|0),eb=0;function fb(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ga=i,this.key=++eb,this.Z=this.ba=!1}function gb(t){t.Z=!0,t.listener=null,t.proxy=null,t.src=null,t.ga=null}function hb(t){this.src=t,this.a={},this.b=0}function jb(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=qa(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(gb(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ib(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Z&&o.listener==e&&o.capture==!!n&&o.ga==r)return i}return-1}hb.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=ib(t,e,r,i);return-1<a?(e=t[a],n||(e.ba=!1)):((e=new fb(e,this.src,o,!!r,i)).ba=n,t.push(e)),e};var kb="closure_lm_"+(1e6*Math.random()|0),lb={},mb=0;function nb(t,e,n,r,i){if(r&&r.once)return ob(t,e,n,r,i);if(p(e)){for(var o=0;o<e.length;o++)nb(t,e[o],n,r,i);return null}return n=pb(n),t&&t[db]?t.Ia(e,n,ea(r)?!!r.capture:!!r,i):qb(t,e,n,!1,r,i)}function qb(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=ea(i)?!!i.capture:!!i,s=rb(t);if(s||(t[kb]=s=new hb(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=sb(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ab||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(tb(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return mb++,n}function sb(){var t=ub,e=Za?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}function ob(t,e,n,r,i){if(p(e)){for(var o=0;o<e.length;o++)ob(t,e[o],n,r,i);return null}return n=pb(n),t&&t[db]?t.Ja(e,n,ea(r)?!!r.capture:!!r,i):qb(t,e,n,!0,r,i)}function vb(t,e,n,r,i){if(p(e))for(var o=0;o<e.length;o++)vb(t,e[o],n,r,i);else r=ea(r)?!!r.capture:!!r,n=pb(n),t&&t[db]?(t=t.f,(e=String(e).toString())in t.a&&-1<(n=ib(o=t.a[e],n,r,i))&&(gb(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=rb(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ib(e,n,r,i)),(n=-1<t?e[t]:null)&&wb(n))}function wb(t){if("number"!=typeof t&&t&&!t.Z){var e=t.src;if(e&&e[db])jb(e.f,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(tb(n),r):e.addListener&&e.removeListener&&e.removeListener(r),mb--,(n=rb(e))?(jb(n,t),0==n.b&&(n.src=null,e[kb]=null)):gb(t)}}}function tb(t){return t in lb?lb[t]:lb[t]="on"+t}function xb(t,e,n,r){var i=!0;if((t=rb(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.Z&&(o=yb(o,r),i=i&&!1!==o)}return i}function yb(t,e){var n=t.listener,r=t.ga||t.src;return t.ba&&wb(t),n.call(r,e)}function ub(t,e){if(t.Z)return!0;if(!Za){var r=e||n("window.event");e=new bb(r,this);var i=!0;if(!(0>r.keyCode||void 0!=r.returnValue)){t:{var o=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){o=!0}(o||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],o=e.a;o;o=o.parentNode)r.push(o);for(t=t.type,o=r.length-1;0<=o;o--){e.a=r[o];var a=xb(r[o],t,!0,e);i=i&&a}for(o=0;o<r.length;o++)e.a=r[o],a=xb(r[o],t,!1,e),i=i&&a}return i}return yb(t,new bb(e,this))}function rb(t){return(t=t[kb])instanceof hb?t:null}var zb="__closure_events_fn_"+(1e9*Math.random()>>>0);function pb(t){return da(t)?t:(t[zb]||(t[zb]=function(e){return t.handleEvent(e)}),t[zb])}function B(){w.call(this),this.f=new hb(this),this.N=this,this.J=null}function Ab(t,e,n,r){if(!(e=t.f.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Z&&a.capture==n){var s=a.listener,u=a.ga||a.src;a.ba&&jb(t.f,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ra}function Bb(t){return!/^\s*$/.test(t)&&/^[\],:{}\s\u2028\u2029]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))}function Cb(a){if(a=String(a),Bb(a))try{return eval("("+a+")")}catch(t){}throw Error("Invalid JSON string: "+a)}function Db(t){var e=[];return Eb(new Fb,t,e),e.join("")}function Fb(){}function Eb(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(p(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),Eb(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),Gb(r,n),n.push(":"),Eb(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":Gb(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}u(B,w),B.prototype[db]=!0,g=B.prototype,g.addEventListener=function(t,e,n,r){nb(this,t,e,n,r)},g.removeEventListener=function(t,e,n,r){vb(this,t,e,n,r)},g.dispatchEvent=function(t){var e,n=this.J;if(n)for(e=[];n;n=n.J)e.push(n);n=this.N;var r=t.type||t;if(l(t))t=new A(t,n);else if(t instanceof A)t.target=t.target||n;else{var i=t;Ha(t=new A(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.a=e[o];i=Ab(a,r,!0,t)&&i}if(i=Ab(a=t.a=n,r,!0,t)&&i,i=Ab(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Ab(a=t.a=e[o],r,!1,t)&&i;return i},g.w=function(){if(B.H.w.call(this),this.f){var t,e=this.f;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)gb(n[r]);delete e.a[t],e.b--}}this.J=null},g.Ia=function(t,e,n,r){return this.f.add(String(t),e,!1,n,r)},g.Ja=function(t,e,n,r){return this.f.add(String(t),e,!0,n,r)};var Hb={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Ib=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Gb(t,e){e.push('"',t.replace(Ib,function(t){var e=Hb[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Hb[t]=e),e}),'"')}function Jb(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Kb(){this.b=this.a=null}Jb.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Nb=new Jb(function(){return new Lb},function(t){t.reset()}),Rb,Tb;function Ob(){var t=Pb,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Lb(){this.next=this.b=this.a=null}function Qb(t){k.setTimeout(function(){throw t},0)}function Sb(){var t=k.MessageChannel;if("undefined"==typeof t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!y("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),i="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=r(function(t){"*"!=i&&t.origin!=i||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,i)}}}),"undefined"!=typeof t&&!y("Trident")&&!y("MSIE")){var e=new t,n={},i=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).za;n.za=null,t()}},function(t){i.next={za:t},i=i.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){k.setTimeout(t,0)}}function Ub(){if(-1!=String(k.Promise).indexOf("[native code]")){var t=k.Promise.resolve(void 0);Tb=function(){t.then(Vb)}}else Tb=function(){var t=Vb;!da(k.setImmediate)||k.Window&&k.Window.prototype&&!y("Edge")&&k.Window.prototype.setImmediate==k.setImmediate?(Rb||(Rb=Sb()),Rb(t)):k.setImmediate(t)}}Kb.prototype.add=function(t,e){var n=Nb.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Lb.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Lb.prototype.reset=function(){this.next=this.b=this.a=null};var Wb=!1,Pb=new Kb;function Vb(){for(var t;t=Ob();){try{t.a.call(t.b)}catch(t){Qb(t)}var e=Nb;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Wb=!1}function Xb(e,n){B.call(this),this.b=e||1,this.a=n||k,this.c=r(this.qb,this),this.g=t()}function Yb(t){t.ea=!1,t.O&&(t.a.clearTimeout(t.O),t.O=null)}function Zb(t,e,n){if(da(t))n&&(t=r(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=r(t.handleEvent,t)}return 2147483647<Number(e)?-1:k.setTimeout(t,e||0)}function $b(t,e,n){w.call(this),this.f=null!=n?r(t,n):t,this.c=e,this.b=r(this.kb,this),this.a=[]}function ac(t){t.Y=Zb(t.b,t.c),t.f.apply(null,t.a)}function bc(t){w.call(this),this.b=t,this.a={}}u(Xb,B),g=Xb.prototype,g.ea=!1,g.O=null,g.qb=function(){if(this.ea){var e=t()-this.g;0<e&&e<.8*this.b?this.O=this.a.setTimeout(this.c,this.b-e):(this.O&&(this.a.clearTimeout(this.O),this.O=null),this.dispatchEvent("tick"),this.ea&&(this.O=this.a.setTimeout(this.c,this.b),this.g=t()))}},g.start=function(){this.ea=!0,this.O||(this.O=this.a.setTimeout(this.c,this.b),this.g=t())},g.w=function(){Xb.H.w.call(this),Yb(this),delete this.a},u($b,w),g=$b.prototype,g.ha=!1,g.Y=null,g.cb=function(t){this.a=arguments,this.Y?this.ha=!0:ac(this)},g.w=function(){$b.H.w.call(this),this.Y&&(k.clearTimeout(this.Y),this.Y=null,this.ha=!1,this.a=[])},g.kb=function(){this.Y=null,this.ha&&(this.ha=!1,ac(this))},u(bc,w);var cc=[];function dc(t,e,n,r){p(n)||(n&&(cc[0]=n.toString()),n=cc);for(var i=0;i<n.length;i++){var o=nb(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ec(t){Ca(t.a,function(t,e){this.a.hasOwnProperty(e)&&wb(t)},t),t.a={}}function fc(t,e,n){this.reset(t,e,n,void 0,void 0)}bc.prototype.w=function(){bc.H.w.call(this),ec(this)},bc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fc.prototype.a=null;var gc=0;function hc(t){this.f=t,this.b=this.c=this.a=null}function C(t,e){this.name=t,this.value=e}fc.prototype.reset=function(e,n,r,i,o){"number"==typeof o||gc++,i||t(),delete this.a},C.prototype.toString=function(){return this.name};var ic=new C("SEVERE",1e3),jc=new C("WARNING",900),kc=new C("INFO",800),lc=new C("CONFIG",700),mc=new C("FINE",500);function nc(t){return t.c?t.c:t.a?nc(t.a):(ma("Root logger has no level set."),null)}hc.prototype.log=function(t,e,n){if(t.value>=nc(this).value)for(da(e)&&(e=e()),t=new fc(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var oc={},pc=null;function qc(t){var e;if(pc||(pc=new hc(""),oc[""]=pc,pc.c=lc),!(e=oc[t])){e=new hc(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=qc(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,oc[t]=e}return e}function D(t,e){t&&t.log(jc,e,void 0)}function rc(t,e){t&&t.log(kc,e,void 0)}function E(t,e){t&&t.log(mc,e,void 0)}function sc(){this.a=qc("goog.labs.net.webChannel.WebChannelDebug"),this.b=!0}function tc(t,e,n,r,i,o){F(t,function(){if(t.b)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a})}function uc(t,e,n,r,i,o,a){F(t,function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a})}function G(t,e,n,r){F(t,function(){return"XMLHTTP TEXT ("+e+"): "+vc(t,n)+(r?" "+r:"")})}function wc(t,e){F(t,function(){return"TIMEOUT: "+e})}function H(t,e){E(t.a,e)}function xc(t,e,n){(t=t.a)&&t.log(ic,n||"Exception",e)}function F(t,e){rc(t.a,e)}function J(t,e){(t=t.a)&&t.log(ic,e,void 0)}function vc(t,e){if(!t.b)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(var r=0;r<n.length;r++)if(p(n[r])){var i=n[r];if(!(2>i.length)){var o=i[1];if(p(o)&&!(1>o.length)){var a=o[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var s=1;s<o.length;s++)o[s]=""}}}return Db(n)}catch(n){return H(t,"Exception parsing expected JS array - probably was not JS"),e}}sc.prototype.Fa=function(){this.b=!1};var yc=new B;function zc(t){A.call(this,"serverreachability",t)}function Ac(t){yc.dispatchEvent(new zc(yc,t))}function Bc(t){A.call(this,"statevent",t)}function K(t){yc.dispatchEvent(new Bc(yc,t))}function Cc(t){A.call(this,"timingevent",t)}function Dc(t,e,n){yc.dispatchEvent(new Cc(yc,t,e,n))}function Ec(t,e){if(!da(t))throw Error("Fn must not be null and must be a function");return k.setTimeout(function(){t()},e)}u(zc,A),u(Bc,A),u(Cc,A);var Fc={NO_ERROR:0,rb:1,yb:2,xb:3,ub:4,wb:5,zb:6,Ua:7,TIMEOUT:8,Cb:9},Gc={tb:"complete",Gb:"success",Va:"error",Ua:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",vb:"downloadprogress",Hb:"uploadprogress"};function Hc(){}function Ic(t){var e;return(e=t.a)||(e={},Jc(t)&&(e[0]=!0,e[1]=!0),e=t.a=e),e}function Kc(){}Hc.prototype.a=null;var Lc={OPEN:"a",sb:"b",Va:"c",Bb:"d"},Oc;function Mc(){A.call(this,"d")}function Nc(){A.call(this,"c")}function Pc(){}function Qc(t){return(t=Jc(t))?new ActiveXObject(t):new XMLHttpRequest}function Jc(t){if(!t.b&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.b=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.b}function L(t,e,n,r){this.i=t,this.b=e,this.c=n,this.T=r||1,this.L=new bc(this),this.R=Rc,this.S=new Xb(t=Na?125:void 0),this.j=null,this.f=!1,this.l=this.g=this.h=this.J=this.D=this.U=this.s=null,this.u=[],this.a=null,this.G=0,this.m=this.o=null,this.C=-1,this.B=!1,this.N=0,this.I=null,this.v=this.X=this.K=!1}u(Mc,A),u(Nc,A),u(Pc,Hc),Oc=new Pc;var Rc=45e3;function Sc(t,e){switch(t){case 0:return"Non-200 return code ("+e+")";case 1:return"XMLHTTP failure (no data)";case 2:return"HttpConnection timeout";default:return"Unknown error"}}var Tc={},Uc={};function Vc(t,e,n){t.J=1,t.h=Wc(M(e)),t.l=n,t.K=!0,Xc(t,null)}function Yc(t,e,n,r){t.J=1,t.h=Wc(M(e)),t.l=null,t.K=n,Xc(t,r)}function Xc(e,n){e.D=t(),Zc(e),e.g=M(e.h),$c(e.g,"t",e.T),e.G=0,e.a=e.i.ca(e.i.ia()?n:null),0<e.N&&(e.I=new $b(r(e.Sa,e,e.a),e.N)),dc(e.L,e.a,"readystatechange",e.nb),n=e.j?Fa(e.j):{},e.l?(e.o||(e.o="POST"),n["Content-Type"]="application/x-www-form-urlencoded",e.a.fa(e.g,e.o,e.l,n)):(e.o="GET",e.a.fa(e.g,e.o,null,n)),Ac(1),tc(e.b,e.o,e.g,e.c,e.T,e.l)}function ad(t){var e=N(t.a),n=t.a.Ga(),r=t.a.W();if(!(3>e||3==e&&!Na&&!t.a.V())){t.B||4!=e||7==n||Ac(8==n||0>=r?3:2),bd(t);var i=t.a.W();t.C=i,(n=t.a.V())||H(t.b,function(){return"No response text for uri "+t.g+" status "+i}),t.f=200==i,uc(t.b,t.o,t.g,t.c,t.T,e,i),t.f?((r=cd(t))&&(G(t.b,t.c,r,"Initial handshake response via X-HTTP-Initial-Response"),t.v=!0,dd(t,r)),t.K?(ed(t,e,n),Na&&t.f&&3==e&&fd(t)):(G(t.b,t.c,n,null),dd(t,n)),4==e&&gd(t),t.f&&!t.B&&(4==e?t.i.ta(t):(t.f=!1,Zc(t)))):(400==i&&0<n.indexOf("Unknown SID")?(t.m=3,K(12),D(t.b.a,"XMLHTTP Unknown SID ("+t.c+")")):(t.m=0,K(13),D(t.b.a,"XMLHTTP Bad status "+i+" ("+t.c+")")),gd(t),hd(t))}}function cd(t){return!t.X||t.v?null:t.a&&(t=id(t.a,"X-HTTP-Initial-Response"))&&!xa(t)?t:null}function ed(t,e,n){for(var r=!0;!t.B&&t.G<n.length;){var i=jd(t,n);if(i==Uc){4==e&&(t.m=4,K(14),r=!1),G(t.b,t.c,null,"[Incomplete Response]");break}if(i==Tc){t.m=4,K(15),G(t.b,t.c,n,"[Invalid Chunk]"),r=!1;break}G(t.b,t.c,i,null),dd(t,i)}4==e&&0==n.length&&(t.m=1,K(16),r=!1),t.f=t.f&&r,r||(G(t.b,t.c,n,"[Invalid Chunked Response]"),gd(t),hd(t))}function fd(t){dc(t.L,t.S,"tick",t.mb),t.S.start()}function jd(t,e){var n=t.G,r=e.indexOf("\n",n);return-1==r?Uc:(n=Number(e.substring(n,r)),isNaN(n)?Tc:(r+=1)+n>e.length?Uc:(e=e.substr(r,n),t.G=r+n,e))}function Zc(e){e.U=t()+e.R,kd(e,e.R)}function kd(t,e){if(null!=t.s)throw Error("WatchDog timer not null");t.s=Ec(r(t.lb,t),e)}function bd(t){t.s&&(k.clearTimeout(t.s),t.s=null)}function hd(t){t.i.La()||t.B||t.i.ta(t)}function gd(t){bd(t);var e=t.I;e&&"function"==typeof e.$&&e.$(),t.I=null,Yb(t.S),ec(t.L),t.a&&(e=t.a,t.a=null,e.abort(),e.$())}function dd(t,e){try{t.i.Oa(t,e),Ac(4)}catch(e){xc(t.b,e,"Error in httprequest callback")}}function ld(t){if(t.A&&"function"==typeof t.A)return t.A();if(l(t))return t.split("");if(ca(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}return Da(t)}function md(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ca(t)||l(t))ra(t,e,void 0);else{if(t.M&&"function"==typeof t.M)var n=t.M();else if(t.A&&"function"==typeof t.A)n=void 0;else if(ca(t)||l(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else n=Ea(t);i=(r=ld(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function O(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof O)for(n=t.M(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function od(t){t.b={},t.a.length=0,t.c=0}function pd(t,e){return!!P(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&nd(t),!0)}function nd(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];P(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)P(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}g=L.prototype,g.setTimeout=function(t){this.R=t},g.nb=function(t){t=t.target;var e=this.I;e&&3==N(t)?(H(this.b,"Throttling readystatechange."),e.cb()):this.Sa(t)},g.Sa=function(t){try{t==this.a?ad(this):D(this.b.a,"Called back with an unexpected xmlhttp")}catch(t){if(H(this.b,"Failed call to OnXmlHttpReadyStateChanged_"),this.a&&this.a.V()){var e=this;xc(this.b,t,function(){return"ResponseText: "+e.a.V()})}else xc(this.b,t,"No response text")}},g.mb=function(){if(this.a){var t=N(this.a),e=this.a.V();this.G<e.length&&(bd(this),ed(this,t,e),this.f&&4!=t&&Zc(this))}},g.cancel=function(){this.B=!0,gd(this)},g.lb=function(){this.s=null;var e=t();0<=e-this.U?(this.f&&J(this.b,"Received watchdog timeout even though request loaded successfully"),wc(this.b,this.g),2!=this.J&&(Ac(3),K(17)),gd(this),this.m=2,hd(this)):(D(this.b.a,"WatchDog timer called too early"),kd(this,this.U-e))},g=O.prototype,g.A=function(){nd(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},g.M=function(){return nd(this),this.a.concat()},g.get=function(t,e){return P(this.b,t)?this.b[t]:e},g.set=function(t,e){P(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},g.forEach=function(t,e){for(var n=this.M(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var qd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function rd(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Q(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof Q?(this.h=void 0!==e?e:t.h,sd(this,t.f),this.j=t.j,td(this,t.b),ud(this,t.i),this.a=t.a,vd(this,wd(t.c)),this.g=t.g):t&&(n=String(t).match(qd))?(this.h=!!e,sd(this,n[1]||"",!0),this.j=xd(n[2]||""),td(this,n[3]||"",!0),ud(this,n[4]),this.a=xd(n[5]||"",!0),vd(this,n[6]||"",!0),this.g=xd(n[7]||"")):(this.h=!!e,this.c=new yd(null,this.h))}function M(t){return new Q(t)}function sd(t,e,n){t.f=n?xd(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function td(t,e,n){t.b=n?xd(e,!0):e}function ud(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function vd(t,e,n){e instanceof yd?(t.c=e,Ed(t.c,t.h)):(n||(e=zd(e,Fd)),t.c=new yd(e,t.h))}function R(t,e,n){t.c.set(e,n)}function $c(t,e,n){p(n)||(n=[String(n)]),Gd(t.c,e,n)}function Wc(e){return R(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^t()).toString(36)),e}function Hd(t){return t instanceof Q?M(t):new Q(t,void 0)}function Id(t,e,n,r){var i=new Q(null,void 0);return t&&sd(i,t),e&&td(i,e),n&&ud(i,n),r&&(i.a=r),i}function xd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function zd(t,e,n){return l(t)?(t=encodeURI(t).replace(e,Jd),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Jd(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Q.prototype.toString=function(){var t=[],e=this.f;e&&t.push(zd(e,Ad,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(zd(e,Ad,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(zd(n,"/"==n.charAt(0)?Bd:Cd,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",zd(n,Dd)),t.join("")},Q.prototype.resolve=function(t){var e=M(this),n=!!t.f;n?sd(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?td(e,t.b):n=null!=t.i;var r=t.a;if(n)ud(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?vd(e,wd(t.c)):n=!!t.g,n&&(e.g=t.g),e};var Ad=/[#\/\?@]/g,Cd=/[#\?:]/g,Bd=/[#\?]/g,Fd=/[#\?@]/g,Dd=/#/g;function yd(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function S(t){t.a||(t.a=new O,t.b=0,t.c&&rd(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ld(t,e){S(t),e=Kd(t,e),P(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,pd(t.a,e))}function Md(t,e){return S(t),e=Kd(t,e),P(t.a.b,e)}function Gd(t,e,n){Ld(t,e),0<n.length&&(t.c=null,t.a.set(Kd(t,e),wa(n)),t.b+=n.length)}function wd(t){var e=new yd;return e.c=t.c,t.a&&(e.a=new O(t.a),e.b=t.b),e}function Kd(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Ed(t,e){e&&!t.f&&(S(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Ld(this,e),Gd(this,n,t))},t)),t.f=e}function Nd(){this.a=t()}g=yd.prototype,g.add=function(t,e){S(this),this.c=null,t=Kd(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},g.forEach=function(t,e){S(this),this.a.forEach(function(n,r){ra(n,function(n){t.call(e,n,r,this)},this)},this)},g.M=function(){S(this);for(var t=this.a.A(),e=this.a.M(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},g.A=function(t){S(this);var e=[];if(l(t))Md(this,t)&&(e=va(e,this.a.get(Kd(this,t))));else{t=this.a.A();for(var n=0;n<t.length;n++)e=va(e,t[n])}return e},g.set=function(t,e){return S(this),this.c=null,Md(this,t=Kd(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},g.get=function(t,e){return 0<(t=t?this.A(t):[]).length?String(t[0]):e},g.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.M(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.A(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var Od=null;function Pd(){Od||(Od=new Nd)}function Qd(){Od||(Od=new Nd)}function Rd(t,e){this.a=t,this.b=e,this.c=this.i=null,this.h=!1,this.m=null,this.f=-1,this.l=this.g=null}function Sd(t){H(t.b,"TestConnection: starting stage 2");var e=t.a.I.a;if(null!=e)H(t.b,function(){return"Buffered"}),K(4),e?(K(10),Td(t.a,t,!1)):(K(11),Td(t.a,t,!0));else{t.c=new L(t,t.b,void 0,void 0),t.c.j=t.i;var n=Ud(t.a,t.g,t.m);K(4),$c(n,"TYPE","xmlhttp");var r=t.a.j,i=t.a.K;r&&i&&R(n,r,i),Yc(t.c,n,!1,t.g)}}function Wd(){this.a=this.b=null}function Xd(){this.a=new O}function Yd(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[q]||(t[q]=++fa)):e.charAt(0)+t}function Zd(t,e){this.a=t,this.b=e}function $d(t){this.g=t||ae,t=k.PerformanceNavigationTiming?0<(t=k.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(k.oa&&k.oa.Ma&&k.oa.Ma()&&k.oa.Ma().Jb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Xd),this.b=null,this.c=[]}Nd.prototype.set=function(t){this.a=t},Nd.prototype.reset=function(){this.set(t())},Nd.prototype.get=function(){return this.a},u(Qd,Pd),g=Rd.prototype,g.P=null,g.ca=function(t){return this.a.ca(t)},g.abort=function(){this.c&&(this.c.cancel(),this.c=null),this.f=-1},g.La=function(){return!1},g.Oa=function(t,e){if(this.f=t.C,0==this.P){if(H(this.b,"TestConnection: Got data for stage 1"),!this.a.o&&(t=t.a)){var n=id(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&((t=id(t,"X-HTTP-Session-Id"))?this.a.K=t:D(this.b.a,"Missing X_HTTP_SESSION_ID in the handshake response"))}if(e){try{var r=this.a.la.a.parse(e)}catch(t){return xc(this.b,t),void Vd(this.a,this)}this.g=r[0]}else H(this.b,"TestConnection: Null responseText"),Vd(this.a,this)}else 1==this.P&&(this.h?K(6):"11111"==e?(K(5),this.h=!0,(!z||10<=Number(Wa))&&(this.f=200,this.c.cancel(),H(this.b,"Test connection succeeded; using streaming connection"),K(11),Td(this.a,this,!0))):(K(7),this.h=!1))},g.ta=function(){this.f=this.c.C,this.c.f?0==this.P?(this.P=1,H(this.b,"TestConnection: request complete for initial check"),Sd(this)):1==this.P&&(H(this.b,"TestConnection: request complete for stage 2"),this.h?(H(this.b,"Test connection succeeded; using streaming connection"),K(11),Td(this.a,this,!0)):(H(this.b,"Test connection failed; not using streaming"),K(10),Td(this.a,this,!1))):(H(this.b,"TestConnection: request failed, in state "+this.P),0==this.P?K(8):1==this.P&&K(9),Vd(this.a,this))},g.ia=function(){return this.a.ia()},g.qa=function(){return this.a.qa()},Xd.prototype.add=function(t){this.a.set(Yd(t),t)},Xd.prototype.A=function(){return this.a.A()};var ae=10;function be(t,e){t.a||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(t.f=t.g,t.a=new Xd,t.b&&(ce(t,t.b),t.b=null))}function de(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function ee(t,e){return t.b?t=t.b==e:t.a?(e=Yd(e),t=P(t.a.a.b,e)):t=!1,t}function ce(t,e){t.a?t.a.add(e):t.b=e}function fe(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=Yd(e),n=P(t.a.a.b,n)),n&&pd(t.a.a,Yd(e)))}function ge(t){if(null!=t.b)return t.c.concat(t.b.u);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return ra(t.a.A(),function(t){e=e.concat(t.u)}),e}return wa(t.c)}function he(t,e){t.c=t.c.concat(e)}function ie(){}function je(){this.a=new ie}function ke(t,e,n){var r=n||"";try{md(t,function(t,n){var i=t;ea(t)&&(i=Db(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function le(t,e){var n=new sc;H(n,"TestLoadImage: loading "+t);var r=new Image;r.onload=ja(me,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ja(me,n,r,"TestLoadImage: error",!1,e),r.onabort=ja(me,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ja(me,n,r,"TestLoadImage: timeout",!1,e),k.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}function me(t,e,n,r,i){try{H(t,n),e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(e){xc(t,e)}}function T(t){B.call(this),this.headers=new O,this.s=t||null,this.c=!1,this.D=this.a=null,this.K=this.B="",this.j=0,this.g="",this.h=this.I=this.u=this.G=!1,this.l=0,this.C=null,this.L=ne,this.v=this.o=!1}$d.prototype.cancel=function(){this.c=ge(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(ra(this.a.A(),function(t){t.cancel()}),od(this.a.a))},ie.prototype.stringify=function(t){return k.JSON.stringify(t,void 0)},ie.prototype.parse=function(t){return k.JSON.parse(t,void 0)},u(T,B);var ne="";T.prototype.b=qc("goog.net.XhrIo");var oe=/^https?$/i,pe=["POST","PUT"];function se(t){return z&&Va(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}function ta(t){return"content-type"==t.toLowerCase()}function qe(t,e){t.c=!1,t.a&&(t.h=!0,t.a.abort(),t.h=!1),t.g=e,t.j=5,te(t),ue(t)}function te(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ve(t){if(t.c&&"undefined"!=typeof goog)if(t.D[1]&&4==N(t)&&2==t.W())E(t.b,U(t,"Local request error detected and ignored"));else if(t.u&&4==N(t))Zb(t.Na,0,t);else if(t.dispatchEvent("readystatechange"),4==N(t)){E(t.b,U(t,"Request complete")),t.c=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(qd)[1]||null;if(!o&&k.self&&k.self.location){var a=k.self.location.protocol;o=a.substr(0,a.length-1)}i=!oe.test(o?o.toLowerCase():"")}e=i}e?(t.dispatchEvent("complete"),t.dispatchEvent("success")):(t.j=6,t.g=t.Ha()+" ["+t.W()+"]",te(t))}finally{ue(t)}}}function ue(t,e){if(t.a){re(t);var n=t.a,r=t.D[0]?aa:null;t.a=null,t.D=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(ic,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function re(t){t.a&&t.v&&(t.a.ontimeout=null),t.C&&(k.clearTimeout(t.C),t.C=null)}function N(t){return t.a?t.a.readyState:0}function id(t,e){return t.a?t.a.getResponseHeader(e):null}function U(t,e){return e+" ["+t.K+" "+t.B+" "+t.W()+"]"}function we(t){var e="";return Ca(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}function xe(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=we(n),l(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return R(t,e,n),t}function ye(t){this.ya=0,this.g=[],this.a=new sc,this.I=new Wd,this.X=this.ua=this.D=this.ja=this.b=this.K=this.j=this.U=this.h=this.L=this.i=null,this.Za=this.R=0,this.Xa=!!n("internalChannelParams.failFast",t),this.ka=this.C=this.s=this.l=this.m=this.f=null,this.u=this.xa=this.N=-1,this.T=this.B=this.v=0,this.Wa=n("internalChannelParams.baseRetryDelayMs",t)||5e3,this.$a=n("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Ya=n("internalChannelParams.forwardChannelMaxRetries",t)||2,this.wa=n("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ta=t&&t.Kb||void 0,this.G=void 0,this.S=t&&t.supportsCrossDomainXhr||!1,this.J="",this.c=new $d(t&&t.concurrentRequestLimit),this.la=new je,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.va=t&&t.fastHandshake||!1)&&!this.o&&(D(this.a.a,"Force backgroundChannelTest when fastHandshake is enabled."),this.o=!0),t&&t.Fa&&this.a.Fa()}function ze(e){if(H(e.a,"disconnect()"),Ae(e),3==e.F){var n=e.R++,r=M(e.D);R(r,"SID",e.J),R(r,"RID",n),R(r,"TYPE","terminate"),Be(e,r),(n=new L(e,e.a,n,void 0)).J=2,n.h=Wc(M(r)),r=!1,k.navigator&&k.navigator.sendBeacon&&(r=k.navigator.sendBeacon(n.h.toString(),"")),!r&&k.Image&&((new Image).src=n.h,r=!0),r||(n.a=n.i.ca(null),n.a.fa(n.h)),n.D=t(),Zc(n)}Ce(e)}function Ae(t){t.C&&(t.C.abort(),t.C=null),t.b&&(t.b.cancel(),t.b=null),t.l&&(k.clearTimeout(t.l),t.l=null),De(t),t.c.cancel(),t.m&&(k.clearTimeout(t.m),t.m=null)}function Ee(t,e){1e3==t.g.length&&J(t.a,function(){return"Already have 1000 queued maps upon queueing "+Db(e)}),t.g.push(new Zd(t.Za++,e)),3==t.F&&Fe(t)}function Fe(t){de(t.c)||t.m||(t.m=Ec(r(t.Qa,t),0),t.v=0)}function Ge(t,e){var n=t.c;return(n.b?1:n.a?n.a.a.c:0)>=t.c.f-(t.m?1:0)?(J(t.a,"Unexpected retry request is scheduled."),!1):t.m?(H(t.a,"Use the retry request that is already scheduled."),t.g=e.u.concat(t.g),!0):!(1==t.F||2==t.F||t.v>=(t.Xa?0:t.Ya)||(H(t.a,"Going to retry POST"),t.m=Ec(r(t.Qa,t,e),He(t,t.v)),t.v++,0))}function Je(t,e){var n;n=e?e.c:t.R++;var r=M(t.D);R(r,"SID",t.J),R(r,"RID",n),R(r,"AID",t.N),Be(t,r),t.h&&t.i&&xe(r,t.h,t.i),n=new L(t,t.a,n,t.v+1),null===t.h&&(n.j=t.i),e&&(t.g=e.u.concat(t.g)),e=Ie(t,n),n.setTimeout(Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random())),ce(t.c,n),Vc(n,r,e)}function Be(t,e){t.f&&md({},function(t,n){R(e,n,t)})}function Ie(t,e){var n=Math.min(t.g.length,1e3),i=t.f?r(t.f.ab,t.f,t):null;t:for(var o=t.g,a=-1;;){var s=["count="+n];-1==a?0<n?s.push("ofs="+(a=o[0].a)):a=0:s.push("ofs="+a);for(var u=!0,c=0;c<n;c++){var l=o[c].a,h=o[c].b;if(0>(l-=a))a=Math.max(0,o[c].a-100),u=!1;else try{ke(h,s,"req"+l+"_")}catch(t){i&&i(h)}}if(u){i=s.join("&");break t}}return t=t.g.splice(0,n),e.u=t,i}function Ke(t){if(!t.b&&!t.l){t.T=1;var e=t.Pa;Tb||Ub(),Wb||(Tb(),Wb=!0),Pb.add(e,t),t.B=0}}function Le(t){return t.b||t.l?(J(t.a,"Request already in progress"),!1):!(3<=t.B||(H(t.a,"Going to retry GET"),t.T++,t.l=Ec(r(t.Pa,t),He(t,t.B)),t.B++,0))}function Td(t,e,n){H(t.a,"Test Connection Finished");var r=e.l;r&&be(t.c,r),t.ka=n,t.u=e.f,H(t.a,"connectChannel_()"),t.D=Me(t,t.ja),Fe(t)}function Vd(t,e){H(t.a,"Test Connection Failed"),t.u=e.f,V(t,2)}function De(t){null!=t.s&&(k.clearTimeout(t.s),t.s=null)}function He(t,e){var n=t.Wa+Math.floor(Math.random()*t.$a);return t.qa()||(H(t.a,"Inactive channel"),n*=2),n*e}function V(t,e){if(F(t.a,"Error code "+e),2==e){var n=null;t.f&&(n=null);var i=r(t.pb,t);n||(n=new Q("//www.google.com/images/cleardot.gif"),k.location&&"http"==k.location.protocol||sd(n,"https"),Wc(n)),le(n.toString(),i)}else K(2);H(t.a,"HttpChannel: error - "+e),t.F=0,t.f&&t.f.Ba(e),Ce(t),Ae(t)}function Ce(t){if(t.F=0,t.u=-1,t.f){var e=ge(t.c);0==e.length&&0==t.g.length||(H(t.a,function(){return"Number of undelivered maps, pending: "+e.length+", outgoing: "+t.g.length}),t.c.c.length=0,wa(t.g),t.g.length=0),t.f.Aa()}}function Me(t,e){return e=Ne(t,null,e),H(t.a,"GetForwardChannelUri: "+e),e}function Ud(t,e,n){return e=Ne(t,t.ia()?e:null,n),H(t.a,"GetBackChannelUri: "+e),e}function Ne(t,e,n){var r=Hd(n);if(""!=r.b)e&&td(r,e+"."+r.b),ud(r,r.i);else{var i=k.location;r=Id(i.protocol,e?e+"."+i.hostname:i.hostname,i.port,n)}return t.U&&Ca(t.U,function(t,e){R(r,e,t)}),n=t.K,(e=t.j)&&n&&R(r,e,n),R(r,"VER",t.na),Be(t,r),r}function Oe(){}function Pe(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}function Qe(){if(z&&!(10<=Number(Wa)))throw Error("Environmental error: no available transport.")}function W(t,e){B.call(this),this.a=new ye(e),this.b=t,this.o=e&&e.testUrl?e.testUrl:Pe(this.b,"test"),this.c=qc("goog.labs.net.webChannel.WebChannelBaseTransport"),this.g=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ea&&(t?t["X-WebChannel-Client-Profile"]=e.Ea:t={"X-WebChannel-Client-Profile":e.Ea}),this.a.L=t,(t=e&&e.httpHeadersOverwriteParam)&&!xa(t)&&(this.a.h=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.j=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xa(e)&&(this.a.j=e,null!==(t=this.g)&&e in t&&(e in(t=this.g)&&delete t[e],D(this.c,"Ignore httpSessionIdParam also specified with messageUrlParams: "+e))),this.h=new Re(this)}function Se(t){Mc.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Te(){Nc.call(this),this.status=1}function Re(t){this.a=t}g=T.prototype,g.fa=function(t,e,n,i){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.g="",this.j=0,this.K=e,this.G=!1,this.c=!0,this.a=Qc(this.s?this.s:Oc),this.D=Ic(this.s?this.s:Oc),this.a.onreadystatechange=r(this.Na,this);try{E(this.b,U(this,"Opening Xhr")),this.I=!0,this.a.open(e,String(t),!0),this.I=!1}catch(t){return E(this.b,U(this,"Error opening Xhr: "+t.message)),void qe(this,t)}t=n||"";var o=new O(this.headers);i&&md(i,function(t,e){o.set(e,t)}),i=sa(o.M()),n=k.FormData&&t instanceof k.FormData,!(0<=qa(pe,e))||i||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.L&&(this.a.responseType=this.L),"withCredentials"in this.a&&this.a.withCredentials!==this.o&&(this.a.withCredentials=this.o);try{re(this),0<this.l&&(this.v=se(this.a),E(this.b,U(this,"Will abort after "+this.l+"ms if incomplete, xhr2 "+this.v)),this.v?(this.a.timeout=this.l,this.a.ontimeout=r(this.Ka,this)):this.C=Zb(this.Ka,this.l,this)),E(this.b,U(this,"Sending request")),this.u=!0,this.a.send(t),this.u=!1}catch(t){E(this.b,U(this,"Send error: "+t.message)),qe(this,t)}},g.Ka=function(){"undefined"!=typeof goog&&this.a&&(this.g="Timed out after "+this.l+"ms, aborting",this.j=8,E(this.b,U(this,this.g)),this.dispatchEvent("timeout"),this.abort(8))},g.abort=function(t){this.a&&this.c&&(E(this.b,U(this,"Aborting")),this.c=!1,this.h=!0,this.a.abort(),this.h=!1,this.j=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ue(this))},g.w=function(){this.a&&(this.c&&(this.c=!1,this.h=!0,this.a.abort(),this.h=!1),ue(this,!0)),T.H.w.call(this)},g.Na=function(){this.i||(this.I||this.u||this.h?ve(this):this.jb())},g.jb=function(){ve(this)},g.W=function(){try{return 2<N(this)?this.a.status:-1}catch(t){return-1}},g.Ha=function(){try{return 2<N(this)?this.a.statusText:""}catch(t){return E(this.b,"Can not get status: "+t.message),""}},g.V=function(){try{return this.a?this.a.responseText:""}catch(t){return E(this.b,"Can not get responseText: "+t.message),""}},g.eb=function(t){if(this.a){var e=this.a.responseText;t&&0==e.indexOf(t)&&(e=e.substring(t.length));t:{if(t=e,k.JSON)try{var n=k.JSON.parse(t);break t}catch(t){}n=Cb(t)}return n}},g.Ga=function(){return this.j},g.hb=function(){return l(this.g)?this.g:String(this.g)},g=ye.prototype,g.na=8,g.F=1,g.La=function(){return 0==this.F},g.Qa=function(t){if(this.m=null,H(this.a,"startForwardChannel_"),1==this.F)if(t)J(this.a,"Not supposed to retry the open");else{H(this.a,"open_()"),this.R=Math.floor(1e5*Math.random()),t=this.R++;var e=new L(this,this.a,t,void 0),n=this.i;this.L&&(n?Ha(n=Fa(n),this.L):n=this.L),null===this.h&&(e.j=n);var r=Ie(this,e),i=M(this.D);R(i,"RID",t),R(i,"CVER",22),this.o&&this.j&&R(i,"X-HTTP-Session-Id",this.j),Be(this,i),this.h&&n&&xe(i,this.h,n),ce(this.c,e),this.va?(R(i,"$req",r),R(i,"SID","null"),e.X=!0,Vc(e,i,null)):Vc(e,i,r),this.F=2}else 3==this.F&&(t?Je(this,t):0==this.g.length?H(this.a,"startForwardChannel_ returned: nothing to send"):de(this.c)?J(this.a,"startForwardChannel_ returned: connection already in progress"):(Je(this),H(this.a,"startForwardChannel_ finished, sent request")))},g.Pa=function(){this.l=null,H(this.a,"Creating new HttpRequest"),this.b=new L(this,this.a,"rpc",this.T),null===this.h&&(this.b.j=this.i),this.b.N=0;var t=M(this.ua);R(t,"RID","rpc"),R(t,"SID",this.J),R(t,"CI",this.ka?"0":"1"),R(t,"AID",this.N),Be(this,t),R(t,"TYPE","xmlhttp"),this.h&&this.i&&xe(t,this.h,this.i),this.G&&this.b.setTimeout(this.G),Yc(this.b,t,!0,this.X),H(this.a,"New Request created")},g.Oa=function(t,e){if(0!=this.F&&(this.b==t||ee(this.c,t)))if(this.u=t.C,!t.v&&ee(this.c,t)&&3==this.F){try{var n=this.la.a.parse(e)}catch(t){n=null}if(p(n)&&3==n.length)if(0==(e=n)[0])t:if(H(this.a,"Server claims our backchannel is missing."),this.l)H(this.a,"But we are currently starting the request.");else{if(this.b){if(!(this.b.D+3e3<t.D))break t;De(this),this.b.cancel(),this.b=null}else D(this.a.a,"We do not have a BackChannel established");Le(this),K(18)}else this.xa=e[1],0<(t=this.xa-this.N)&&(H(this.a,(e=e[2])+" bytes (in "+t+" arrays) are outstanding on the BackChannel"),37500>e&&this.ka&&0==this.B&&!this.s&&(this.s=Ec(r(this.ib,this),6e3)));else H(this.a,"Bad POST response data returned"),V(this,11)}else if((t.v||this.b==t)&&De(this),!xa(e))for(e=n=this.la.a.parse(e),n=0;n<e.length;n++){var i=e[n];if(this.N=i[0],i=i[1],2==this.F)if("c"==i[0]){this.J=i[1],this.X=i[2];var o=i[3];null!=o&&(this.na=o,F(this.a,"VER="+this.na)),null!=(o=i[4])&&(this.ya=o,F(this.a,"SVER="+this.ya)),null!=(i=i[5])&&"number"==typeof i&&0<i&&(this.G=i*=1.5,F(this.a,"backChannelRequestTimeoutMs_="+i)),this.o&&(i=t.a)&&((o=id(i,"X-Client-Wire-Protocol"))&&be(this.c,o),this.j&&((i=id(i,"X-HTTP-Session-Id"))?(this.K=i,R(this.D,this.j,i)):D(this.a.a,"Missing X_HTTP_SESSION_ID in the handshake response"))),this.F=3,this.f&&this.f.Da(),i=t,this.ua=Ud(this,this.X,this.ja),i.v?(H(this.a,"Upgrade the handshake request to a backchannel."),fe(this.c,i),(o=this.G)&&i.setTimeout(o),i.s&&(bd(i),Zc(i)),this.b=i):Ke(this)}else"stop"!=i[0]&&"close"!=i[0]||V(this,7);else 3==this.F&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?V(this,7):ze(this):"noop"!=i[0]&&this.f&&this.f.Ca(i),this.B=0)}},g.ib=function(){null!=this.s&&(this.s=null,this.b.cancel(),this.b=null,Le(this),K(19))},g.ta=function(e){H(this.a,"Request complete");var n=null;if(this.b==e){De(this),this.b=null;var r=2}else{if(!ee(this.c,e))return;n=e.u,fe(this.c,e),r=1}if(this.u=e.C,0!=this.F)if(e.f)1==r?(Dc(e.l?e.l.length:0,t()-e.D,this.v),Fe(this)):Ke(this);else{var i=e.m;if(3==i||0==i&&0<this.u)H(this.a,"Not retrying due to error type");else{var o=this;if(H(this.a,function(){return"Maybe retrying, last error: "+Sc(i,o.u)}),1==r&&Ge(this,e)||2==r&&Le(this))return;H(this.a,"Exceeded max number of retries")}switch(n&&0<n.length&&he(this.c,n),H(this.a,"Error: HTTP request failed"),i){case 1:V(this,5);break;case 4:V(this,10);break;case 3:V(this,6);break;default:V(this,2)}}},g.pb=function(t){t?(F(this.a,"Successfully pinged google.com"),K(2)):(F(this.a,"Failed to ping google.com"),K(1))},g.ca=function(t){if(t&&!this.S)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new T(this.Ta)).o=this.S,t},g.qa=function(){return!!this.f&&!0},g.ia=function(){return this.S},new Qd,g=Oe.prototype,g.Da=function(){},g.Ca=function(){},g.Ba=function(){},g.Aa=function(){},g.ab=function(){},Qe.prototype.a=function(t,e){return new W(t,e)},u(W,B),g=W.prototype,g.addEventListener=function(t,e,n,r){W.H.addEventListener.call(this,t,e,n,r)},g.removeEventListener=function(t,e,n,r){W.H.removeEventListener.call(this,t,e,n,r)},g.fb=function(){this.a.f=this.h,this.l&&(this.a.S=!0);var t=this.a,e=this.o,n=this.b,r=this.g||void 0;H(t.a,"connect()"),K(0),t.ja=n,t.U=r||{},t.o&&(H(t.a,"connect() bypassed channel-test."),t.I.b=[],t.I.a=!1),H(t.a,"connectTest_()"),t.C=new Rd(t,t.a),null===t.h&&(t.C.i=t.i),n=e,t.h&&t.i&&(n=xe(e,t.h,t.i)),(t=t.C).m=n,e=Me(t.a,t.m),K(3),null!=(n=t.a.I.b)?(t.g=n[0],t.P=1,Sd(t)):($c(e,"MODE","init"),!t.a.o&&t.a.j&&$c(e,"X-HTTP-Session-Id",t.a.j),t.c=new L(t,t.b,void 0,void 0),t.c.j=t.i,Yc(t.c,e,!1,null),t.P=0)},g.close=function(){ze(this.a)},g.gb=function(t){if(l(t)){var e={};e.__data__=t,Ee(this.a,e)}else this.j?((e={}).__data__=Db(t),Ee(this.a,e)):Ee(this.a,t)},g.w=function(){this.a.f=null,delete this.h,ze(this.a),delete this.a,W.H.w.call(this)},u(Se,Mc),u(Te,Nc),u(Re,Oe),Re.prototype.Da=function(){rc(this.a.c,"WebChannel opened on "+this.a.b),this.a.dispatchEvent("a")},Re.prototype.Ca=function(t){this.a.dispatchEvent(new Se(t))},Re.prototype.Ba=function(t){rc(this.a.c,"WebChannel aborted on "+this.a.b+" due to channel error: "+t),this.a.dispatchEvent(new Te(t))},Re.prototype.Aa=function(){rc(this.a.c,"WebChannel closed on "+this.a.b),this.a.dispatchEvent("b")};var Ue=ja(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},Qe);function Ve(){this.b=[],this.a=[]}function We(t){return 0==t.b.length&&(t.b=t.a,t.b.reverse(),t.a=[]),t.b.pop()}function Xe(t){return t.b.length+t.a.length}function Ye(t,e){if(w.call(this),this.h=t||0,this.c=e||10,this.h>this.c)throw Error(Ze);this.a=new Ve,this.b=new Xd,this.g=null,this.aa()}Ve.prototype.A=function(){for(var t=[],e=this.b.length-1;0<=e;--e)t.push(this.b[e]);var n=this.a.length;for(e=0;e<n;++e)t.push(this.a[e]);return t},u(Ye,w);var Ze="[goog.structs.Pool] Min can not be greater than max";function af(t){if("function"==typeof t.$)t.$();else for(var e in t)t[e]=null}function $e(t){return Xe(t.a)+t.b.a.c}function bf(t,e){this.a=t,this.b=e}function cf(t){if(this.a=[],t)t:{if(t instanceof cf){var e=t.M();if(t=t.A(),0>=this.a.length){for(var n=this.a,r=0;r<e.length;r++)n.push(new bf(e[r],t[r]));break t}}else e=Ea(t),t=Da(t);for(r=0;r<e.length;r++)df(this,e[r],t[r])}}function df(t,e,n){var r=t.a;for(r.push(new bf(e,n)),n=(t=t.a)[e=r.length-1];0<e&&t[r=e-1>>1].a>n.a;)t[e]=t[r],e=r;t[e]=n}function ef(){cf.call(this)}function Y(t,e){this.f=new ef,Ye.call(this,t,e)}function Z(t,e,n,r){this.l=t,this.j=!!r,Y.call(this,e,n)}g=Ye.prototype,g.da=function(){var e=t();if(!(null!=this.g&&0>e-this.g)){for(var n;0<Xe(this.a)&&(n=We(this.a),!this.sa(n));)this.aa();return!n&&$e(this)<this.c&&(n=this.pa()),n&&(this.g=e,this.b.add(n)),n}},g.ob=function(t){return!!pd(this.b.a,Yd(t))&&(this.ma(t),!0)},g.ma=function(t){pd(this.b.a,Yd(t)),this.sa(t)&&$e(this)<this.c?this.a.a.push(t):af(t)},g.aa=function(){for(var t=this.a;$e(this)<this.h;){var e=this.pa();t.a.push(e)}for(;$e(this)>this.c&&0<Xe(this.a);)af(We(t))},g.pa=function(){return{}},g.sa=function(t){return"function"!=typeof t.bb||t.bb()},g.w=function(){if(Ye.H.w.call(this),0<this.b.a.c)throw Error("[goog.structs.Pool] Objects not released");delete this.b;for(var t=this.a;0!=t.b.length||0!=t.a.length;)af(We(t));delete this.a},cf.prototype.A=function(){for(var t=this.a,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].b);return e},cf.prototype.M=function(){for(var t=this.a,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].a);return e},u(ef,cf),u(Y,Ye),g=Y.prototype,g.da=function(t,e){if(!t)return Y.H.da.call(this);df(this.f,void 0!==e?e:100,t),this.ra()},g.ra=function(){for(var t=this.f;0<t.a.length;){var e=this.da();if(!e)break;var n=t,r=n.a,i=r.length,o=r[0];if(0>=i)o=void 0;else{if(1==i)ua(r);else{r[0]=r.pop(),i=(n=n.a).length;for(var a=n[r=0];r<i>>1;){var s=2*r+1,u=2*r+2;if(n[s=u<i&&n[u].a<n[s].a?u:s].a>a.a)break;n[r]=n[s],r=s}n[r]=a}o=o.b}o.apply(this,[e])}},g.ma=function(t){Y.H.ma.call(this,t),this.ra()},g.aa=function(){Y.H.aa.call(this),this.ra()},g.w=function(){Y.H.w.call(this),k.clearTimeout(void 0),ua(this.f.a),this.f=null},u(Z,Y),Z.prototype.pa=function(){var t=new T,e=this.l;return e&&e.forEach(function(e,n){t.headers.set(n,e)}),this.j&&(t.o=!0),t},Z.prototype.sa=function(t){return!t.i&&!t.a},Qe.prototype.createWebChannel=Qe.prototype.a,W.prototype.send=W.prototype.gb,W.prototype.open=W.prototype.fb,W.prototype.close=W.prototype.close,Fc.NO_ERROR=0,Fc.TIMEOUT=8,Fc.HTTP_ERROR=6,Gc.COMPLETE="complete",Kc.EventType=Lc,Lc.OPEN="a",Lc.CLOSE="b",Lc.ERROR="c",Lc.MESSAGE="d",B.prototype.listen=B.prototype.Ia,Z.prototype.getObject=Z.prototype.da,Z.prototype.releaseObject=Z.prototype.ob,T.prototype.listenOnce=T.prototype.Ja,T.prototype.getLastError=T.prototype.hb,T.prototype.getLastErrorCode=T.prototype.Ga,T.prototype.getStatus=T.prototype.W,T.prototype.getStatusText=T.prototype.Ha,T.prototype.getResponseJson=T.prototype.eb,T.prototype.getResponseText=T.prototype.V,T.prototype.getResponseText=T.prototype.V,T.prototype.send=T.prototype.fa,module.exports={createWebChannelTransport:Ue,ErrorCode:Fc,EventType:Gc,WebChannel:Kc,XhrIoPool:Z}}).call("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(exports,__webpack_require__("DuR2"))},DuR2:function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},E9F9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=function(){this.blockSize=-1}},Ex2A:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"}},GmLp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Error.captureStackTrace;e.patchCapture=function(t){var e=r;return r=t,e};var i=function(){return function(t,e){if(this.code=t,this.message=e,r)r(this,o.prototype.create);else{var n=Error.apply(this,arguments);this.name="FirebaseError",Object.defineProperty(this,"stack",{get:function(){return n.stack}})}}}();e.FirebaseError=i,i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i.prototype.name="FirebaseError";var o=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,e){void 0===e&&(e={});var n,r=this.errors[t],o=this.service+"/"+t;n=void 0===r?"Error":r.replace(this.pattern,function(t,n){var r=e[n];return void 0!==r?r.toString():"<"+n+"?>"});var a=new i(o,n=this.serviceName+": "+n+" ("+o+").");for(var s in e)e.hasOwnProperty(s)&&"_"!==s.slice(-1)&&(a[s]=e[s]);return a},t}();e.ErrorFactory=o},"Gs/g":function(t,e,n){"use strict";var r=setTimeout;function i(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function a(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void u(e.promise,t)}s(e.promise,r)}else(1===t._state?s:u)(e.promise,t._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void l((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,c(t)}catch(e){u(t,e)}var r,i}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function l(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,u(e,t))})}catch(t){if(n)return;n=!0,u(e,t)}}o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(i);return a(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,e,n)),n},o.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})},o.all=function(t){return new o(function(e,n){if(!t||"undefined"==typeof t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){o(t,e)},n)}r[t]=a,0==--i&&e(r)}catch(t){n(t)}}for(var a=0;a<r.length;a++)o(a,r[a])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},o._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){r(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},t.exports=o},IYGj:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("TToO"),i=function(t){function e(){var e=t.call(this)||this;e.chain_=[],e.buf_=[],e.W_=[],e.pad_=[],e.inbuf_=0,e.total_=0,e.blockSize=64,e.pad_[0]=128;for(var n=1;n<e.blockSize;++n)e.pad_[n]=0;return e.reset(),e}return r.__extends(e,t),e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^s&(u^c),o=1518500249):(i=s^u^c,o=1859775393):r<60?(i=s&u|c&(s|u),o=2400959708):(i=s^u^c,o=3395469782);var h=(a<<5|a>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},e.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},e}(n("E9F9").Hash);e.Sha1=i},It2I:function(t,e,n){n("bzVp"),t.exports=n("9eBd").default},Jnfr:function(t,e){function n(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="Jnfr"},N4j0:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return t&&"number"==typeof t.length}},OAVl:function(t,e){String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t})},OVmG:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("TToO"),i=n("/iUD"),o=n("VwZZ"),a=n("t7NR"),s=n("tLDX"),u=function(t){function e(e,n,r){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.a;break;case 1:if(!e){this.destination=a.a;break}if("object"==typeof e){if(l(e)){var i=e[s.a]();this.syncErrorThrowable=i.syncErrorThrowable,this.destination=i,i.add(this)}else this.syncErrorThrowable=!0,this.destination=new c(this,e);break}default:this.syncErrorThrowable=!0,this.destination=new c(this,e,n,r)}}return Object(r.__extends)(e,t),e.prototype[s.a]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(o.a),c=function(t){function e(e,n,r,o){var s;t.call(this),this._parentSubscriber=e;var u=this;Object(i.a)(n)?s=n:n&&(s=n.next,r=n.error,o=n.complete,n!==a.a&&(u=Object.create(n),Object(i.a)(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=s,this._error=r,this._complete=o}return Object(r.__extends)(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,n){try{e.call(this._context,n)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(u);function l(t){return t instanceof u||"syncErrorThrowable"in t&&t[s.a]}},PIsA:function(t,e,n){"use strict";var r=n("AMGY"),i=n("N4j0"),o=n("cQXm"),a=n("dgOU"),s=n("YaPU"),u=n("etqZ"),c=n("TToO"),l=function(t){function e(e,n,r){t.call(this),this.parent=e,this.outerValue=n,this.outerIndex=r,this.index=0}return Object(c.__extends)(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n("OVmG").a),h=n("+CnV");e.a=function(t,e,n,c){var f=new l(t,n,c);if(f.closed)return null;if(e instanceof s.a)return e._isScalar?(f.next(e.value),f.complete(),null):(f.syncErrorThrowable=!0,e.subscribe(f));if(Object(i.a)(e)){for(var p=0,d=e.length;p<d&&!f.closed;p++)f.next(e[p]);f.closed||f.complete()}else{if(Object(o.a)(e))return e.then(function(t){f.closed||(f.next(t),f.complete())},function(t){return f.error(t)}).then(null,function(t){r.a.setTimeout(function(){throw t})}),f;if(e&&"function"==typeof e[u.a])for(var y=e[u.a]();;){var g=y.next();if(g.done){f.complete();break}if(f.next(g.value),f.closed)break}else if(e&&"function"==typeof e[h.a]){var m=e[h.a]();if("function"==typeof m.subscribe)return m.subscribe(new l(t,n,c));f.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var v=Object(a.a)(e)?"an invalid object":"'"+e+"'";f.error(new TypeError("You provided "+v+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}}return null}},Qnch:function(t,e,n){"use strict";e.a=function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return"number"==typeof e&&(n=e,e=null),r.lift(new a(t,e,n))}};var r=n("TToO"),i=n("PIsA"),o=n("tZ2B"),a=function(){function t(t,e,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.resultSelector,this.concurrent))},t}(),s=function(t){function e(e,n,r,i){void 0===i&&(i=Number.POSITIVE_INFINITY),t.call(this,e),this.project=n,this.resultSelector=r,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return Object(r.__extends)(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(Object(i.a)(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.resultSelector?this._notifyResultSelector(t,e,n,r):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,n,r){var i;try{i=this.resultSelector(t,e,n,r)}catch(t){return void this.destination.error(t)}this.destination.next(i)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.a)},Rf9G:function(t,e,n){"use strict";var r=n("TToO"),i=n("g5jc"),o=n("YaPU"),a=n("OVmG"),s=n("VwZZ");function u(){return function(t){return t.lift(new c(t))}}var c=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),l=function(t){function e(e,n){t.call(this,e),this.connectable=n}return Object(r.__extends)(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(a.a),h=function(t){function e(e,n){t.call(this),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return Object(r.__extends)(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new s.a).add(this.source.subscribe(new p(this.getSubject(),this))),t.closed?(this._connection=null,t=s.a.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return u()(this)},e}(o.a).prototype,f={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:h._subscribe},_isComplete:{value:h._isComplete,writable:!0},getSubject:{value:h.getSubject},connect:{value:h.connect},refCount:{value:h.refCount}},p=function(t){function e(e,n){t.call(this,e),this.connectable=n}return Object(r.__extends)(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(i.b);function d(){return new i.a}e.a=function(){return this,u()((t=d,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,f);return r.source=e,r.subjectFactory=n,r})(this));var t}},T970:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Deferred=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}()},TILf:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("TToO"),i=function(t){function e(e,n){t.call(this),this.value=e,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return Object(r.__extends)(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.value,n=t.subscriber;t.done?n.complete():(n.next(e),n.closed||(t.done=!0,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.value,r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{done:!1,value:n,subscriber:t});t.next(n),t.closed||t.complete()},e}(n("YaPU").a)},TToO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.__extends=function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n.d(e,"__assign",function(){return i}),e.__rest=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n},e.__decorate=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},e.__param=function(t,e){return function(n,r){e(n,r,t)}},e.__metadata=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},e.__awaiter=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},e.__generator=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},e.__exportStar=function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},e.__values=o,e.__read=a,e.__spread=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t},e.__await=s,e.__asyncGenerator=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||u(t,e)})})}function u(t,e){try{(n=i[t](e)).value instanceof s?Promise.resolve(n.value.v).then(c,l):h(o[0][2],n)}catch(t){h(o[0][3],t)}var n}function c(t){u("next",t)}function l(t){u("throw",t)}function h(t,e){t(e),o.shift(),o.length&&u(o[0][0],o[0][1])}},e.__asyncDelegator=function(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){t[r]&&(e[r]=function(e){return(n=!n)?{value:s(t[r](e)),done:"return"===r}:i?i(e):e})}},e.__asyncValues=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):"function"==typeof o?o(t):t[Symbol.iterator]()},e.__makeTemplateObject=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},e.__importStar=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},e.__importDefault=function(t){return t&&t.__esModule?t:{default:t}};var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function o(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function s(t){return this instanceof s?(this.v=t,this):new s(t)}},"U/B+":function(t,e,n){"use strict";function r(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}Object.defineProperty(e,"__esModule",{value:!0}),e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.errorPrefix=r,e.validateNamespace=function(t,e,n,i){if((!i||n)&&"string"!=typeof n)throw new Error(r(t,e,i)+"must be a valid firebase namespace.")},e.validateCallback=function(t,e,n,i){if((!i||n)&&"function"!=typeof n)throw new Error(r(t,e,i)+"must be a valid function.")},e.validateContextObject=function(t,e,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw new Error(r(t,e,i)+"must be a valid context object.")}},Veqx:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("TToO"),i=n("YaPU"),o=n("TILf"),a=n("+3/4"),s=n("1Q68"),u=function(t){function e(e,n){t.call(this),this.array=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return Object(r.__extends)(e,t),e.create=function(t,n){return new e(t,n)},e.of=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var r=t[t.length-1];Object(s.a)(r)?t.pop():r=null;var i=t.length;return i>1?new e(t,r):1===i?new o.a(t[0],r):new a.a(r)},e.dispatch=function(t){var e=t.array,n=t.index,r=t.subscriber;n>=t.count?r.complete():(r.next(e[n]),r.closed||(t.index=n+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.array,r=n.length,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{array:n,index:0,count:r,subscriber:t});for(var o=0;o<r&&!t.closed;o++)t.next(n[o]);t.complete()},e}(i.a)},VuKk:function(t,e,n){(function(t){(function(){var t,e=n("9eBd").default,r=r||{},i=this;function o(t){return"string"==typeof t}function a(t){return"boolean"==typeof t}function s(){}function u(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function c(t){return null===t}function l(t){return"array"==u(t)}function h(t){var e=u(t);return"array"==e||"object"==e&&"number"==typeof t.length}function f(t){return"function"==u(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var d="closure_uid_"+(1e9*Math.random()>>>0),y=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function v(t,e,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m).apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var w=Date.now||function(){return+new Date};function _(t,e){function n(){}n.prototype=e.prototype,t.lb=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.$c=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function E(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0}function T(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function S(t){if(Error.captureStackTrace)Error.captureStackTrace(this,S);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function I(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");S.call(this,n+t[r])}function C(t,e){throw new I("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function A(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function k(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function O(){this.b=this.a=null}_(S,Error),S.prototype.name="CustomError",_(I,S),I.prototype.name="AssertionError",A.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var N=new A(function(){return new R},function(t){t.reset()});function x(){var t=dt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function R(){this.next=this.b=this.a=null}O.prototype.add=function(t,e){var n=N.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},R.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},R.prototype.reset=function(){this.next=this.b=this.a=null};var D=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(o(t))return o(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},P=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=o(t)?t.split(""):t,a=0;a<r;a++)a in i&&e.call(n,i[a],a,t)},M=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=o(t)?t.split(""):t,a=0;a<n;a++)a in i&&(r[a]=e.call(void 0,i[a],a,t));return r},L=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=o(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function j(t,e){return 0<=D(t,e)}function V(t,e){var n;return(n=0<=(e=D(t,e)))&&Array.prototype.splice.call(t,e,1),n}function U(t,e){!function(t,e){var n=t.length,r=o(t)?t.split(""):t;for(--n;0<=n;--n)n in r&&e.call(void 0,r[n],n,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function F(t){return Array.prototype.concat.apply([],arguments)}function B(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function q(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}var H=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function W(t){return Z.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(K,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(Q,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(X,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Y,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(J,"&#0;")),t):t}var G,K=/&/g,z=/</g,Q=/>/g,X=/"/g,Y=/'/g,J=/\x00/g,Z=/[\x00&<>"']/;function $(t,e){return-1!=t.indexOf(e)}function tt(t,e){return t<e?-1:t>e?1:0}t:{var et=i.navigator;if(et){var nt=et.userAgent;if(nt){G=nt;break t}}G=""}function rt(t){return $(G,t)}function it(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ot(t){for(var e in t)return!1;return!0}function at(t){var e,n={};for(e in t)n[e]=t[e];return n}var st,ut,ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ct.length;o++)n=ct[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ht(t){i.setTimeout(function(){throw t},0)}function ft(t,e){ut||function(){if(-1!=String(i.Promise).indexOf("[native code]")){var t=i.Promise.resolve(void 0);ut=function(){t.then(yt)}}else ut=function(){var t=yt;!f(i.setImmediate)||i.Window&&i.Window.prototype&&!rt("Edge")&&i.Window.prototype.setImmediate==i.setImmediate?(st||(st=function(){var t=i.MessageChannel;if("undefined"==typeof t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!rt("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=v(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!=typeof t&&!rt("Trident")&&!rt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).rb;n.rb=null,t()}},function(t){r.next={rb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){i.setTimeout(t,0)}}()),st(t)):i.setImmediate(t)}}(),pt||(ut(),pt=!0),dt.add(t,e)}var pt=!1,dt=new O;function yt(){for(var t;t=x();){try{t.a.call(t.b)}catch(t){ht(t)}k(N,t)}pt=!1}function gt(t,e){if(this.a=mt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){kt(n,vt,t)},function(t){if(!(t instanceof Mt))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}kt(n,bt,t)})}catch(t){kt(this,bt,t)}}var mt=0,vt=2,bt=3;function wt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}wt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var _t=new A(function(){return new wt},function(t){t.reset()});function Et(t,e,n){var r=_t.get();return r.g=t,r.b=e,r.f=n,r}function Tt(t){if(t instanceof gt)return t;var e=new gt(s);return kt(e,vt,t),e}function St(t){return new gt(function(e,n){n(t)})}function It(t,e,n){Ot(t,e,n,null)||ft(b(e,t))}function Ct(t,e){t.b||t.a!=vt&&t.a!=bt||Nt(t),t.f?t.f.next=e:t.b=e,t.f=e}function At(t,e,n,r){var i=Et(null,null,null);return i.a=new gt(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Mt?o(e):t(i)}catch(t){o(t)}}:o}),i.a.c=t,Ct(t,i),i.a}function kt(t,e,n){t.a==mt&&(t===n&&(e=bt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ot(n,t.Jc,t.Kc,t)||(t.i=n,t.a=e,t.c=null,Nt(t),e!=bt||n instanceof Mt||function(t,e){t.g=!0,ft(function(){t.g&&Pt.call(null,e)})}(t,n)))}function Ot(t,e,n,r){if(t instanceof gt)return Ct(t,Et(e||s,n||null,r)),!0;if(T(t))return t.then(e,n,r),!0;if(p(t))try{var i=t.then;if(f(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Nt(t){t.h||(t.h=!0,ft(t.Ub,t))}function xt(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Rt(t,e,n,r){if(n==bt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Dt(e,n,r);else try{e.c?e.g.call(e.f):Dt(e,n,r)}catch(t){Pt.call(null,t)}k(_t,e)}function Dt(t,e,n){e==vt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}gt.prototype.then=function(t,e,n){return At(this,f(t)?t:null,f(e)?e:null,n)},E(gt),(t=gt.prototype).ga=function(t,e){return(t=Et(t,t,e)).c=!0,Ct(this,t),this},t.o=function(t,e){return At(this,null,t,e)},t.cancel=function(t){this.a==mt&&ft(function(){!function t(e,n){if(e.a==mt)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==mt&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):xt(r),Rt(r,o,bt,n)))}e.c=null}else kt(e,bt,n)}(this,new Mt(t))},this)},t.Jc=function(t){this.a=mt,kt(this,vt,t)},t.Kc=function(t){this.a=mt,kt(this,bt,t)},t.Ub=function(){for(var t;t=xt(this);)Rt(this,t,this.a,this.i);this.h=!1};var Pt=ht;function Mt(t){S.call(this,t)}function Lt(){0!=jt&&(Vt[this[d]||(this[d]=++y)]=this),this.pa=this.pa,this.oa=this.oa}_(Mt,S),Mt.prototype.name="cancel";var jt=0,Vt={};function Ut(t){if(!t.pa&&(t.pa=!0,t.ua(),0!=jt)){var e=t[d]||(t[d]=++y);if(0!=jt&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Vt[e]}}function Ft(t){return Ft[" "](t),t}Lt.prototype.pa=!1,Lt.prototype.ua=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()},Ft[" "]=s;var Bt,qt,Ht=rt("Opera"),Wt=rt("Trident")||rt("MSIE"),Gt=rt("Edge"),Kt=Gt||Wt,zt=rt("Gecko")&&!($(G.toLowerCase(),"webkit")&&!rt("Edge"))&&!(rt("Trident")||rt("MSIE"))&&!rt("Edge"),Qt=$(G.toLowerCase(),"webkit")&&!rt("Edge");function Xt(){var t=i.document;return t?t.documentMode:void 0}t:{var Yt="",Jt=(qt=G,zt?/rv:([^\);]+)(\)|;)/.exec(qt):Gt?/Edge\/([\d\.]+)/.exec(qt):Wt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(qt):Qt?/WebKit\/(\S+)/.exec(qt):Ht?/(?:Version)[ \/]?(\S+)/.exec(qt):void 0);if(Jt&&(Yt=Jt?Jt[1]:""),Wt){var Zt=Xt();if(null!=Zt&&Zt>parseFloat(Yt)){Bt=String(Zt);break t}}Bt=Yt}var $t,te={};function ee(t){return function(t,e){var n=te;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=H(String(Bt)).split("."),r=H(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=tt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||tt(0==a[2].length,0==s[2].length)||tt(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var ne=i.document;$t=ne&&Wt?Xt()||("CSS1Compat"==ne.compatMode?parseInt(Bt,10):5):void 0;var re=Object.freeze||function(t){return t},ie=!Wt||9<=Number($t),oe=Wt&&!ee("9"),ae=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return i.addEventListener("test",s,e),i.removeEventListener("test",s,e),t}();function se(t,e){this.type=t,this.b=this.target=e,this.Eb=!0}function ue(t,e){if(se.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(zt){t:{try{Ft(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===r?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=o(t.pointerType)?t.pointerType:ce[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.c()}}se.prototype.c=function(){this.Eb=!1},_(ue,se);var ce=re({2:"touch",3:"pen",4:"mouse"});ue.prototype.c=function(){ue.lb.c.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,oe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},ue.prototype.g=function(){return this.a};var le="closure_listenable_"+(1e6*Math.random()|0),he=0;function fe(t){t.ma=!0,t.listener=null,t.proxy=null,t.src=null,t.La=null}function pe(t){this.src=t,this.a={},this.b=0}function de(t,e){var n=e.type;n in t.a&&V(t.a[n],e)&&(fe(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function ye(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ma&&o.listener==e&&o.capture==!!n&&o.La==r)return i}return-1}pe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=ye(t,e,r,i);return-1<a?(e=t[a],n||(e.Ha=!1)):((e=new function(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.La=i,this.key=++he,this.ma=this.Ha=!1}(e,this.src,o,!!r,i)).Ha=n,t.push(e)),e};var ge="closure_lm_"+(1e6*Math.random()|0),me={};function ve(t,e,n,r,i){if(r&&r.once)we(t,e,n,r,i);else if(l(e))for(var o=0;o<e.length;o++)ve(t,e[o],n,r,i);else n=Oe(n),t&&t[le]?xe(t,e,n,p(r)?!!r.capture:!!r,i):be(t,e,n,!1,r,i)}function be(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i,s=Ae(t);if(s||(t[ge]=s=new pe(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=Ce,e=ie?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ae||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Te(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function we(t,e,n,r,i){if(l(e))for(var o=0;o<e.length;o++)we(t,e[o],n,r,i);else n=Oe(n),t&&t[le]?Re(t,e,n,p(r)?!!r.capture:!!r,i):be(t,e,n,!0,r,i)}function _e(t,e,n,r,i){if(l(e))for(var o=0;o<e.length;o++)_e(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=Oe(n),t&&t[le]?(t=t.u,(e=String(e).toString())in t.a&&-1<(n=ye(o=t.a[e],n,r,i))&&(fe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Ae(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ye(e,n,r,i)),(n=-1<t?e[t]:null)&&Ee(n))}function Ee(t){if("number"!=typeof t&&t&&!t.ma){var e=t.src;if(e&&e[le])de(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Te(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ae(e))?(de(n,t),0==n.b&&(n.src=null,e[ge]=null)):fe(t)}}}function Te(t){return t in me?me[t]:me[t]="on"+t}function Se(t,e,n,r){var i=!0;if((t=Ae(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ma&&(o=Ie(o,r),i=i&&!1!==o)}return i}function Ie(t,e){var n=t.listener,r=t.La||t.src;return t.Ha&&Ee(t),n.call(r,e)}function Ce(t,e){if(t.ma)return!0;if(!ie){if(!e)t:{e=["window","event"];for(var n=i,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new ue(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var o=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){o=!0}(o||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],o=e.b;o;o=o.parentNode)r.push(o);for(t=t.type,o=r.length-1;0<=o;o--){e.b=r[o];var a=Se(r[o],t,!0,e);n=n&&a}for(o=0;o<r.length;o++)e.b=r[o],a=Se(r[o],t,!1,e),n=n&&a}return n}return Ie(t,new ue(e,this))}function Ae(t){return(t=t[ge])instanceof pe?t:null}var ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oe(t){return f(t)?t:(t[ke]||(t[ke]=function(e){return t.handleEvent(e)}),t[ke])}function Ne(){Lt.call(this),this.u=new pe(this),this.Mb=this,this.Ta=null}function xe(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function Re(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function De(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ma&&a.capture==n){var s=a.listener,u=a.La||a.src;a.Ha&&de(t.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Eb}function Pe(t,e,n){if(f(t))n&&(t=v(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=v(t.handleEvent,t)}return 2147483647<Number(e)?-1:i.setTimeout(t,e||0)}function Me(t){var e=null;return new gt(function(n,r){-1==(e=Pe(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).o(function(t){throw i.clearTimeout(e),t})}function Le(t){if(t.R&&"function"==typeof t.R)return t.R();if(o(t))return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function je(t){if(t.T&&"function"==typeof t.T)return t.T();if(!t.R||"function"!=typeof t.R){if(h(t)||o(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Ve(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ve)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ue(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Fe(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Fe(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Fe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}_(Ne,Lt),Ne.prototype[le]=!0,Ne.prototype.addEventListener=function(t,e,n,r){ve(this,t,e,n,r)},Ne.prototype.removeEventListener=function(t,e,n,r){_e(this,t,e,n,r)},Ne.prototype.dispatchEvent=function(t){var e,n=this.Ta;if(n)for(e=[];n;n=n.Ta)e.push(n);n=this.Mb;var r=t.type||t;if(o(t))t=new se(t,n);else if(t instanceof se)t.target=t.target||n;else{var i=t;lt(t=new se(r,n),i)}if(i=!0,e)for(var a=e.length-1;0<=a;a--){var s=t.b=e[a];i=De(s,r,!0,t)&&i}if(i=De(s=t.b=n,r,!0,t)&&i,i=De(s,r,!1,t)&&i,e)for(a=0;a<e.length;a++)i=De(s=t.b=e[a],r,!1,t)&&i;return i},Ne.prototype.ua=function(){if(Ne.lb.ua.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)fe(n[r]);delete e.a[t],e.b--}}this.Ta=null},(t=Ve.prototype).R=function(){Ue(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.T=function(){return Ue(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Fe(this.b,t)?this.b[t]:e},t.set=function(t,e){Fe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Be=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qe(t,e){if(this.b=this.l=this.c="",this.i=null,this.h=this.g="",this.f=!1,t instanceof qe){this.f=void 0!==e?e:t.f,He(this,t.c),this.l=t.l,this.b=t.b,We(this,t.i),this.g=t.g,e=t.a;var n=new on;n.c=e.c,e.a&&(n.a=new Ve(e.a),n.b=e.b),Ge(this,n),this.h=t.h}else t&&(n=String(t).match(Be))?(this.f=!!e,He(this,n[1]||"",!0),this.l=Ye(n[2]||""),this.b=Ye(n[3]||"",!0),We(this,n[4]),this.g=Ye(n[5]||"",!0),Ge(this,n[6]||"",!0),this.h=Ye(n[7]||"")):(this.f=!!e,this.a=new on(null,this.f))}function He(t,e,n){t.c=n?Ye(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function We(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function Ge(t,e,n){e instanceof on?(t.a=e,function(t,e){e&&!t.f&&(an(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(un(this,e),ln(this,n,t))},t)),t.f=e}(t.a,t.f)):(n||(e=Je(e,nn)),t.a=new on(e,t.f))}function Ke(t,e,n){t.a.set(e,n)}function ze(t,e){return t.a.get(e)}function Qe(t){return t instanceof qe?new qe(t):new qe(t,void 0)}function Xe(t,e){var n=new qe(null,void 0);return He(n,"https"),t&&(n.b=t),e&&(n.g=e),n}function Ye(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Je(t,e,n){return o(t)?(t=encodeURI(t).replace(e,Ze),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ze(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}qe.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Je(e,$e,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Je(e,$e,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Je(n,"/"==n.charAt(0)?en:tn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Je(n,rn)),t.join("")};var $e=/[#\/\?@]/g,tn=/[#\?:]/g,en=/[#\?]/g,nn=/[#\?@]/g,rn=/#/g;function on(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function an(t){t.a||(t.a=new Ve,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function sn(t){var e=je(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new on(null,void 0);t=Le(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];l(o)?ln(n,i,o):n.add(i,o)}return n}function un(t,e){an(t),e=hn(t,e),Fe(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Fe((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ue(t)))}function cn(t,e){return an(t),e=hn(t,e),Fe(t.a.b,e)}function ln(t,e,n){un(t,e),0<n.length&&(t.c=null,t.a.set(hn(t,e),B(n)),t.b+=n.length)}function hn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=on.prototype).add=function(t,e){an(this),this.c=null,t=hn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){an(this),this.a.forEach(function(n,r){P(n,function(n){t.call(e,n,r,this)},this)},this)},t.T=function(){an(this);for(var t=this.a.R(),e=this.a.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.R=function(t){an(this);var e=[];if(o(t))cn(this,t)&&(e=F(e,this.a.get(hn(this,t))));else{t=this.a.R();for(var n=0;n<t.length;n++)e=F(e,t[n])}return e},t.set=function(t,e){return an(this),this.c=null,cn(this,t=hn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return 0<(t=t?this.R(t):[]).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var fn=!Wt||9<=Number($t);function pn(){this.a="",this.b=yn}function dn(t){return t instanceof pn&&t.constructor===pn&&t.b===yn?t.a:(C("expected object of type Const, got '"+t+"'"),"type_error:Const")}pn.prototype.la=!0,pn.prototype.ja=function(){return this.a},pn.prototype.toString=function(){return"Const{"+this.a+"}"};var yn={};function gn(t){var e=new pn;return e.a=t,e}function mn(){this.a="",this.b=En}function vn(t){return t instanceof mn&&t.constructor===mn&&t.b===En?t.a:(C("expected object of type TrustedResourceUrl, got '"+t+"' of type "+u(t)),"type_error:TrustedResourceUrl")}function bn(t,e){var n=dn(t);if(!_n.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=new mn;return e.a=t,e}(t=n.replace(wn,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof pn?dn(t):encodeURIComponent(String(t))}))}gn(""),mn.prototype.la=!0,mn.prototype.ja=function(){return this.a},mn.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var wn=/%{(\w+)}/g,_n=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank#/i,En={};function Tn(){this.a="",this.b=An}function Sn(t){return t instanceof Tn&&t.constructor===Tn&&t.b===An?t.a:(C("expected object of type SafeUrl, got '"+t+"' of type "+u(t)),"type_error:SafeUrl")}Tn.prototype.la=!0,Tn.prototype.ja=function(){return this.a},Tn.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var In=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Cn(t){return t instanceof Tn?t:(t=t.la?t.ja():String(t),In.test(t)||(t="about:invalid#zClosurez"),kn(t))}var An={};function kn(t){var e=new Tn;return e.a=t,e}function On(){this.a="",this.b=Nn}kn("about:blank"),On.prototype.la=!0,On.prototype.ja=function(){return this.a},On.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Nn={};function xn(t){var e=new On;return e.a=t,e}function Rn(t){var e=document;return o(t)?e.getElementById(t):t}function Dn(t,e){it(e,function(e,n){e&&e.la&&(e=e.ja()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Pn.hasOwnProperty(n)?t.setAttribute(Pn[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}xn("<!DOCTYPE html>"),xn(""),xn("<br>");var Pn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Mn(t){if(t&&"number"==typeof t.length){if(p(t))return"function"==typeof t.item||"string"==typeof t.item;if(f(t))return"function"==typeof t.item}return!1}function Ln(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(l(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),Un(i,r),r.push(":"),t(e,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Un(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new function(){},t,e),e.join("")}var jn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Vn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Un(t,e){e.push('"',t.replace(Vn,function(t){var e=jn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),jn[t]=e),e}),'"')}function Fn(){var t=ir();return Wt&&!!$t&&11==$t||/Edge\/\d+/.test(t)}function Bn(){return i.window&&i.window.location.href||self&&self.location&&self.location.href||""}function qn(t,e){e=e||i.window;var n="about:blank";t&&(n=Sn(Cn(t))),e.location.href=n}function Hn(t){return!!((t=(t||ir()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Wn(t){t=t||i.window;try{t.close()}catch(t){}}function Gn(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=ir().toLowerCase(),r&&(e.target=r,$(n,"crios/")&&(e.target="_blank")),er(ir())==$n&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Tn?n:Cn("undefined"!=typeof n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((rt("iPhone")&&!rt("iPod")&&!rt("iPad")||rt("iPad")||rt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=r.document.createElement("A"),e instanceof Tn||e instanceof Tn||(e=e.la?e.ja():String(e),In.test(e)||(e="about:invalid#zClosurez"),e=kn(e)),a.href=Sn(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open("",n,a),t=Sn(e),a&&(Kt&&$(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,gn("b/12014412, meta tag with sanitized URL"),t=xn(t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+W(t)+'">'),a.document.write(function(t){return t instanceof On&&t.constructor===On&&t.b===Nn?t.a:(C("expected object of type SafeHtml, got '"+t+"' of type "+u(t)),"type_error:SafeHtml")}(t)),a.document.close())):(a=r.open(Sn(e),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var Kn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;function zn(){var t=null;return new gt(function(e){"complete"==i.document.readyState?e():(t=function(){e()},we(window,"load",t))}).o(function(e){throw _e(window,"load",t),e})}function Qn(t){return t=t||ir(),!("file:"!==cr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Xn(){var t=i.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Yn(){return"object"!=typeof i.window&&"function"==typeof i.importScripts}function Jn(){return e.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e.INTERNAL.hasOwnProperty("node")?"Node":Yn()?"Worker":"Browser"}function Zn(){var t=Jn();return"ReactNative"===t||"Node"===t}var $n="Firefox",tr="Chrome";function er(t){var e=t.toLowerCase();return $(e,"opera/")||$(e,"opr/")||$(e,"opios/")?"Opera":$(e,"iemobile")?"IEMobile":$(e,"msie")||$(e,"trident/")?"IE":$(e,"edge/")?"Edge":$(e,"firefox/")?$n:$(e,"silk/")?"Silk":$(e,"blackberry")?"Blackberry":$(e,"webos")?"Webos":!$(e,"safari/")||$(e,"chrome/")||$(e,"crios/")||$(e,"android")?!$(e,"chrome/")&&!$(e,"crios/")||$(e,"edge/")?$(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":tr:"Safari"}var nr={Pc:"FirebaseCore-web",Rc:"FirebaseUI-web"};function rr(t,e){e=e||[];var n,r=[],i={};for(n in nr)i[nr[n]]=!0;for(n=0;n<e.length;n++)"undefined"!=typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Jn())?r=er(i=ir()):"Worker"===r&&(r=er(i=ir())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function ir(){return i.navigator&&i.navigator.userAgent||""}function or(t,e){t=t.split("."),e=e||i;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function ar(){try{var t=i.localStorage,e=dr();if(t)return t.setItem(e,"1"),t.removeItem(e),!Fn()||!!i.indexedDB}catch(t){return Yn()&&!!i.indexedDB}return!1}function sr(){return(ur()||"chrome-extension:"===cr()||Qn())&&!Zn()&&ar()&&!Yn()}function ur(){return"http:"===cr()||"https:"===cr()}function cr(){return i.location&&i.location.protocol||null}function lr(t){return!Hn(t=t||ir())&&er(t)!=$n}function hr(t){return"undefined"==typeof t?null:Ln(t)}function fr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function pr(t){if(null!==t)return JSON.parse(t)}function dr(t){return t||Math.floor(1e9*Math.random()).toString()}function yr(t){return"Safari"!=er(t=t||ir())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function gr(){var t=i.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function mr(){var t=i.navigator;return!t||"boolean"!=typeof t.onLine||!ur()&&"chrome-extension:"!==cr()&&"undefined"==typeof t.connection||t.onLine}function vr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.c=t,this.b=e,t=ir(),e=Jn(),this.a=Hn(t)||"ReactNative"===e}function br(){var t=i.document;return!t||"undefined"==typeof t.visibilityState||"visible"==t.visibilityState}function wr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function _r(){return!(!or("fireauth.oauthhelper",i)&&!or("fireauth.iframe",i))}vr.prototype.get=function(){return this.a?this.b:this.c};var Er,Tr={};try{var Sr={};Object.defineProperty(Sr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Sr,"abcd",{configurable:!0,enumerable:!0,value:2}),Er=2==Sr.abcd}catch(qt){Er=!1}function Ir(t,e,n){Er?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Cr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Ir(t,n,e[n])}function Ar(t){var e={};return Cr(e,t),e}function kr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Ir(e,n,kr(t[n]));return e}function Or(t,e){this.code=xr+t,this.message=e||Rr[t]||""}function Nr(t){var e=t&&t.code;return e?new Or(e.substring(xr.length),t.message):null}_(Or,Error),Or.prototype.C=function(){return{code:this.code,message:this.message}},Or.prototype.toJSON=function(){return this.C()};var xr="auth/",Rr={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Dr(t){var e=t[jr];if("undefined"==typeof e)throw new Or("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Or("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Pr];if(n&&"object"==typeof n){e=n[Fr];var r=n[Vr];if(n=n[Ur],"string"==typeof e&&e.length){if(this.a=e,"undefined"!=typeof r&&"boolean"!=typeof r)throw new Or("argument-error",Vr+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!=typeof n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Or("argument-error",Ur+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!=typeof e)throw new Or("argument-error",Fr+" property must be a non empty string when specified.");if("undefined"!=typeof r||"undefined"!=typeof n)throw new Or("missing-android-pkg-name")}}else if("undefined"!=typeof n)throw new Or("argument-error",Pr+" property must be a non null object when specified.");if(this.f=null,(e=t[Lr])&&"object"==typeof e){if("string"==typeof(e=e[Br])&&e.length)this.f=e;else if("undefined"!=typeof e)throw new Or("argument-error",Br+" property must be a non empty string when specified.")}else if("undefined"!=typeof e)throw new Or("argument-error",Lr+" property must be a non null object when specified.");if("undefined"!=typeof(t=t[Mr])&&"boolean"!=typeof t)throw new Or("argument-error",Mr+" property must be a boolean when specified.");this.c=!!t}var Pr="android",Mr="handleCodeInApp",Lr="iOS",jr="url",Vr="installApp",Ur="minimumVersion",Fr="packageName",Br="bundleId";function qr(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e)null===e[n]&&delete e[n];return e}var Hr=null,Wr=null;function Gr(t){this.c=t.sub,w(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function Kr(t){if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Wr[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Hr){Hr={},Wr={};for(var t=0;65>t;t++)Hr[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),Wr[Hr[t]]=t,62<=t&&(Wr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,function(t){e+=String.fromCharCode(t)}),e}(t));if(r.sub&&r.iss&&r.aud&&r.exp)return new Gr(r)}catch(t){}return null}Gr.prototype.f=function(){return this.b};var zr="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Qr=["client_id","response_type","scope","redirect_uri","state"],Xr={Qc:{Ma:"locale",Aa:500,za:600,Na:"facebook.com",cb:Qr},Sc:{Ma:null,Aa:500,za:620,Na:"github.com",cb:Qr},Tc:{Ma:"hl",Aa:515,za:680,Na:"google.com",cb:Qr},Zc:{Ma:"lang",Aa:485,za:705,Na:"twitter.com",cb:zr}};function Yr(t){for(var e in Xr)if(Xr[e].Na==t)return Xr[e];return null}function Jr(t){var e={};e["facebook.com"]=ni,e["google.com"]=ii,e["github.com"]=ri,e["twitter.com"]=oi;var n=t&&t[$r];try{if(n)return e[n]?new e[n](t):new ei(t);if("undefined"!=typeof t[Zr])return new ti(t)}catch(t){}return null}var Zr="idToken",$r="providerId";function ti(t){var e=t[$r];if(!e&&t[Zr]){var n=Kr(t[Zr]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!=typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Ir(this,"providerId",e),Ir(this,"isNewUser",n)}function ei(t){ti.call(this,t),Ir(this,"profile",kr((t=pr(t.rawUserInfo||"{}"))||{}))}function ni(t){if(ei.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ri(t){if(ei.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ir(this,"username",this.profile&&this.profile.login||null)}function ii(t){if(ei.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oi(t){if(ei.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ir(this,"username",t.screenName||null)}function ai(t){var e=Qe(t),n=ze(e,"link"),r=ze(Qe(n),"link");return ze(Qe(e=ze(e,"deep_link_id")),"link")||e||r||n||t}function si(t,e){return t.then(function(t){if(t[Uo]){var n=Kr(t[Uo]);if(!n||e!=n.c)throw new Or("user-mismatch");return t}throw new Or("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==xr+"user-not-found"?new Or("user-mismatch"):t})}function ui(t,e,n){if(e.idToken||e.accessToken)e.idToken&&Ir(this,"idToken",e.idToken),e.accessToken&&Ir(this,"accessToken",e.accessToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Or("internal-error","failed to construct a credential");Ir(this,"accessToken",e.oauthToken),Ir(this,"secret",e.oauthTokenSecret)}Ir(this,"providerId",t),Ir(this,"signInMethod",n)}function ci(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,{postBody:sn(e).toString(),requestUri:"http://localhost"}}function li(t,e){this.zc=e||[],Cr(this,{providerId:t,isOAuthProvider:!0}),this.tb={},this.Za=(Yr(t)||{}).Ma||null,this.Xa=null}function hi(t){li.call(this,t,Qr),this.a=[]}function fi(){hi.call(this,"facebook.com")}function pi(t){if(!t)throw new Or("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new fi).credential(null,e)}function di(){hi.call(this,"github.com")}function yi(t){if(!t)throw new Or("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new di).credential(null,e)}function gi(){hi.call(this,"google.com"),this.ta("profile")}function mi(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new gi).credential(n,e)}function vi(){li.call(this,"twitter.com",zr)}function bi(t,e){var n=t;if(p(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Or("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ui("twitter.com",n,"twitter.com")}function wi(t,e,n){this.a=t,this.b=e,Ir(this,"providerId","password"),Ir(this,"signInMethod",n===_i.EMAIL_LINK_SIGN_IN_METHOD?_i.EMAIL_LINK_SIGN_IN_METHOD:_i.EMAIL_PASSWORD_SIGN_IN_METHOD)}function _i(){Cr(this,{providerId:"password",isOAuthProvider:!1})}function Ei(t,e){if(!(e=Ti(e)))throw new Or("argument-error","Invalid email link!");return new wi(t,e,_i.EMAIL_LINK_SIGN_IN_METHOD)}function Ti(t){var e=ze((t=new function(t){this.a=Qe(t)}(t=ai(t))).a,"oobCode")||null;return"signIn"===(ze(t.a,"mode")||null)&&e?e:null}function Si(t){if(!(t.Ra&&t.Qa||t.Ea&&t.Y))throw new Or("internal-error");this.a=t,Ir(this,"providerId","phone"),Ir(this,"signInMethod","phone")}function Ii(t){return t.a.Ea&&t.a.Y?{temporaryProof:t.a.Ea,phoneNumber:t.a.Y}:{sessionInfo:t.a.Ra,code:t.a.Qa}}function Ci(t){try{this.a=t||e.auth()}catch(t){throw new Or("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Cr(this,{providerId:"phone",isOAuthProvider:!1})}function Ai(t,e){if(!t)throw new Or("missing-verification-id");if(!e)throw new Or("missing-verification-code");return new Si({Ra:t,Qa:e})}function ki(t){if(t.temporaryProof&&t.phoneNumber)return new Si({Ea:t.temporaryProof,Y:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret;t=t&&t.oauthIdToken;try{switch(e){case"google.com":return mi(t,n);case"facebook.com":return pi(n);case"github.com":return yi(n);case"twitter.com":return bi(n,r);default:return new hi(e).credential(t,n)}}catch(t){return null}}function Oi(t){if(!t.isOAuthProvider)throw new Or("invalid-oauth-provider")}function Ni(t,e,n,r,i){if(this.b=t,this.c=e||null,this.f=n||null,this.g=r||null,this.a=i||null,!this.f&&!this.a)throw new Or("invalid-auth-event");if(this.f&&this.a)throw new Or("invalid-auth-event");if(this.f&&!this.g)throw new Or("invalid-auth-event")}function xi(t){return(t=t||{}).type?new Ni(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Nr(t.error)):null}function Ri(){this.b=null,this.a=[]}_(ei,ti),_(ni,ei),_(ri,ei),_(ii,ei),_(oi,ei),ui.prototype.xa=function(t){return na(t,ci(this))},ui.prototype.c=function(t,e){var n=ci(this);return n.idToken=e,ra(t,n)},ui.prototype.f=function(t,e){return si(ia(t,ci(this)),e)},ui.prototype.C=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),t},li.prototype.Ca=function(t){return this.tb=at(t),this},_(hi,li),hi.prototype.ta=function(t){return j(this.a,t)||this.a.push(t),this},hi.prototype.yb=function(){return B(this.a)},hi.prototype.credential=function(t,e){if(!t&&!e)throw new Or("argument-error","credential failed: must provide the ID token and/or the access token.");return new ui(this.providerId,{idToken:t||null,accessToken:e||null},this.providerId)},_(fi,hi),Ir(fi,"PROVIDER_ID","facebook.com"),Ir(fi,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),_(di,hi),Ir(di,"PROVIDER_ID","github.com"),Ir(di,"GITHUB_SIGN_IN_METHOD","github.com"),_(gi,hi),Ir(gi,"PROVIDER_ID","google.com"),Ir(gi,"GOOGLE_SIGN_IN_METHOD","google.com"),_(vi,li),Ir(vi,"PROVIDER_ID","twitter.com"),Ir(vi,"TWITTER_SIGN_IN_METHOD","twitter.com"),wi.prototype.xa=function(t){return this.signInMethod==_i.EMAIL_LINK_SIGN_IN_METHOD?Da(t,fa,{email:this.a,oobCode:this.b}):Da(t,Oa,{email:this.a,password:this.b})},wi.prototype.c=function(t,e){return this.signInMethod==_i.EMAIL_LINK_SIGN_IN_METHOD?Da(t,pa,{idToken:e,email:this.a,oobCode:this.b}):Da(t,Ta,{idToken:e,email:this.a,password:this.b})},wi.prototype.f=function(t,e){return si(this.xa(t),e)},wi.prototype.C=function(){return{email:this.a,password:this.b,signInMethod:this.signInMethod}},Cr(_i,{PROVIDER_ID:"password"}),Cr(_i,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Cr(_i,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Si.prototype.xa=function(t){return t.Sa(Ii(this))},Si.prototype.c=function(t,e){var n=Ii(this);return n.idToken=e,Da(t,xa,n)},Si.prototype.f=function(t,e){var n=Ii(this);return n.operation="REAUTH",si(t=Da(t,Ra,n),e)},Si.prototype.C=function(){var t={providerId:"phone"};return this.a.Ra&&(t.verificationId=this.a.Ra),this.a.Qa&&(t.verificationCode=this.a.Qa),this.a.Ea&&(t.temporaryProof=this.a.Ea),this.a.Y&&(t.phoneNumber=this.a.Y),t},Ci.prototype.Sa=function(t,e){var n=this.a.b;return Tt(e.verify()).then(function(r){if(!o(r))throw new Or("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return Da(n,_a,e)}(0,{phoneNumber:t,recaptchaToken:r}).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new Or("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Cr(Ci,{PROVIDER_ID:"phone"}),Cr(Ci,{PHONE_SIGN_IN_METHOD:"phone"}),Ni.prototype.C=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,error:this.a&&this.a.C()}};var Di=null;function Pi(t){var e="unauthorized-domain",n=void 0,r=Qe(t);t=r.b,"chrome-extension"==(r=r.c)?n=q("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=q("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Or.call(this,e,n)}function Mi(t,e,n){Or.call(this,t,n),(t=e||{}).ub&&Ir(this,"email",t.ub),t.Y&&Ir(this,"phoneNumber",t.Y),t.credential&&Ir(this,"credential",t.credential)}function Li(t){if(t.code){var e=t.code||"";0==e.indexOf(xr)&&(e=e.substring(xr.length));var n={credential:ki(t)};if(t.email)n.ub=t.email;else{if(!t.phoneNumber)return new Or(e,t.message||void 0);n.Y=t.phoneNumber}return new Mi(e,n,t.message)}return null}Ri.prototype.subscribe=function(t){var e=this;this.a.push(t),this.b||(this.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=or("universalLinks.subscribe",i))&&t(null,this.b))},Ri.prototype.unsubscribe=function(t){U(this.a,function(e){return e==t})},_(Pi,Or),_(Mi,Or),Mi.prototype.C=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.C();return e&&lt(t,e),t},Mi.prototype.toJSON=function(){return this.C()};var ji,Vi=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function Ui(){}function Fi(){}function Bi(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function qi(){}function Hi(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText="",this.a.onload=v(this.ac,this),this.a.onerror=v(this.zb,this),this.a.onprogress=v(this.bc,this),this.a.ontimeout=v(this.ec,this)}function Wi(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Gi(t,e,n){this.reset(t,e,n,void 0,void 0)}function Ki(t){this.f=t,this.b=this.c=this.a=null}function zi(t,e){this.name=t,this.value=e}Ui.prototype.c=null,_(Fi,Ui),Fi.prototype.a=function(){var t=Bi(this);return t?new ActiveXObject(t):new XMLHttpRequest},Fi.prototype.b=function(){var t={};return Bi(this)&&(t[0]=!0,t[1]=!0),t},ji=new Fi,_(qi,Ui),qi.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Hi;throw Error("Unsupported browser")},qi.prototype.b=function(){return{}},(t=Hi.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.ac=function(){this.status=200,this.responseText=this.a.responseText,Wi(this,4)},t.zb=function(){this.status=500,this.responseText="",Wi(this,4)},t.ec=function(){this.zb()},t.bc=function(){this.status=200,Wi(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Gi.prototype.a=null,Gi.prototype.reset=function(t,e,n,r,i){r||w(),delete this.a},zi.prototype.toString=function(){return this.name};var Qi=new zi("SEVERE",1e3),Xi=new zi("WARNING",900),Yi=new zi("CONFIG",700),Ji=new zi("FINE",500);Ki.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(C("Root logger has no level set."),null)}(this).value)for(f(e)&&(e=e()),t=new Gi(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Zi={},$i=null;function to(t){var e;if($i||($i=new Ki(""),Zi[""]=$i,$i.c=Yi),!(e=Zi[t])){e=new Ki(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=to(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,Zi[t]=e}return e}function eo(t,e){t&&t.log(Ji,e,void 0)}function no(t){this.f=t}function ro(t){Ne.call(this),this.i=t,this.readyState=io,this.status=0,this.responseText=this.statusText="",this.onreadystatechange=null,this.g=new Headers,this.b=null,this.h="GET",this.c="",this.a=!1,this.f=to("goog.net.FetchXmlHttp")}_(no,Ui),no.prototype.a=function(){return new ro(this.f)},no.prototype.b=function(t){return function(){return t}}({}),_(ro,Ne);var io=0;function oo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ao(t){Ne.call(this),this.headers=new Ve,this.D=t||null,this.c=!1,this.A=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.i=this.G=!1,this.g=0,this.s=null,this.m=so,this.v=this.O=!1}(t=ro.prototype).open=function(t,e){if(this.readyState!=io)throw this.abort(),Error("Error reopening a connection");this.h=t,this.c=e,this.readyState=1,oo(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.g,method:this.h,credentials:void 0,cache:void 0};t&&(e.body=t),this.i.fetch(new Request(this.c,e)).then(this.dc.bind(this),this.Ab.bind(this))},t.abort=function(){this.responseText="",this.g=new Headers,this.status=0,1<=this.readyState&&this.a&&4!=this.readyState&&(this.readyState=4,this.a=!1,oo(this)),this.readyState=io},t.dc=function(t){this.a&&(this.b||(this.b=t.headers,this.readyState=2,oo(this)),this.a&&(this.readyState=3,oo(this),this.a&&t.text().then(this.cc.bind(this,t),this.Ab.bind(this))))},t.cc=function(t,e){this.a&&(this.status=t.status,this.statusText=t.statusText,this.responseText=e,this.readyState=4,oo(this))},t.Ab=function(t){var e=this.f;e&&e.log(Xi,"Failed to fetch url "+this.c,t instanceof Error?t:Error(t)),this.a&&(this.readyState=4,oo(this))},t.setRequestHeader=function(t,e){this.g.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.f)&&t.log(Xi,"Attempting to get response header but no headers have been received for url: "+this.c,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.f;return t&&t.log(Xi,"Attempting to get all response headers but no headers have been received for url: "+this.c,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},_(ao,Ne);var so="";ao.prototype.b=to("goog.net.XhrIo");var uo=/^https?$/i,co=["POST","PUT"];function lo(t){return"content-type"==t.toLowerCase()}function ho(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,fo(t),yo(t)}function fo(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function po(t){if(t.c&&"undefined"!=typeof r)if(t.A[1]&&4==mo(t)&&2==vo(t))eo(t.b,bo(t,"Local request error detected and ignored"));else if(t.i&&4==mo(t))Pe(t.Db,0,t);else if(t.dispatchEvent("readystatechange"),4==mo(t)){eo(t.b,bo(t,"Request complete")),t.c=!1;try{var e,n=vo(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var o=!0;break t;default:o=!1}if(!(e=o)){var a;if(a=0===n){var s=String(t.l).match(Be)[1]||null;if(!s&&i.self&&i.self.location){var u=i.self.location.protocol;s=u.substr(0,u.length-1)}a=!uo.test(s?s.toLowerCase():"")}e=a}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<mo(t)?t.a.statusText:""}catch(e){eo(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+vo(t)+"]",fo(t)}}finally{yo(t)}}}function yo(t,e){if(t.a){go(t);var n=t.a,r=t.A[0]?s:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(Qi,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function go(t){t.a&&t.v&&(t.a.ontimeout=null),t.s&&(i.clearTimeout(t.s),t.s=null)}function mo(t){return t.a?t.a.readyState:0}function vo(t){try{return 2<mo(t)?t.a.status:-1}catch(t){return-1}}function bo(t,e){return e+" ["+t.N+" "+t.l+" "+vo(t)+"]"}function wo(t,e){this.g=[],this.v=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function _o(t,e,n){t.a=!0,t.c=n,t.f=!e,Io(t)}function Eo(t){if(t.a){if(!t.u)throw new Co(t);t.u=!1}}function To(t,e,n,r){t.g.push([e,n,r]),t.a&&Io(t)}function So(t){return L(t.g,function(t){return f(t[1])})}function Io(t){if(t.h&&t.a&&So(t)){var e=t.h,n=Oo[e];n&&(i.clearTimeout(n.a),delete Oo[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var o=t.g.shift(),a=o[0],s=o[1];if(o=o[2],a=t.f?s:a)try{var u=a.call(o||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(T(e)||"function"==typeof i.Promise&&e instanceof i.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,So(t)||(n=!0)}}t.c=e,r&&(u=v(t.m,t,!0),r=v(t.m,t,!1),e instanceof wo?(To(e,u,r),e.A=!0):e.then(u,r)),n&&(e=new ko(e),Oo[e.a]=e,t.h=e.a)}function Co(){S.call(this)}function Ao(){S.call(this)}function ko(t){this.a=i.setTimeout(v(this.c,this),0),this.b=t}(t=ao.prototype).Fa=function(){"undefined"!=typeof r&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",eo(this.b,bo(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(eo(this.b,bo(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),yo(this))},t.ua=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),yo(this,!0)),ao.lb.ua.call(this)},t.Db=function(){this.pa||(this.I||this.i||this.f?po(this):this.sc())},t.sc=function(){po(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case so:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Qi,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return eo(this.b,"Can not get response: "+t.message),null}},wo.prototype.cancel=function(t){if(this.a)this.c instanceof wo&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.v?this.v.call(this.s,this):this.u=!0,this.a||(t=new Ao(this),Eo(this),_o(this,!1,t))}},wo.prototype.m=function(t,e){this.i=!1,_o(this,t,e)},wo.prototype.D=function(){Eo(this),_o(this,!0,null)},wo.prototype.then=function(t,e,n){var r,i,o=new gt(function(t,e){r=t,i=e});return To(this,r,function(t){t instanceof Ao?o.cancel():i(t)}),o.then(t,e,n)},E(wo),_(Co,S),Co.prototype.message="Deferred has already fired",Co.prototype.name="AlreadyCalledError",_(Ao,S),Ao.prototype.message="Deferred was canceled",Ao.prototype.name="CanceledError",ko.prototype.c=function(){throw delete Oo[this.a],this.b};var Oo={};function No(t){var e={},n=e.document||document,r=vn(t),i=document.createElement("SCRIPT"),o={Fb:i,Fa:void 0},a=new wo(xo,o),s=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){Ro(i,!0);var t=new Mo(Po,"Timeout reached for loading script "+r);Eo(a),_o(a,!1,t)},u),o.Fa=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ro(i,e.ad||!1,s),a.D())},i.onerror=function(){Ro(i,!0,s);var t=new Mo(Do,"Error while loading script "+r);Eo(a),_o(a,!1,t)},lt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Dn(i,o),i.src=vn(t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function xo(){if(this&&this.Fb){var t=this.Fb;t&&"SCRIPT"==t.tagName&&Ro(t,!0,this.Fa)}}function Ro(t,e,n){null!=n&&i.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Do=0,Po=1;function Mo(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),S.call(this,n),this.code=t}function Lo(t){this.f=t}function jo(t,n,r){if(this.b=t,this.i=(t=n||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.l=t.secureTokenTimeout||Fo,this.f=at(t.secureTokenHeaders||Bo),this.g=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.firebaseTimeout||qo,this.a=at(t.firebaseHeaders||Ho),r&&(this.a["X-Client-Version"]=r,this.f["X-Client-Version"]=r),r="Node"==Jn(),!(r=i.XMLHttpRequest||r&&e.INTERNAL.node&&e.INTERNAL.node.XMLHttpRequest)&&!Yn())throw new Or("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,this.c=Yn()?new no(self):Zn()?new Lo(r):new qi}_(Mo,S),_(Lo,Ui),Lo.prototype.a=function(){return new this.f},Lo.prototype.b=function(){return{}};var Vo,Uo="idToken",Fo=new vr(3e4,6e4),Bo={"Content-Type":"application/x-www-form-urlencoded"},qo=new vr(3e4,6e4),Ho={"Content-Type":"application/json"};function Wo(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Go(t,e){e?(t.a["X-Client-Version"]=e,t.f["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.f["X-Client-Version"])}function Ko(t,e,n,r,o,a,s){mr()?(function(){var t=ir();return!((t=er(t)!=tr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Wt&&$t&&!(9<$t))}()||Yn()?t=v(t.m,t):(Vo||(Vo=new gt(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{i[Qo]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=bn(zo,{onload:Qo});!function(t,e){To(No(n),null,e,void 0)}(0,function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)})),t=v(t.u,t)),t(e,n,r,o,a,s)):n&&n(null)}jo.prototype.m=function(t,e,n,r,a,s){if(Yn()&&("undefined"==typeof i.fetch||"undefined"==typeof i.Headers||"undefined"==typeof i.Request))throw new Or("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var u=new ao(this.c);if(s){u.g=Math.max(0,s);var c=setTimeout(function(){u.dispatchEvent("timeout")},s)}xe(u,"complete",function(){c&&clearTimeout(c);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return eo(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)}),Re(u,"ready",function(){c&&clearTimeout(c),Ut(this)}),Re(u,"timeout",function(){c&&clearTimeout(c),Ut(this),e&&e(null)}),function(t,e,n,r,a){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.N=n,t.G=!1,t.c=!0,t.a=t.D?t.D.a():ji.a(),t.A=function(t){return t.c||(t.c=t.b())}(t.D?t.D:ji),t.a.onreadystatechange=v(t.Db,t);try{eo(t.b,bo(t,"Opening Xhr")),t.I=!0,t.a.open(n,String(e),!0),t.I=!1}catch(e){return eo(t.b,bo(t,"Error opening Xhr: "+e.message)),void ho(t,e)}e=r||"";var s=new Ve(t.headers);a&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||o(t))P(t,e,void 0);else for(var n=je(t),r=Le(t),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],n&&n[a],t)}(a,function(t,e){s.set(e,t)}),a=function(t){t:{for(var e=lo,n=t.length,r=o(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:o(t)?t.charAt(e):t[e]}(s.T()),r=i.FormData&&e instanceof i.FormData,!j(co,n)||a||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.O&&(t.a.withCredentials=t.O);try{go(t),0<t.g&&(t.v=function(t){return Wt&&ee(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),eo(t.b,bo(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=v(t.Fa,t)):t.s=Pe(t.Fa,t.g,t)),eo(t.b,bo(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){eo(t.b,bo(t,"Send error: "+e.message)),ho(t,e)}}(u,t,n,r,a)};var zo=gn("https://apis.google.com/js/client.js?onload=%{onload}"),Qo="__fcb"+Math.floor(1e6*Math.random()).toString();function Xo(t){if(!Vi.test(t.email))throw new Or("invalid-email")}function Yo(t){"email"in t&&Xo(t)}function Jo(t){if(!t[Uo])throw new Or("internal-error")}function Zo(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Or("internal-error")}else{if(!t.sessionInfo)throw new Or("missing-verification-id");if(!t.code)throw new Or("missing-verification-code")}}jo.prototype.u=function(t,e,n,r,i){var o=this;Vo.then(function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})}).o(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},jo.prototype.jb=function(){return Da(this,Sa,{})},jo.prototype.mb=function(t,e){return Da(this,Ea,{idToken:t,email:e})},jo.prototype.nb=function(t,e){return Da(this,Ta,{idToken:t,password:e})};var $o={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ta(t){if(!t.requestUri||!t.sessionId&&!t.postBody)throw new Or("internal-error")}function ea(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Li(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Li(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Li(t)):t.errorMessage&&(e=Pa(t.errorMessage)),e)throw e;if(!t[Uo])throw new Or("internal-error")}function na(t,e){return e.returnIdpCredential=!0,Da(t,Ia,e)}function ra(t,e){return e.returnIdpCredential=!0,Da(t,Aa,e)}function ia(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Da(t,Ca,e)}function oa(t){if(!t.oobCode)throw new Or("invalid-action-code")}(t=jo.prototype).ob=function(t,e){var n={idToken:t},r=[];return it($o,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),Da(this,Ea,n)},t.gb=function(t,e){return lt(t={requestType:"PASSWORD_RESET",email:t},e),Da(this,ma,t)},t.hb=function(t,e){return lt(t={requestType:"EMAIL_SIGNIN",email:t},e),Da(this,ya,t)},t.fb=function(t,e){return lt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Da(this,ga,t)},t.Sa=function(t){return Da(this,Na,t)},t.Wa=function(t,e){return Da(this,wa,{oobCode:t,newPassword:e})},t.Ia=function(t){return Da(this,sa,{oobCode:t})},t.Ua=function(t){return Da(this,aa,{oobCode:t})};var aa={endpoint:"setAccountInfo",w:oa,$:"email"},sa={endpoint:"resetPassword",w:oa,J:function(t){if(!t.email||!t.requestType)throw new Or("internal-error")}},ua={endpoint:"signupNewUser",w:function(t){if(Xo(t),!t.password)throw new Or("weak-password")},J:Jo,P:!0},ca={endpoint:"createAuthUri"},la={endpoint:"deleteAccount",S:["idToken"]},ha={endpoint:"setAccountInfo",S:["idToken","deleteProvider"],w:function(t){if(!l(t.deleteProvider))throw new Or("internal-error")}},fa={endpoint:"emailLinkSignin",S:["email","oobCode"],w:Xo,J:Jo,P:!0},pa={endpoint:"emailLinkSignin",S:["idToken","email","oobCode"],w:Xo,J:Jo,P:!0},da={endpoint:"getAccountInfo"},ya={endpoint:"getOobConfirmationCode",S:["requestType"],w:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Or("internal-error");Xo(t)},$:"email"},ga={endpoint:"getOobConfirmationCode",S:["idToken","requestType"],w:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Or("internal-error")},$:"email"},ma={endpoint:"getOobConfirmationCode",S:["requestType"],w:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Or("internal-error");Xo(t)},$:"email"},va={pb:!0,endpoint:"getProjectConfig",Cb:"GET"},ba={pb:!0,endpoint:"getRecaptchaParam",Cb:"GET",J:function(t){if(!t.recaptchaSiteKey)throw new Or("internal-error")}},wa={endpoint:"resetPassword",w:oa,$:"email"},_a={endpoint:"sendVerificationCode",S:["phoneNumber","recaptchaToken"],$:"sessionInfo"},Ea={endpoint:"setAccountInfo",S:["idToken"],w:Yo,P:!0},Ta={endpoint:"setAccountInfo",S:["idToken"],w:function(t){if(Yo(t),!t.password)throw new Or("weak-password")},J:Jo,P:!0},Sa={endpoint:"signupNewUser",J:Jo,P:!0},Ia={endpoint:"verifyAssertion",w:ta,J:ea,P:!0},Ca={endpoint:"verifyAssertion",w:ta,J:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Or("user-not-found");if(t.errorMessage)throw Pa(t.errorMessage);if(!t[Uo])throw new Or("internal-error")},P:!0},Aa={endpoint:"verifyAssertion",w:function(t){if(ta(t),!t.idToken)throw new Or("internal-error")},J:ea,P:!0},ka={endpoint:"verifyCustomToken",w:function(t){if(!t.token)throw new Or("invalid-custom-token")},J:Jo,P:!0},Oa={endpoint:"verifyPassword",w:function(t){if(Xo(t),!t.password)throw new Or("wrong-password")},J:Jo,P:!0},Na={endpoint:"verifyPhoneNumber",w:Zo,J:Jo},xa={endpoint:"verifyPhoneNumber",w:function(t){if(!t.idToken)throw new Or("internal-error");Zo(t)},J:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Li(t);Jo(t)}},Ra={Tb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",w:Zo,J:Jo};function Da(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.S))return St(new Or("internal-error"));var r,i=e.Cb||"POST";return Tt(n).then(e.w).then(function(){return e.P&&(n.returnSecureToken=!0),function(t,e,n,r,i,o){var a=Qe(t.g+e);Ke(a,"key",t.b),o&&Ke(a,"cb",w().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&Ke(a,u,r[u]);return new gt(function(e,o){Ko(t,a.toString(),function(t){t?t.error?o(Ma(t,i||{})):e(t):o(new Or("network-request-failed"))},n,s?void 0:Ln(fr(r)),t.a,t.h.get())})}(t,e.endpoint,i,n,e.Tb,e.pb||!1)}).then(function(t){return r=t}).then(e.J).then(function(){if(!e.$)return r;if(!(e.$ in r))throw new Or("internal-error");return r[e.$]})}function Pa(t){return Ma({error:{errors:[{message:t}],code:400,message:t}})}function Ma(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Or(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",lt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new Or(r[i],e);return!e&&t&&(e=hr(t)),new Or("internal-error",e)}var La,ja={Vc:{Ya:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",eb:"https://securetoken.googleapis.com/v1/token",id:"p"},Xc:{Ya:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",eb:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},Yc:{Ya:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",eb:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Va(t){for(var e in ja)if(ja[e].id===t)return{firebaseEndpoint:(t=ja[e]).Ya,secureTokenEndpoint:t.eb};return null}La=Va("__EID__")?"__EID__":void 0;var Ua,Fa=gn("https://apis.google.com/js/api.js?onload=%{onload}"),Ba=new vr(3e4,6e4),qa=new vr(5e3,15e3),Ha=null;function Wa(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Xe(this.i,"/__/auth/iframe"),Ke(this.a,"apiKey",this.g),Ke(this.a,"appName",this.h),this.b=null,this.c=[]}function Ga(t,e,n,r,i){this.m=t,this.u=e,this.c=n,this.l=r,this.h=this.g=this.i=null,this.a=i,this.f=null}function Ka(t){try{return e.app(t).auth().Ka()}catch(t){return[]}}function za(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.v=null,this.g=[],this.l=this.a=null}function Qa(t){var e=Bn();return function(t){return Da(t,va,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Qe(e),r=n.c;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Qe(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:Kn.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Pi(Bn())})}function Xa(t){return t.l?t.l:(t.l=zn().then(function(){if(!t.s){var e=t.c,n=t.h,r=Ka(t.b),o=new Wa(t.u,t.f,t.b);o.f=e,o.b=n,o.c=B(r||[]),t.s=o.toString()}t.i=new function(t){this.b=t,this.a=null,this.ab=function(t){return(Ha||(Ha=new gt(function(t,e){if(mr()){var n=function(){gr(),or("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){gr(),e(Error("Network Error"))},timeout:Ba.get()})};if(or("gapi.iframes.Iframe"))t();else if(or("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();i[r]=function(){or("gapi.load")?n():e(Error("Network Error"))},Tt(No(r=bn(Fa,{onload:r}))).o(function(){e(Error("Network Error"))})}}else e(Error("Network Error"))}).o(function(t){throw Ha=null,t}))).then(function(){return new gt(function(e,n){or("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},qa.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}(t.s),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.ab.then(function(){t.a.register("authEvent",e,or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.i,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=xi(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Tt(n)}return n.status="ERROR",Tt(n)})}(t)}),t.l)}function Ya(t){return t.m||(t.v=t.c?rr(t.c,Ka(t.b)):null,t.m=new jo(t.f,Va(t.h),t.v)),t.m}function Ja(t,e,n,r,i,o,a,s,u,c){return(t=new Ga(t,e,n,r,i)).i=o,t.g=a,t.h=s,t.b=at(u||null),t.f=c,t.toString()}function Za(t){if(this.a=t||e.INTERNAL.reactNative&&e.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Or("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function $a(){this.a={},this.type="inMemory"}function ts(){try{var t=!!i.indexedDB}catch(e){t=!1}if(!t)throw new Or("web-storage-unsupported");this.f={},this.c=[],this.a=0,this.h=i.indexedDB,this.type="indexedDB"}function es(t){return t.g||(t.g=function(t){return new gt(function(e,n){var r=t.h.open("firebaseLocalStorageDb",1);r.onerror=function(t){n(Error(t.target.errorCode))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(t){e(t.target.result)}})}(t)),t.g}function ns(t){return t.objectStore("firebaseLocalStorage")}function rs(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function is(t){return new gt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(Error(t.target.errorCode))}})}function os(){if(!function(){var t="Node"==Jn();if(!(t=as()||t&&e.INTERNAL.node&&e.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Jn())throw new Or("internal-error","The LocalStorage compatibility library was not found.");throw new Or("web-storage-unsupported")}this.a=as()||e.INTERNAL.node.localStorage,this.type="localStorage"}function as(){try{var t=i.localStorage,e=dr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function ss(){this.type="nullStorage"}function us(){if(!function(){var t="Node"==Jn();if(!(t=cs()||t&&e.INTERNAL.node&&e.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Jn())throw new Or("internal-error","The SessionStorage compatibility library was not found.");throw new Or("web-storage-unsupported")}this.a=cs()||e.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function cs(){try{var t=i.sessionStorage,e=dr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}Wa.prototype.toString=function(){return this.f?Ke(this.a,"v",this.f):un(this.a.a,"v"),this.b?Ke(this.a,"eid",this.b):un(this.a.a,"eid"),this.c.length?Ke(this.a,"fw",this.c.join(",")):un(this.a.a,"fw"),this.a.toString()},Ga.prototype.toString=function(){var t=Xe(this.m,"/__/auth/handler");if(Ke(t,"apiKey",this.u),Ke(t,"appName",this.c),Ke(t,"authType",this.l),this.a.isOAuthProvider){var n=this.a;try{var r=e.app(this.c).auth().aa()}catch(t){r=null}for(var i in n.Xa=r,Ke(t,"providerId",this.a.providerId),r=fr((n=this.a).tb))r[i]=r[i].toString();i=n.zc,r=at(r);for(var o=0;o<i.length;o++){var a=i[o];a in r&&delete r[a]}n.Za&&n.Xa&&!r[n.Za]&&(r[n.Za]=n.Xa),ot(r)||Ke(t,"customParameters",hr(r))}if("function"==typeof this.a.yb&&(n=this.a.yb()).length&&Ke(t,"scopes",n.join(",")),this.i?Ke(t,"redirectUrl",this.i):un(t.a,"redirectUrl"),this.g?Ke(t,"eventId",this.g):un(t.a,"eventId"),this.h?Ke(t,"v",this.h):un(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!ze(t,s)&&Ke(t,s,this.b[s]);return this.f?Ke(t,"eid",this.f):un(t.a,"eid"),(s=Ka(this.c)).length&&Ke(t,"fw",s.join(",")),t.toString()},(t=za.prototype).Da=function(t,e,n){var r=new Or("popup-closed-by-user"),i=new Or("web-storage-unsupported"),o=this,a=!1;return this.ca().then(function(){(function(t){var e={type:"webStorageSupport"};return Xa(t).then(function(){return function(t,e){return t.ab.then(function(){return new gt(function(n){t.a.send(e.type,e,n,or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.i,e)}).then(function(t){if(t&&t.length&&"undefined"!=typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&Wn(t),e(i),a=!0)})}).o(function(){}).then(function(){if(!a)return function(t){return new gt(function(e){return function n(){Me(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!a)return Me(n).then(function(){e(r)})})},t.Gb=function(){var t=ir();return!lr(t)&&!yr(t)},t.Bb=function(){return!1},t.xb=function(t,e,n,r,i,o,a){if(!t)return St(new Or("popup-blocked"));if(a&&!lr())return this.ca().o(function(e){Wn(t),i(e)}),r(),Tt();this.a||(this.a=Qa(Ya(this)));var s=this;return this.a.then(function(){var e=s.ca().o(function(e){throw Wn(t),i(e),e});return r(),e}).then(function(){Oi(n),a||qn(Ja(s.u,s.f,s.b,e,n,null,o,s.c,void 0,s.h),t)}).o(function(t){throw"auth/network-request-failed"==t.code&&(s.a=null),t})},t.Ba=function(t,e,n){this.a||(this.a=Qa(Ya(this)));var r=this;return this.a.then(function(){Oi(e),qn(Ja(r.u,r.f,r.b,t,e,Bn(),n,r.c,void 0,r.h))}).o(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},t.ca=function(){var t=this;return Xa(this).then(function(){return t.i.ab}).o(function(){throw t.a=null,new Or("network-request-failed")})},t.Lb=function(){return!0},t.va=function(t){this.g.push(t)},t.Ja=function(t){U(this.g,function(e){return e==t})},(t=Za.prototype).get=function(t){return Tt(this.a.getItem(t)).then(function(t){return t&&pr(t)})},t.set=function(t,e){return Tt(this.a.setItem(t,hr(e)))},t.X=function(t){return Tt(this.a.removeItem(t))},t.ia=function(){},t.ea=function(){},(t=$a.prototype).get=function(t){return Tt(this.a[t])},t.set=function(t,e){return this.a[t]=e,Tt()},t.X=function(t){return delete this.a[t],Tt()},t.ia=function(){},t.ea=function(){},(t=ts.prototype).set=function(t,e){var n,r=!1,i=this;return es(this).then(function(e){return is((e=ns(rs(n=e,!0))).get(t))}).then(function(o){var a=ns(rs(n,!0));return o?(o.value=e,is(a.put(o))):(i.a++,r=!0,(o={}).fbase_key=t,o.value=e,is(a.add(o)))}).then(function(){i.f[t]=e}).ga(function(){r&&i.a--})},t.get=function(t){return es(this).then(function(e){return is(ns(rs(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.X=function(t){var e=!1,n=this;return es(this).then(function(r){return e=!0,n.a++,is(ns(rs(r,!0)).delete(t))}).then(function(){delete n.f[t]}).ga(function(){e&&n.a--})},t.Ic=function(){var t=this;return es(this).then(function(t){var e=ns(rs(t,!1));return e.getAll?is(e.getAll()):new gt(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(Error(t.target.errorCode))}})}).then(function(e){var n={},r=[];if(0==t.a){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)if(r in n)if(typeof e[r]!=typeof n[r])i.push(r);else if(l(e[r])){t:{var o=void 0,a=e[r],s=n[r];for(o in a)if(!(o in s)||a[o]!==s[o]){o=!1;break t}for(o in s)if(!(o in a)){o=!1;break t}o=!0}o||i.push(r)}else"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r);else i.push(r);for(r in n)r in e||i.push(r);return i}(t.f,n),t.f=n}return r})},t.ia=function(t){0==this.c.length&&function(t){t.b&&t.b.cancel("STOP_EVENT"),function e(){return t.b=Me(800).then(v(t.Ic,t)).then(function(e){0<e.length&&P(t.c,function(t){t(e)})}).then(e).o(function(t){"STOP_EVENT"!=t.message&&e()}),t.b}()}(this),this.c.push(t)},t.ea=function(t){U(this.c,function(e){return e==t}),0==this.c.length&&this.b&&this.b.cancel("STOP_EVENT")},(t=os.prototype).get=function(t){var e=this;return Tt().then(function(){return pr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Tt().then(function(){var r=hr(e);null===r?n.X(t):n.a.setItem(t,r)})},t.X=function(t){var e=this;return Tt().then(function(){e.a.removeItem(t)})},t.ia=function(t){i.window&&ve(i.window,"storage",t)},t.ea=function(t){i.window&&_e(i.window,"storage",t)},(t=ss.prototype).get=function(){return Tt(null)},t.set=function(){return Tt()},t.X=function(){return Tt()},t.ia=function(){},t.ea=function(){},(t=us.prototype).get=function(t){var e=this;return Tt().then(function(){return pr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Tt().then(function(){var r=hr(e);null===r?n.X(t):n.a.setItem(t,r)})},t.X=function(t){var e=this;return Tt().then(function(){e.a.removeItem(t)})},t.ia=function(){},t.ea=function(){};var ls,hs,fs={B:os,Pa:us},ps={B:os,Pa:us},ds={B:Za,Pa:ss},ys={B:os,Pa:ss},gs={Uc:"local",NONE:"none",Wc:"session"};function ms(){var t=!(yr(ir())||!Xn()),e=lr(),n=ar();this.m=t,this.h=e,this.l=n,this.a={},ls||(ls=new function(){var t={};t.Browser=fs,t.Node=ps,t.ReactNative=ds,t.Worker=ys,this.a=t[Jn()]}),t=ls;try{if(!Fn()&&_r()||!i.indexedDB)var r=new t.a.B;else Ua||(Ua=new ts),r=Ua;this.g=r}catch(t){this.g=new $a,this.h=!0}try{this.i=new t.a.Pa}catch(t){this.i=new $a}this.u=new $a,this.f=v(this.Kb,this),this.b={}}function vs(){return hs||(hs=new ms),hs}function bs(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function ws(t,e){return"firebase:"+t.name+(e?":"+e:"")}function _s(t,e,n){return n=ws(e,n),"local"==e.B&&(t.b[n]=null),bs(t,e.B).X(n)}function Es(t){t.c&&(clearInterval(t.c),t.c=null)}(t=ms.prototype).get=function(t,e){return bs(this,t.B).get(ws(t,e))},t.set=function(t,e,n){var r=ws(t,n),i=this,o=bs(this,t.B);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.B&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=ws(t,e),this.l&&(this.b[t]=i.localStorage.getItem(t)),ot(this.a)&&(bs(this,"local").ia(this.f),this.h||(Fn()||!_r())&&i.indexedDB||!this.l||function(t){Es(t),t.c=setInterval(function(){for(var e in t.a){var n=i.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new ue({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Kb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=ws(t,e),this.a[t]&&(U(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ot(this.a)&&(bs(this,"local").ea(this.f),Es(this))},t.Kb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"==typeof r&&(r=null);var o=i.localStorage.getItem(n);o!==r&&(this.b[n]=o,this.Va(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!=typeof t.a.a?bs(this,"local").ea(this.f):Es(this),this.m)if(n=i.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?i.localStorage.setItem(e,r):i.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"==typeof t.a.a)return;var a=this;n=function(){"undefined"==typeof t.a.a&&a.b[e]===i.localStorage.getItem(e)||(a.b[e]=i.localStorage.getItem(e),a.Va(e))},Wt&&$t&&10==$t&&i.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else P(t,v(this.Va,this))},t.Va=function(t){this.a[t]&&P(this.a[t],function(t){t()})};var Ts,Ss={name:"authEvent",B:"local"};function Is(t,e){this.b=-1,this.b=Cs,this.f=i.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=i.Int32Array?new Int32Array(64):Array(64),void 0!==Ts||(Ts=i.Int32Array?new Int32Array(Ds):Ds),this.reset()}_(Is,function(){this.b=-1});for(var Cs=64,As=Cs-1,ks=[],Os=0;Os<As;Os++)ks[Os]=0;var Ns=F(128,ks);function xs(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|Ts[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Rs(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(o(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(xs(t),i=0);else{if(!h(e))throw Error("message must be string or array");for(;r<n;){var a=e[r++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");t.f[i++]=a,i==t.b&&(xs(t),i=0)}}t.c=i,t.g+=n}Is.prototype.reset=function(){this.g=this.c=0,this.a=i.Int32Array?new Int32Array(this.h):B(this.h)};var Ds=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ps(){Is.call(this,8,Ms)}_(Ps,Is);var Ms=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ls(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.v=new function(){this.a=vs()},this.g=new function(t){this.a=t,this.b=vs()}(this.h),this.f=null,this.b=[],this.a=this.c=null}function js(t){return new Or("invalid-cordova-configuration",t)}function Vs(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Us(t){return t.f||(t.f=t.ca().then(function(){return new gt(function(e){t.va(function n(r){return e(r),t.Ja(n),!1}),function(t){function e(e){r=!0,o&&o.cancel(),Fs(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ai(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=pr(ze(o=Qe(i),"firebaseError")||null))?Nr(o):null)?new Ni(r.b,r.c,null,null,o):new Ni(r.b,r.c,i,r.g)),i=o||n}Vs(t,i)})}var n=new Ni("unknown",null,null,null,new Or("no-auth-event")),r=!1,o=Me(500).then(function(){return Fs(t).then(function(){r||Vs(t,n)})}),a=i.handleOpenURL;i.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(or("BuildInfo.packageName",i).toLowerCase()+"://")&&e({url:t}),"function"==typeof a)try{a(t)}catch(t){console.error(t)}},Di||(Di=new Ri),Di.subscribe(e)}(t)})})),t.f}function Fs(t){var e=null;return function(t){return t.b.get(Ss,t.a).then(function(t){return xi(t)})}(t.g).then(function(n){return e=n,_s((n=t.g).b,Ss,n.a)}).then(function(){return e})}(t=Ls.prototype).ca=function(){return this.ya?this.ya:this.ya=(Qn(void 0)?zn().then(function(){return new gt(function(t,e){var n=i.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):St(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof or("universalLinks.subscribe",i))throw js("cordova-universal-links-plugin is not installed");if("undefined"==typeof or("BuildInfo.packageName",i))throw js("cordova-plugin-buildinfo is not installed");if("function"!=typeof or("cordova.plugins.browsertab.openUrl",i))throw js("cordova-plugin-browsertab is not installed");if("function"!=typeof or("cordova.InAppBrowser.open",i))throw js("cordova-plugin-inappbrowser is not installed")},function(){throw new Or("cordova-not-ready")})},t.Da=function(t,e){return e(new Or("operation-not-supported-in-this-environment")),Tt()},t.xb=function(){return St(new Or("operation-not-supported-in-this-environment"))},t.Lb=function(){return!1},t.Gb=function(){return!0},t.Bb=function(){return!0},t.Ba=function(t,e,n){if(this.c)return St(new Or("redirect-operation-pending"));var r=this,o=i.document,a=null,s=null,u=null,c=null;return this.c=Tt().then(function(){return Oi(e),Us(r)}).then(function(){return function(t,e,n,r){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Ni(e,r,null,o,new Or("no-auth-event")),s=or("BuildInfo.packageName",i);if("string"!=typeof s)throw new Or("invalid-cordova-configuration");var u=or("BuildInfo.displayName",i),c={};if(ir().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!ir().toLowerCase().match(/android/))return St(new Or("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=function(t){var e=new Ps;Rs(e,t),t=[];var n=8*e.g;Rs(e,Ns,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(xs(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return M(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),c.sessionId=o;var l=Ja(t.u,t.i,t.l,e,n,null,r,t.m,c,t.s);return t.ca().then(function(){var e=t.h;return t.v.a.set(Ss,a.C(),e)}).then(function(){var e=or("cordova.plugins.browsertab.isAvailable",i);if("function"!=typeof e)throw new Or("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=or("cordova.plugins.browsertab.openUrl",i)))throw new Or("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=or("cordova.InAppBrowser.open",i)))throw new Or("invalid-cordova-configuration");e=!(!(e=ir()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),t.a=n(l,e?"_blank":"_system","location=yes")}})})}(r,t,e,n)}).then(function(){return new gt(function(t,e){s=function(){var e=or("cordova.plugins.browsertab.close",i);return t(),"function"==typeof e&&e(),r.a&&"function"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.va(s),c=function(){br()&&u()},o.addEventListener("resume",u=function(){a||(a=Me(2e3).then(function(){e(new Or("redirect-cancelled-by-user"))}))},!1),ir().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return Fs(r).then(function(){throw t})})}).ga(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&r.Ja(s),r.c=null})},t.va=function(t){this.b.push(t),Us(this).o(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Ni("unknown",null,null,null,new Or("no-auth-event")),t(e))})},t.Ja=function(t){U(this.b,function(e){return e==t})};var Bs={name:"pendingRedirect",B:"session"};function qs(t){return _s(t.b,Bs,t.a)}function Hs(t,e,n){this.v=t,this.l=e,this.u=n,this.h=[],this.f=!1,this.i=v(this.m,this),this.c=new $s,this.s=new ru,this.g=new function(t){this.a=t,this.b=vs()}(this.l+":"+this.u),this.b={},this.b.unknown=this.c,this.b.signInViaRedirect=this.c,this.b.linkViaRedirect=this.c,this.b.reauthViaRedirect=this.c,this.b.signInViaPopup=this.s,this.b.linkViaPopup=this.s,this.b.reauthViaPopup=this.s,this.a=Ws(this.v,this.l,this.u,La)}function Ws(t,n,r,i){var o=e.SDK_VERSION||null;return Qn()?new Ls(t,n,r,o,i):new za(t,n,r,o,i)}function Gs(t){t.f||(t.f=!0,t.a.va(t.i));var e=t.a;return t.a.ca().o(function(n){throw t.a==e&&t.reset(),n})}function Ks(t){t.a.Gb()&&Gs(t).o(function(e){var n=new Ni("unknown",null,null,null,new Or("operation-not-supported-in-this-environment"));Ys(e)&&t.m(n)}),t.a.Bb()||tu(t.c)}Hs.prototype.reset=function(){this.f=!1,this.a.Ja(this.i),this.a=Ws(this.v,this.l,this.u)},Hs.prototype.subscribe=function(t){if(j(this.h,t)||this.h.push(t),!this.f){var e=this;(function(t){return t.b.get(Bs,t.a).then(function(t){return"pending"==t})})(this.g).then(function(t){t?qs(e.g).then(function(){Gs(e).o(function(t){var n=new Ni("unknown",null,null,null,new Or("operation-not-supported-in-this-environment"));Ys(t)&&e.m(n)})}):Ks(e)}).o(function(){Ks(e)})}},Hs.prototype.unsubscribe=function(t){U(this.h,function(e){return e==t})},Hs.prototype.m=function(t){if(!t)throw new Or("invalid-auth-event");for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.qb(t.b,t.c)){(e=this.b[t.b])&&e.h(t,r),e=!0;break}}return tu(this.c),e};var zs=new vr(2e3,1e4),Qs=new vr(3e4,6e4);function Xs(t,e,n,r,i,o){return t.a.xb(e,n,r,function(){t.f||(t.f=!0,t.a.va(t.i))},function(){t.reset()},i,o)}function Ys(t){return!(!t||"auth/cordova-not-ready"!=t.code)}Hs.prototype.ba=function(){return this.c.ba()},Hs.prototype.Ba=function(t,e,n){var r,i=this;return function(t){return t.b.set(Bs,"pending",t.a)}(this.g).then(function(){return i.a.Ba(t,e,n).o(function(t){if(Ys(t))throw new Or("operation-not-supported-in-this-environment");return r=t,qs(i.g).then(function(){throw r})}).then(function(){return i.a.Lb()?new gt(function(){}):qs(i.g).then(function(){return i.ba()}).then(function(){}).o(function(){})})})},Hs.prototype.Da=function(t,e,n,r){return this.a.Da(n,function(n){t.fa(e,null,n,r)},zs.get())};var Js={};function Zs(t,e,n){var r=e+":"+n;return Js[r]||(Js[r]=new Hs(t,e,n)),Js[r]}function $s(){this.b=null,this.f=[],this.c=[],this.a=null,this.g=!1}function tu(t){t.g||(t.g=!0,nu(t,!1,null,null))}function eu(t,e){if(t.b=function(){return Tt(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function nu(t,e,n,r){e?r?function(t,e){if(t.b=function(){return St(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):eu(t,n):eu(t,{user:null}),t.f=[],t.c=[]}function ru(){}function iu(t,e){this.a=e,Ir(this,"verificationId",t)}function ou(t,e,n,r){return new Ci(t).Sa(e,n).then(function(t){return new iu(t,r)})}function au(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function su(t){this.f=t,this.b=this.a=null,this.c=0}function uu(t,e){var n=e[Uo],r=e.refreshToken;e=cu(e.expiresIn),t.b=n,t.c=e,t.a=r}function cu(t){return w()+1e3*parseInt(t,10)}function lu(t,e){this.a=t||null,this.b=e||null,Cr(this,{lastSignInTime:wr(e||null),creationTime:wr(t||null)})}function hu(t,e){for(var n in se.call(this,t),e)this[n]=e[n]}function fu(t,n,r){this.D=[],this.G=t.apiKey,this.s=t.appName,this.A=t.authDomain||null,t=e.SDK_VERSION?rr(e.SDK_VERSION):null,this.b=new jo(this.G,Va(La),t),this.h=new su(this.b),bu(this,n[Uo]),uu(this.h,n),Ir(this,"refreshToken",this.h.a),Eu(this,r||{}),Ne.call(this),this.I=!1,this.A&&sr()&&(this.a=Zs(this.A,this.G,this.s)),this.N=[],this.i=null,this.l=function(t){return new au(function(){return t.F(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.h.c-w()-3e5;return 0<e?e:0})}(this),this.U=v(this.Ga,this);var i=this;this.ha=null,this.sa=function(t){i.na(t.h)},this.W=null,this.O=[],this.ra=function(t){du(i,t.f)},this.V=null}function pu(t,e){t.W&&_e(t.W,"languageCodeChanged",t.sa),(t.W=e)&&ve(e,"languageCodeChanged",t.sa)}function du(t,n){t.O=n,Go(t.b,e.SDK_VERSION?rr(e.SDK_VERSION,t.O):null)}function yu(t,e){t.V&&_e(t.V,"frameworkChanged",t.ra),(t.V=e)&&ve(e,"frameworkChanged",t.ra)}function gu(t){try{return e.app(t.s).auth()}catch(e){throw new Or("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.s+"'!")}}function mu(t){t.m||t.l.b||(t.l.start(),_e(t,"tokenChanged",t.U),ve(t,"tokenChanged",t.U))}function vu(t){_e(t,"tokenChanged",t.U),t.l.stop()}function bu(t,e){t.qa=e,Ir(t,"_lat",e)}function wu(t){for(var e=[],n=0;n<t.N.length;n++)e.push(t.N[n](t));return function(t){return new gt(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Zb:!0,value:o}:{Zb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)It(t[o],b(i,o,!0),b(i,o,!1));else e(r)})}(e).then(function(){return t})}function _u(t){t.a&&!t.I&&(t.I=!0,t.a.subscribe(t))}function Eu(t,e){Cr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,metadata:new lu(e.createdAt,e.lastLoginAt),providerData:[]})}function Tu(){}function Su(t){return Tt().then(function(){if(t.m)throw new Or("app-deleted")})}function Iu(t){return M(t.providerData,function(t){return t.providerId})}function Cu(t,e){e&&(Au(t,e.providerId),t.providerData.push(e))}function Au(t,e){U(t.providerData,function(t){return t.providerId==e})}function ku(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Ir(t,e,n)}function Ou(t,e){t!=e&&(Cr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,providerData:[]}),Ir(t,"metadata",e.metadata?function(t){return new lu(t.a,t.b)}(e.metadata):new lu),P(e.providerData,function(e){Cu(t,e)}),t.h=e.h,Ir(t,"refreshToken",t.h.a))}function Nu(t){return t.F().then(function(e){var n=t.isAnonymous;return function(t,e){return Da(t.b,da,{idToken:e}).then(v(t.tc,t))}(t,e).then(function(){return n||ku(t,"isAnonymous",!1),e})})}function xu(t,e){e[Uo]&&t.qa!=e[Uo]&&(uu(t.h,e),t.dispatchEvent(new hu("tokenChanged")),bu(t,e[Uo]),ku(t,"refreshToken",t.h.a))}function Ru(t,e){return Nu(t).then(function(){if(j(Iu(t),e))return wu(t).then(function(){throw new Or("provider-already-linked")})})}function Du(t,e,n){return Ar({user:t,credential:ki(e),additionalUserInfo:e=Jr(e),operationType:n})}function Pu(t,e){return xu(t,e),t.reload().then(function(){return t})}function Mu(t,n,r,i,o){if(!sr())return St(new Or("operation-not-supported-in-this-environment"));if(t.i&&!o)return St(t.i);var a=Yr(r.providerId),s=dr(t.uid+":::"),u=null;(!lr()||Xn())&&t.A&&r.isOAuthProvider&&(u=Ja(t.A,t.G,t.s,n,r,null,s,e.SDK_VERSION||null));var c=Gn(u,a&&a.Aa,a&&a.za);return i=i().then(function(){if(ju(t),!o)return t.F().then(function(){})}).then(function(){return Xs(t.a,c,n,r,s,!!u)}).then(function(){return new gt(function(e,r){t.fa(n,null,new Or("cancelled-popup-request"),t.g||null),t.f=e,t.v=r,t.g=s,t.c=t.a.Da(t,n,c,s)})}).then(function(t){return c&&Wn(c),t?Ar(t):null}).o(function(t){throw c&&Wn(c),t}),Vu(t,i,o)}function Lu(t,e,n,r,i){if(!sr())return St(new Or("operation-not-supported-in-this-environment"));if(t.i&&!i)return St(t.i);var o=null,a=dr(t.uid+":::");return r=r().then(function(){if(ju(t),!i)return t.F().then(function(){})}).then(function(){return t.Z=a,wu(t)}).then(function(e){return t.da&&(e=(e=t.da).b.set(Fu,t.C(),e.a)),e}).then(function(){return t.a.Ba(e,n,a)}).o(function(e){if(o=e,t.da)return Bu(t.da);throw o}).then(function(){if(o)throw o}),Vu(t,r,i)}function ju(t){if(!t.a||!t.I){if(t.a&&!t.I)throw new Or("internal-error");throw new Or("auth-domain-config-required")}}function Vu(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),St(t.i)):e.o(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new hu("userInvalidated")),t.i=e),e})}(t,e,n);return t.D.push(r),r.ga(function(){V(t.D,r)}),r}function Uu(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[Uo]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-w())/1e3;var r=new fu(e,n,t);return t.providerData&&P(t.providerData,function(t){t&&Cu(r,Ar(t))}),t.redirectEventId&&(r.Z=t.redirectEventId),r}$s.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},$s.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.b,r=t.c;"unknown"!=n||t.a&&"auth/web-storage-unsupported"==t.a.code||t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code?t.a?(nu(this,!0,null,t.a),Tt()):e.wa(n,r)?function(t,e,n){n=n.wa(e.b,e.c);var r=e.f,i=e.g,o=!!e.b.match(/Redirect$/);n(r,i).then(function(e){nu(t,o,e,null)}).o(function(e){nu(t,o,null,e)})}(this,t,e):St(new Or("invalid-auth-event")):(nu(this,!1,null,null),Tt())}else St(new Or("invalid-auth-event"))},$s.prototype.ba=function(){var t=this;return new gt(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new Or("timeout");t.a&&t.a.cancel(),t.a=Me(Qs.get()).then(function(){t.b||nu(t,!0,null,e)})}(t))})},ru.prototype.h=function(t,e){if(t){var n=t.b,r=t.c;t.a?(e.fa(t.b,null,t.a,t.c),Tt()):e.wa(n,r)?function(t,e){var n=t.c,r=t.b;e.wa(r,n)(t.f,t.g).then(function(t){e.fa(r,t,null,n)}).o(function(t){e.fa(r,null,t,n)})}(t,e):St(new Or("invalid-auth-event"))}else St(new Or("invalid-auth-event"))},iu.prototype.confirm=function(t){return t=Ai(this.verificationId,t),this.a(t)},au.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=Me(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then(function(){return t=i.document,e=null,br()||!t?Tt():new gt(function(n){t.addEventListener("visibilitychange",e=function(){br()&&(t.removeEventListener("visibilitychange",e,!1),n())},!1)}).o(function(n){throw t.removeEventListener("visibilitychange",e,!1),n});var t,e}).then(function(){return e.h()}).then(function(){t(e,!0)}).o(function(n){e.i(n)&&t(e,!1)})}(this,!0)},au.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},su.prototype.C=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},su.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?St(new Or("user-token-expired")):t||!this.b||w()>this.c-3e4?this.a?function(t,e){return function(t,e){return new gt(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Ko(t,t.i+"?key="+encodeURIComponent(t.b),function(t){t?t.error?r(Ma(t)):t.access_token&&t.refresh_token?n(t):r(new Or("internal-error")):r(new Or("network-request-failed"))},"POST",sn(e).toString(),t.f,t.l.get()):r(new Or("internal-error"))})}(t.f,e).then(function(e){return t.b=e.access_token,t.c=cu(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Tt(null):Tt({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},lu.prototype.C=function(){return{lastLoginAt:this.b,createdAt:this.a}},_(hu,se),_(fu,Ne),fu.prototype.na=function(t){this.ha=t,Wo(this.b,t)},fu.prototype.aa=function(){return this.ha},fu.prototype.Ka=function(){return B(this.O)},fu.prototype.Ga=function(){this.l.b&&(this.l.stop(),this.l.start())},Ir(fu.prototype,"providerId","firebase"),(t=fu.prototype).reload=function(){var t=this;return Vu(this,Su(this).then(function(){return Nu(t).then(function(){return wu(t)}).then(Tu)}))},t.F=function(t){var e=this;return Vu(this,Su(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new Or("internal-error");return t.accessToken!=e.qa&&(bu(e,t.accessToken),e.dispatchEvent(new hu("tokenChanged"))),ku(e,"refreshToken",t.refreshToken),t.accessToken}))},t.getToken=function(t){return Tr["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]||(Tr["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead.")),this.F(t)},t.tc=function(t){if(!(t=t.users)||!t.length)throw new Or("internal-error");Eu(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?M(t,function(t){return new function(t,e,n,r,i,o){Cr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Cu(this,e[n]);ku(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.bb=function(t){var e=this,n=null;return Vu(this,t.f(this.b,this.uid).then(function(t){return xu(e,t),n=Du(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},t.uc=function(t){return this.bb(t).then(function(){})},t.$a=function(t){var e=this,n=null;return Vu(this,Ru(this,t.providerId).then(function(){return e.F()}).then(function(n){return t.c(e.b,n)}).then(function(t){return n=Du(e,t,"link"),Pu(e,t)}).then(function(){return n}))},t.kc=function(t){return this.$a(t).then(function(t){return t.user})},t.mc=function(t,e){var n=this;return Vu(this,Ru(this,"phone").then(function(){return ou(gu(n),t,e,v(n.$a,n))}))},t.vc=function(t,e){var n=this;return Vu(this,Tt().then(function(){return ou(gu(n),t,e,v(n.bb,n))}),!0)},t.mb=function(t){var e=this;return Vu(this,this.F().then(function(n){return e.b.mb(n,t)}).then(function(t){return xu(e,t),e.reload()}))},t.Mc=function(t){var e=this;return Vu(this,this.F().then(function(n){return t.c(e.b,n)}).then(function(t){return xu(e,t),e.reload()}))},t.nb=function(t){var e=this;return Vu(this,this.F().then(function(n){return e.b.nb(n,t)}).then(function(t){return xu(e,t),e.reload()}))},t.ob=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Su(this);var e=this;return Vu(this,this.F().then(function(n){return e.b.ob(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return xu(e,t),ku(e,"displayName",t.displayName||null),ku(e,"photoURL",t.photoUrl||null),P(e.providerData,function(t){"password"===t.providerId&&(Ir(t,"displayName",e.displayName),Ir(t,"photoURL",e.photoURL))}),wu(e)}).then(Tu))},t.Lc=function(t){var e=this;return Vu(this,Nu(this).then(function(n){return j(Iu(e),t)?function(t,e,n){return Da(t,ha,{idToken:e,deleteProvider:n})}(e.b,n,[t]).then(function(t){var n={};return P(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),P(Iu(e),function(t){n[t]||Au(e,t)}),n[Ci.PROVIDER_ID]||Ir(e,"phoneNumber",null),wu(e)}):wu(e).then(function(){throw new Or("no-such-provider")})}))},t.delete=function(){var t=this;return Vu(this,this.F().then(function(e){return Da(t.b,la,{idToken:e})}).then(function(){t.dispatchEvent(new hu("userDeleted"))})).then(function(){for(var e=0;e<t.D.length;e++)t.D[e].cancel("app-deleted");pu(t,null),yu(t,null),t.D=[],t.m=!0,vu(t),Ir(t,"refreshToken",null),t.a&&t.a.unsubscribe(t)})},t.qb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.Z||null)==e||"reauthViaRedirect"==t&&(this.Z||null)==e)},t.fa=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.wa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?v(this.vb,this):"reauthViaPopup"==t&&e==(this.g||null)?v(this.wb,this):"linkViaRedirect"==t&&(this.Z||null)==e?v(this.vb,this):"reauthViaRedirect"==t&&(this.Z||null)==e?v(this.wb,this):null},t.nc=function(t){var e=this;return Mu(this,"linkViaPopup",t,function(){return Ru(e,t.providerId).then(function(){return wu(e)})},!1)},t.wc=function(t){return Mu(this,"reauthViaPopup",t,function(){return Tt()},!0)},t.oc=function(t){var e=this;return Lu(this,"linkViaRedirect",t,function(){return Ru(e,t.providerId)},!1)},t.xc=function(t){return Lu(this,"reauthViaRedirect",t,function(){return Tt()},!0)},t.vb=function(t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return Vu(this,this.F().then(function(r){return ra(n.b,{requestUri:t,sessionId:e,idToken:r})}).then(function(t){return r=Du(n,t,"link"),Pu(n,t)}).then(function(){return r}))},t.wb=function(t,e){var n=this;this.c&&(this.c.cancel(),this.c=null);var r=null;return Vu(this,Tt().then(function(){return si(ia(n.b,{requestUri:t,sessionId:e}),n.uid)}).then(function(t){return r=Du(n,t,"reauthenticate"),xu(n,t),n.i=null,n.reload()}).then(function(){return r}),!0)},t.fb=function(t){var e=this,n=null;return Vu(this,this.F().then(function(e){return n=e,"undefined"==typeof t||ot(t)?{}:qr(new Dr(t))}).then(function(t){return e.b.fb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.toJSON=function(){return this.C()},t.C=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.G,appName:this.s,authDomain:this.A,stsTokenManager:this.h.C(),redirectEventId:this.Z||null};return this.metadata&&lt(t,this.metadata.C()),P(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),t};var Fu={name:"redirectUser",B:"session"};function Bu(t){return _s(t.b,Fu,t.a)}function qu(t){this.a=t,this.b=vs(),this.c=null,this.f=function(t){var e=Gu("local"),n=Gu("session"),r=Gu("none");return function(t,e,n){var r=ws(e,n),o=bs(t,e.B);return t.get(e,n).then(function(a){var s=null;try{s=pr(i.localStorage.getItem(r))}catch(t){}if(s&&!a)return i.localStorage.removeItem(r),t.set(e,s,n);s&&a&&"localStorage"!=o.type&&i.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Wu,t.a).then(function(t){return t?Gu(t):e})})})}).then(function(e){return t.c=e,Hu(t,e.B)}).o(function(){t.c||(t.c=e)})}(this),this.b.addListener(Gu("local"),this.a,v(this.g,this))}function Hu(t,e){var n,r=[];for(n in gs)gs[n]!==e&&r.push(_s(t.b,Gu(gs[n]),t.a));return r.push(_s(t.b,Wu,t.a)),function(t){return new gt(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)It(t[s],b(o,s),a);else e(i)})}(r)}qu.prototype.g=function(){var t=this,e=Gu("local");Xu(this,function(){return Tt().then(function(){return t.c&&"local"!=t.c.B?t.b.get(e,t.a):null}).then(function(n){if(n)return Hu(t,"local").then(function(){t.c=e})})})};var Wu={name:"persistence",B:"session"};function Gu(t){return{name:"authUser",B:t}}function Ku(t,e){return Xu(t,function(){return t.b.set(t.c,e.C(),t.a)})}function zu(t){return Xu(t,function(){return _s(t.b,t.c,t.a)})}function Qu(t,e){return Xu(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),Uu(t||{})})})}function Xu(t,e){return t.f=t.f.then(e,e),t.f}function Yu(t){if(this.l=!1,Ir(this,"app",t),!rc(this).options||!rc(this).options.apiKey)throw new Or("invalid-api-key");t=e.SDK_VERSION?rr(e.SDK_VERSION):null,this.b=new jo(rc(this).options&&rc(this).options.apiKey,Va(La),t),this.N=[],this.m=[],this.I=[],this.Ob=e.INTERNAL.createSubscribe(v(this.hc,this)),this.O=void 0,this.Pb=e.INTERNAL.createSubscribe(v(this.ic,this)),ec(this,null),this.h=new qu(rc(this).options.apiKey+":"+rc(this).name),this.G=new function(t){this.a=t,this.b=vs()}(rc(this).options.apiKey+":"+rc(this).name),this.U=sc(this,function(t){var e=rc(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Fu,t.a).then(function(t){return t&&e&&(t.authDomain=e),Uu(t||{})})}(t.G,rc(t).options.authDomain).then(function(e){return(t.A=e)&&(e.da=t.G),Bu(t.G)});return sc(t,e)}(t).then(function(){return Qu(t.h,e)}).then(function(e){return e?(e.da=t.G,t.A&&(t.A.Z||null)==(e.Z||null)?e:e.reload().then(function(){return Ku(t.h,e).then(function(){return e})}).o(function(n){return"auth/network-request-failed"==n.code?e:zu(t.h)})):null}).then(function(e){ec(t,e||null)});return sc(t,n)}(this)),this.i=sc(this,function(t){return t.U.then(function(){return t.ba()}).o(function(){}).then(function(){if(!t.l)return t.ha()}).o(function(){}).then(function(){if(!t.l){t.W=!0;var e=t.h;e.b.addListener(Gu("local"),e.a,t.ha)}})}(this)),this.W=!1,this.ha=v(this.Hc,this),this.Ga=v(this.ka,this),this.qa=v(this.Yb,this),this.ra=v(this.fc,this),this.sa=v(this.gc,this),function(t){var e=rc(t).options.authDomain,n=rc(t).options.apiKey;e&&sr()&&(t.Nb=t.U.then(function(){if(!t.l){if(t.a=Zs(e,n,rc(t).name),t.a.subscribe(t),ic(t)&&_u(ic(t)),t.A){_u(t.A);var r=t.A;r.na(t.aa()),pu(r,t),du(r=t.A,t.D),yu(r,t),t.A=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=v(this.delete,this),this.INTERNAL.logFramework=v(this.pc,this),this.s=0,Ne.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.aa()},set:function(t){this.na(t)},enumerable:!1}),t.V=null}(this),this.D=[]}function Ju(t){se.call(this,"languageCodeChanged"),this.h=t}function Zu(t){se.call(this,"frameworkChanged"),this.f=t}function $u(t){return t.Nb||St(new Or("auth-domain-config-required"))}function tc(t,e){var n={};return n.apiKey=rc(t).options.apiKey,n.authDomain=rc(t).options.authDomain,n.appName=rc(t).name,t.U.then(function(){return function(t,e,n,r){var i=new fu(t,e);return n&&(i.da=n),r&&du(i,r),i.reload().then(function(){return i})}(n,e,t.G,t.Ka())}).then(function(e){return ic(t)&&e.uid==ic(t).uid?(Ou(ic(t),e),t.ka(e)):(ec(t,e),_u(e),t.ka(e))}).then(function(){ac(t)})}function ec(t,e){ic(t)&&(function(t,e){U(t.N,function(t){return t==e})}(ic(t),t.Ga),_e(ic(t),"tokenChanged",t.qa),_e(ic(t),"userDeleted",t.ra),_e(ic(t),"userInvalidated",t.sa),vu(ic(t))),e&&(e.N.push(t.Ga),ve(e,"tokenChanged",t.qa),ve(e,"userDeleted",t.ra),ve(e,"userInvalidated",t.sa),0<t.s&&mu(e)),Ir(t,"currentUser",e),e&&(e.na(t.aa()),pu(e,t),du(e,t.D),yu(e,t))}function nc(t,e){var n=null,r=null;return sc(t,e.then(function(e){return n=ki(e),r=Jr(e),tc(t,e)}).then(function(){return Ar({user:ic(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function rc(t){return t.app}function ic(t){return t.currentUser}function oc(t){return ic(t)&&ic(t)._lat||null}function ac(t){if(t.W){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](oc(t));if(t.O!==t.getUid()&&t.I.length)for(t.O=t.getUid(),e=0;e<t.I.length;e++)t.I[e]&&t.I[e](oc(t))}}function sc(t,e){return t.N.push(e),e.ga(function(){V(t.N,e)}),e}function uc(t,e,n,r,o,a){if(Ir(this,"type","recaptcha"),this.b=this.c=null,this.m=!1,this.l=e,this.a=n||{theme:"light",type:"image"},this.g=[],this.a[hc])throw new Or("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.h="invisible"===this.a[fc],!i.document)throw new Or("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Rn(e)||!this.h&&Rn(e).hasChildNodes())throw new Or("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new jo(t,a||null,o||null),this.s=r||function(){return null};var s=this;this.i=[];var u=this.a[cc];this.a[cc]=function(t){if(pc(s,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=or(u,i);"function"==typeof e&&e(t)}};var c=this.a[lc];this.a[lc]=function(){if(pc(s,null),"function"==typeof c)c();else if("string"==typeof c){var t=or(c,i);"function"==typeof t&&t()}}}qu.prototype.ib=function(t){var e=null,n=this;return function(t){var e=new Or("invalid-persistence-type"),n=new Or("unsupported-persistence-type");t:{for(r in gs)if(gs[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Jn()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!ar()&&"none"!==t)throw n}}(t),Xu(this,function(){return t!=n.c.B?n.b.get(n.c,n.a).then(function(r){return e=r,Hu(n,t)}).then(function(){if(n.c=Gu(t),e)return n.b.set(n.c,e,n.a)}):Tt()})},_(Yu,Ne),_(Ju,se),_(Zu,se),(t=Yu.prototype).ib=function(t){return sc(this,t=this.h.ib(t))},t.na=function(t){this.V===t||this.l||(this.V=t,Wo(this.b,this.V),this.dispatchEvent(new Ju(this.aa())))},t.aa=function(){return this.V},t.Nc=function(){var t=i.navigator;this.na(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.pc=function(t){this.D.push(t),Go(this.b,e.SDK_VERSION?rr(e.SDK_VERSION,this.D):null),this.dispatchEvent(new Zu(this.D))},t.Ka=function(){return B(this.D)},t.toJSON=function(){return{apiKey:rc(this).options.apiKey,authDomain:rc(this).options.authDomain,appName:rc(this).name,currentUser:ic(this)&&ic(this).C()}},t.qb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.fa=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.wa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?v(this.Xb,this):null},t.Xb=function(t,e){var n=this;t={requestUri:t,sessionId:e},this.c&&(this.c.cancel(),this.c=null);var r=null,i=null,o=na(n.b,t).then(function(t){return r=ki(t),i=Jr(t),t});return sc(this,t=n.U.then(function(){return o}).then(function(t){return tc(n,t)}).then(function(){return Ar({user:ic(n),credential:r,additionalUserInfo:i,operationType:"signIn"})}))},t.Fc=function(t){if(!sr())return St(new Or("operation-not-supported-in-this-environment"));var n=this,r=Yr(t.providerId),i=dr(),o=null;(!lr()||Xn())&&rc(this).options.authDomain&&t.isOAuthProvider&&(o=Ja(rc(this).options.authDomain,rc(this).options.apiKey,rc(this).name,"signInViaPopup",t,null,i,e.SDK_VERSION||null));var a=Gn(o,r&&r.Aa,r&&r.za);return sc(this,r=$u(this).then(function(e){return Xs(e,a,"signInViaPopup",t,i,!!o)}).then(function(){return new gt(function(t,e){n.fa("signInViaPopup",null,new Or("cancelled-popup-request"),n.g),n.f=t,n.v=e,n.g=i,n.c=n.a.Da(n,"signInViaPopup",a,i)})}).then(function(t){return a&&Wn(a),t?Ar(t):null}).o(function(t){throw a&&Wn(a),t}))},t.Gc=function(t){if(!sr())return St(new Or("operation-not-supported-in-this-environment"));var e=this;return sc(this,$u(this).then(function(){return Xu(t=e.h,function(){return t.b.set(Wu,t.c.B,t.a)});var t}).then(function(){return e.a.Ba("signInViaRedirect",t)}))},t.ba=function(){if(!sr())return St(new Or("operation-not-supported-in-this-environment"));var t=this;return sc(this,$u(this).then(function(){return t.a.ba()}).then(function(t){return t?Ar(t):null}))},t.kb=function(){var t=this;return sc(this,this.i.then(function(){return ic(t)?(ec(t,null),zu(t.h).then(function(){ac(t)})):Tt()}))},t.Hc=function(){var t=this;return Qu(this.h,rc(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=ic(t)&&e){n=ic(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Ou(ic(t),e),ic(t).F();(ic(t)||e)&&(ec(t,e),e&&(_u(e),e.da=t.G),t.a&&t.a.subscribe(t),ac(t))}})},t.ka=function(t){return Ku(this.h,t)},t.Yb=function(){ac(this),this.ka(ic(this))},t.fc=function(){this.kb()},t.gc=function(){this.kb()},t.hc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(ic(e))})},t.ic=function(t){var e=this;!function(t,e){t.I.push(e),sc(t,t.i.then(function(){!t.l&&j(t.I,e)&&t.O!==t.getUid()&&(t.O=t.getUid(),e(oc(t)))}))}(this,function(){t.next(ic(e))})},t.rc=function(t,n,r){var i=this;return this.W&&e.Promise.resolve().then(function(){f(t)?t(ic(i)):f(t.next)&&t.next(ic(i))}),this.Ob(t,n,r)},t.qc=function(t,n,r){var i=this;return this.W&&e.Promise.resolve().then(function(){i.O=i.getUid(),f(t)?t(ic(i)):f(t.next)&&t.next(ic(i))}),this.Pb(t,n,r)},t.$b=function(t){var e=this;return sc(this,this.i.then(function(){return ic(e)?ic(e).F(t).then(function(t){return{accessToken:t}}):null}))},t.Bc=function(t){return this.Hb(t).then(function(t){return t.user})},t.Hb=function(t){var e=this;return this.i.then(function(){return nc(e,Da(e.b,ka,{token:t}))}).then(function(t){var n=t.user;return ku(n,"isAnonymous",!1),e.ka(n),t})},t.Ib=function(t,e){var n=this;return this.i.then(function(){return nc(n,Da(n.b,Oa,{email:t,password:e}))})},t.Cc=function(t,e){return this.Ib(t,e).then(function(t){return t.user})},t.Sb=function(t,e){return this.sb(t,e).then(function(t){return t.user})},t.sb=function(t,e){var n=this;return this.i.then(function(){return nc(n,Da(n.b,ua,{email:t,password:e}))})},t.Ac=function(t){return this.Oa(t).then(function(t){return t.user})},t.Oa=function(t){var e=this;return this.i.then(function(){return nc(e,t.xa(e.b))})},t.jb=function(){return this.Jb().then(function(t){return t.user})},t.Jb=function(){var t=this;return this.i.then(function(){var e=ic(t);return e&&e.isAnonymous?Ar({user:e,credential:null,additionalUserInfo:Ar({providerId:null,isNewUser:!1}),operationType:"signIn"}):nc(t,t.b.jb()).then(function(e){var n=e.user;return ku(n,"isAnonymous",!0),t.ka(n),e})})},t.getUid=function(){return ic(this)&&ic(this).uid||null},t.Qb=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&ic(this)&&mu(ic(this))},t.yc=function(t){var e=this;P(this.m,function(n){n==t&&e.s--}),0>this.s&&(this.s=0),0==this.s&&ic(this)&&vu(ic(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),sc(this,this.i.then(function(){e.l||j(e.m,t)&&t(oc(e))}))},t.removeAuthTokenListener=function(t){U(this.m,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.N.length;t++)this.N[t].cancel("app-deleted");return this.N=[],this.h&&(t=this.h).b.removeListener(Gu("local"),t.a,this.ha),this.a&&this.a.unsubscribe(this),e.Promise.resolve()},t.Vb=function(t){return sc(this,function(t,e){return Da(t,ca,{identifier:e,continueUri:ur()?Bn():"http://localhost"}).then(function(t){return t.allProviders||[]})}(this.b,t))},t.Wb=function(t){return sc(this,function(t,e){return Da(t,ca,{identifier:e,continueUri:ur()?Bn():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.b,t))},t.jc=function(t){return!!Ti(t)},t.hb=function(t,e){var n=this;return sc(this,Tt().then(function(){var t=new Dr(e);if(!t.c)throw new Or("argument-error",Mr+" must be true when sending sign in link to email");return qr(t)}).then(function(e){return n.b.hb(t,e)}).then(function(){}))},t.Oc=function(t){return this.Ia(t).then(function(t){return t.data.email})},t.Wa=function(t,e){return sc(this,this.b.Wa(t,e).then(function(){}))},t.Ia=function(t){return sc(this,this.b.Ia(t).then(function(t){return new function(t){var e={},n=t.email,r=t.newEmail;if(!(t=t.requestType)||"EMAIL_SIGNIN"!=t&&!n)throw Error("Invalid provider user info!");e.fromEmail=r||null,e.email=n||null,Ir(this,"operation",t),Ir(this,"data",kr(e))}(t)}))},t.Ua=function(t){return sc(this,this.b.Ua(t).then(function(){}))},t.gb=function(t,e){var n=this;return sc(this,Tt().then(function(){return"undefined"==typeof e||ot(e)?{}:qr(new Dr(e))}).then(function(e){return n.b.gb(t,e)}).then(function(){}))},t.Ec=function(t,e){return sc(this,ou(this,t,e,v(this.Oa,this)))},t.Dc=function(t,e){var n=this;return sc(this,Tt().then(function(){var r=Ei(t,e||Bn());return n.Oa(r)}))};var cc="callback",lc="expired-callback",hc="sitekey",fc="size";function pc(t,e){for(var n=0;n<t.i.length;n++)try{t.i[n](e)}catch(t){}}function dc(t,e){return t.g.push(e),e.ga(function(){V(t.g,e)}),e}function yc(t){if(t.m)throw new Or("internal-error","RecaptchaVerifier instance has been destroyed.")}(t=uc.prototype).ya=function(){var t=this;return this.c?this.c:this.c=dc(this,Tt().then(function(){if(ur()&&!Yn())return zn();throw new Or("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return function(t,e){return new gt(function(n,r){mr()?!i.grecaptcha||e!==t.c&&!t.b?(i[t.a]=function(){if(i.grecaptcha){t.c=e;var o=i.grecaptcha.render;i.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},n()}else r(new Or("internal-error"));delete i[t.a]},Tt(No(bn(gc,{onload:t.a,hl:e||""}))).o(function(){r(new Or("internal-error","Unable to load external reCAPTCHA dependencies!"))})):n():r(new Or("network-request-failed"))})}(vc(),t.s())}).then(function(){return Da(t.u,ba,{})}).then(function(e){t.a[hc]=e.recaptchaSiteKey}).o(function(e){throw t.c=null,e}))},t.render=function(){yc(this);var t=this;return dc(this,this.ya().then(function(){if(null===t.b){var e=t.l;if(!t.h){var n=Rn(e);e=function(t,e,n){var r=arguments,i=document,a=String(r[0]),s=r[1];if(!fn&&s&&(s.name||s.type)){if(a=["<",a],s.name&&a.push(' name="',W(s.name),'"'),s.type){a.push(' type="',W(s.type),'"');var u={};lt(u,s),delete u.type,s=u}a.push(">"),a=a.join("")}return a=i.createElement(a),s&&(o(s)?a.className=s:l(s)?a.className=s.join(" "):Dn(a,s)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild(o(n)?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var a=n[i];!h(a)||p(a)&&0<a.nodeType?r(a):P(Mn(a)?B(a):a,r)}}(i,a,r),a}("DIV"),n.appendChild(e)}t.b=grecaptcha.render(e,t.a)}return t.b}))},t.verify=function(){yc(this);var t=this;return dc(this,this.render().then(function(e){return new gt(function(n){var r=grecaptcha.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){U(t.i,function(t){return t==e})}(t,i),n(e))};t.i.push(i),t.h&&grecaptcha.execute(t.b)}})}))},t.reset=function(){yc(this),null!==this.b&&grecaptcha.reset(this.b)},t.clear=function(){yc(this),this.m=!0,vc().b--;for(var t=0;t<this.g.length;t++)this.g[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.h){t=Rn(this.l);for(var e;e=t.firstChild;)t.removeChild(e)}};var gc=gn("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),mc=null;function vc(){return mc||(mc=new function(){this.b=i.grecaptcha?1/0:0,this.c=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}),mc}function bc(t,n,r){try{this.f=r||e.app()}catch(t){throw new Or("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.f.options||!this.f.options.apiKey)throw new Or("invalid-api-key");r=this.f.options.apiKey;var i=this,o=null;try{o=this.f.auth().Ka()}catch(t){}o=e.SDK_VERSION?rr(e.SDK_VERSION,o):null,uc.call(this,r,t,n,function(){try{var t=i.f.auth().aa()}catch(e){t=null}return t},o,Va(La))}function wc(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new Or("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=_c.length)throw new Or("internal-error","Argument validator received an unsupported number of arguments.");n=_c[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new Or("argument-error",t+" failed: "+r)}_(bc,uc);var _c="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Ec(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:o}}function Tc(){return{name:"opt_forceRefresh",K:"a boolean",optional:!0,M:a}}function Sc(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:p}}function Ic(t,e){return{name:t||"",K:"a function",optional:!!e,M:f}}function Cc(t,e){return{name:t||"",K:"null",optional:!!e,M:c}}function Ac(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.xa||t&&e.providerId!==t)}}}function kc(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&o(t.type)&&f(t.verify))}}}function Oc(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Nc(t,e){for(var n in e){var r=e[n].name;t[r]=Rc(r,t[n],e[n].j)}}function xc(t,e,n,r){t[e]=Rc(e,n,r)}function Rc(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return wc(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Nc(Yu.prototype,{Ua:{name:"applyActionCode",j:[Ec("code")]},Ia:{name:"checkActionCode",j:[Ec("code")]},Wa:{name:"confirmPasswordReset",j:[Ec("code"),Ec("newPassword")]},Sb:{name:"createUserWithEmailAndPassword",j:[Ec("email"),Ec("password")]},sb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[Ec("email"),Ec("password")]},Vb:{name:"fetchProvidersForEmail",j:[Ec("email")]},Wb:{name:"fetchSignInMethodsForEmail",j:[Ec("email")]},ba:{name:"getRedirectResult",j:[]},jc:{name:"isSignInWithEmailLink",j:[Ec("emailLink")]},qc:{name:"onAuthStateChanged",j:[Oc(Sc(),Ic(),"nextOrObserver"),Ic("opt_error",!0),Ic("opt_completed",!0)]},rc:{name:"onIdTokenChanged",j:[Oc(Sc(),Ic(),"nextOrObserver"),Ic("opt_error",!0),Ic("opt_completed",!0)]},gb:{name:"sendPasswordResetEmail",j:[Ec("email"),Oc(Sc("opt_actionCodeSettings",!0),Cc(null,!0),"opt_actionCodeSettings",!0)]},hb:{name:"sendSignInLinkToEmail",j:[Ec("email"),Sc("actionCodeSettings")]},ib:{name:"setPersistence",j:[Ec("persistence")]},Oa:{name:"signInAndRetrieveDataWithCredential",j:[Ac()]},jb:{name:"signInAnonymously",j:[]},Jb:{name:"signInAnonymouslyAndRetrieveData",j:[]},Ac:{name:"signInWithCredential",j:[Ac()]},Bc:{name:"signInWithCustomToken",j:[Ec("token")]},Hb:{name:"signInAndRetrieveDataWithCustomToken",j:[Ec("token")]},Cc:{name:"signInWithEmailAndPassword",j:[Ec("email"),Ec("password")]},Dc:{name:"signInWithEmailLink",j:[Ec("email"),Ec("emailLink",!0)]},Ib:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[Ec("email"),Ec("password")]},Ec:{name:"signInWithPhoneNumber",j:[Ec("phoneNumber"),kc()]},Fc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Gc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},kb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Ec(null,!0)]},Nc:{name:"useDeviceLanguage",j:[]},Oc:{name:"verifyPasswordResetCode",j:[Ec("code")]}}),function(t,e){for(var n in e){var r=e[n].name;if(r!==n){var i=e[n].Rb;Object.defineProperty(t,r,{get:function(){return this[n]},set:function(t){wc(r,[i],[t],!0),this[n]=t},enumerable:!0})}}}(Yu.prototype,{lc:{name:"languageCode",Rb:Oc(Ec(),Cc(),"languageCode")}}),(Yu.Persistence=gs).LOCAL="local",Yu.Persistence.SESSION="session",Yu.Persistence.NONE="none",Nc(fu.prototype,{delete:{name:"delete",j:[]},F:{name:"getIdToken",j:[Tc()]},getToken:{name:"getToken",j:[Tc()]},$a:{name:"linkAndRetrieveDataWithCredential",j:[Ac()]},kc:{name:"linkWithCredential",j:[Ac()]},mc:{name:"linkWithPhoneNumber",j:[Ec("phoneNumber"),kc()]},nc:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},oc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},bb:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Ac()]},uc:{name:"reauthenticateWithCredential",j:[Ac()]},vc:{name:"reauthenticateWithPhoneNumber",j:[Ec("phoneNumber"),kc()]},wc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},xc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},fb:{name:"sendEmailVerification",j:[Oc(Sc("opt_actionCodeSettings",!0),Cc(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Ec(null,!0)]},Lc:{name:"unlink",j:[Ec("provider")]},mb:{name:"updateEmail",j:[Ec("email")]},nb:{name:"updatePassword",j:[Ec("password")]},Mc:{name:"updatePhoneNumber",j:[Ac("phone")]},ob:{name:"updateProfile",j:[Sc("profile")]}}),Nc(gt.prototype,{ga:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Nc(iu.prototype,{confirm:{name:"confirm",j:[Ec("verificationCode")]}}),xc(_i,"credential",function(t,e){return new wi(t,e)},[Ec("email"),Ec("password")]),Nc(fi.prototype,{ta:{name:"addScope",j:[Ec("scope")]},Ca:{name:"setCustomParameters",j:[Sc("customOAuthParameters")]}}),xc(fi,"credential",pi,[Oc(Ec(),Sc(),"token")]),xc(_i,"credentialWithLink",Ei,[Ec("email"),Ec("emailLink")]),Nc(di.prototype,{ta:{name:"addScope",j:[Ec("scope")]},Ca:{name:"setCustomParameters",j:[Sc("customOAuthParameters")]}}),xc(di,"credential",yi,[Oc(Ec(),Sc(),"token")]),Nc(gi.prototype,{ta:{name:"addScope",j:[Ec("scope")]},Ca:{name:"setCustomParameters",j:[Sc("customOAuthParameters")]}}),xc(gi,"credential",mi,[Oc(Ec(),Oc(Sc(),Cc()),"idToken"),Oc(Ec(),Cc(),"accessToken",!0)]),Nc(vi.prototype,{Ca:{name:"setCustomParameters",j:[Sc("customOAuthParameters")]}}),xc(vi,"credential",bi,[Oc(Ec(),Sc(),"token"),Ec("secret",!0)]),Nc(hi.prototype,{ta:{name:"addScope",j:[Ec("scope")]},credential:{name:"credential",j:[Oc(Ec(),Cc(),"idToken",!0),Oc(Ec(),Cc(),"accessToken",!0)]},Ca:{name:"setCustomParameters",j:[Sc("customOAuthParameters")]}}),xc(Ci,"credential",Ai,[Ec("verificationId"),Ec("verificationCode")]),Nc(Ci.prototype,{Sa:{name:"verifyPhoneNumber",j:[Ec("phoneNumber"),kc()]}}),Nc(Or.prototype,{toJSON:{name:"toJSON",j:[Ec(null,!0)]}}),Nc(Mi.prototype,{toJSON:{name:"toJSON",j:[Ec(null,!0)]}}),Nc(Pi.prototype,{toJSON:{name:"toJSON",j:[Ec(null,!0)]}}),Nc(bc.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if("undefined"==typeof e||!e.INTERNAL||!e.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:Yu,Error:Or};xc(t,"EmailAuthProvider",_i,[]),xc(t,"FacebookAuthProvider",fi,[]),xc(t,"GithubAuthProvider",di,[]),xc(t,"GoogleAuthProvider",gi,[]),xc(t,"TwitterAuthProvider",vi,[]),xc(t,"OAuthProvider",hi,[Ec("providerId")]),xc(t,"PhoneAuthProvider",Ci,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Yu)}}]),xc(t,"RecaptchaVerifier",bc,[Oc(Ec(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Sc("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof e.app.App)}}]),e.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:v((t=new Yu(t)).getUid,t),getToken:v(t.$b,t),addAuthTokenListener:v(t.Qb,t),removeAuthTokenListener:v(t.yc,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(t){}}),e.INTERNAL.extendNamespace({User:fu})}()}).call("undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(e,n("DuR2"))},VwZZ:function(t,e,n){"use strict";var r,i=n("BX3T"),o=n("dgOU"),a=n("/iUD"),s={e:{}};function u(){try{return r.apply(this,arguments)}catch(t){return s.e=t,s}}function c(t){return r=t,u}var l=n("TToO"),h=function(t){function e(e){t.call(this),this.errors=e;var n=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return Object(l.__extends)(e,t),e}(Error);n.d(e,"a",function(){return f});var f=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,u=this._unsubscribe,l=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,d=r?r.length:0;n;)n.remove(this),n=++f<d&&r[f]||null;if(Object(a.a)(u)&&c(u).call(this)===s&&(e=!0,t=t||(s.e instanceof h?p(s.e.errors):[s.e])),Object(i.a)(l))for(f=-1,d=l.length;++f<d;){var y=l[f];if(Object(o.a)(y)&&c(y.unsubscribe).call(y)===s){e=!0,t=t||[];var g=s.e;g instanceof h?t=t.concat(p(g.errors)):t.push(g)}}if(e)throw new h(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function p(t){return t.reduce(function(t,e){return t.concat(e instanceof h?e.errors:e)},[])}},WT6e:function(t,e,n){"use strict";(function(t){n.d(e,"g",function(){return $t}),n.d(e,"Q",function(){return Kt}),n.d(e,"S",function(){return zt}),n.d(e,"P",function(){return Xt}),n.d(e,"w",function(){return Qt}),n.d(e,"c",function(){return ot}),n.d(e,"A",function(){return ut}),n.d(e,"z",function(){return ct}),n.d(e,"b",function(){return lt}),n.d(e,"d",function(){return rt}),n.d(e,"e",function(){return it}),n.d(e,"R",function(){return be}),n.d(e,"K",function(){return Vt}),n.d(e,"U",function(){return Ft}),n.d(e,"s",function(){return qe}),n.d(e,"f",function(){return Ke}),n.d(e,"m",function(){return Nt}),n.d(e,"l",function(){return tt}),n.d(e,"E",function(){return Qe}),n.d(e,"F",function(){return ze}),n.d(e,"a",function(){return f}),n.d(e,"N",function(){return p}),n.d(e,"L",function(){return d}),n.d(e,"p",function(){return P}),n.d(e,"o",function(){return c}),n.d(e,"n",function(){return g}),n.d(e,"y",function(){return m}),n.d(e,"G",function(){return b}),n.d(e,"x",function(){return xt}),n.d(e,"B",function(){return re}),n.d(e,"C",function(){return ee}),n.d(e,"D",function(){return ne}),n.d(e,"i",function(){return pt}),n.d(e,"j",function(){return _t}),n.d(e,"k",function(){return ie}),n.d(e,"t",function(){return It}),n.d(e,"v",function(){return St}),n.d(e,"u",function(){return oe}),n.d(e,"H",function(){return ce}),n.d(e,"I",function(){return se}),n.d(e,"J",function(){return he}),n.d(e,"M",function(){return fe}),n.d(e,"h",function(){return pe}),n.d(e,"q",function(){return Le}),n.d(e,"r",function(){return je}),n.d(e,"O",function(){return Ee}),n.d(e,"T",function(){return Be}),n.d(e,"_5",function(){return Se}),n.d(e,"W",function(){return ht}),n.d(e,"V",function(){return Et}),n.d(e,"_3",function(){return E}),n.d(e,"_15",function(){return k}),n.d(e,"_6",function(){return nt}),n.d(e,"_7",function(){return et}),n.d(e,"X",function(){return Un}),n.d(e,"Y",function(){return ir}),n.d(e,"Z",function(){return ro}),n.d(e,"_0",function(){return pn}),n.d(e,"_1",function(){return Ar}),n.d(e,"_2",function(){return Fn}),n.d(e,"_8",function(){return Xn}),n.d(e,"_9",function(){return Qn}),n.d(e,"_11",function(){return yr}),n.d(e,"_13",function(){return kr}),n.d(e,"_16",function(){return Qr}),n.d(e,"_17",function(){return ln}),n.d(e,"_18",function(){return Jr}),n.d(e,"_10",function(){return He}),n.d(e,"_12",function(){return We}),n.d(e,"_14",function(){return Ge}),n.d(e,"_4",function(){return at});var r=n("TToO"),i=n("YaPU"),o=n("/nXB"),a=n("Rf9G"),s=n("g5jc"),u=n("VwZZ"),c=function(){function t(t){this._desc=t,this.ngMetadataName="InjectionToken"}return t.prototype.toString=function(){return"InjectionToken "+this._desc},t}(),l="__paramaters__";function h(t,e,n){var r=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t){var r=t.apply(void 0,e);for(var i in r)this[i]=r[i]}}}(e);function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this instanceof i)return r.apply(this,t),this;var n,o=new((n=i).bind.apply(n,[void 0].concat(t)));return a.annotation=o,a;function a(t,e,n){for(var r=t.hasOwnProperty(l)?t[l]:Object.defineProperty(t,l,{value:[]})[l];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}var f=new c("AnalyzeForEntryComponents"),p=function(){var t={Emulated:0,Native:1,None:2};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t}(),d=function(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")},y=new d("5.2.9"),g=h("Inject",function(t){return{token:t}}),m=h("Optional"),v=h("Self"),b=h("SkipSelf"),w="undefined"!=typeof window&&window,_="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,E=w||"undefined"!=typeof t&&t||_,T=Promise.resolve(0),S=null;function I(){if(!S){var t=E.Symbol;if(t&&t.iterator)S=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(S=r)}}return S}function C(t){"undefined"==typeof Zone?T.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function A(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function k(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(k).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function O(t){return t.__forward_ref__=O,t.toString=function(){return k(this())},t}function N(t){return"function"==typeof t&&t.hasOwnProperty("__forward_ref__")&&t.__forward_ref__===O?t():t}var x="__source",R=new Object,D=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=R),e===R)throw new Error("NullInjectorError: No provider for "+k(t)+"!");return e},t}(),P=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?new W(t,e):new W(t.providers,t.parent,t.name||null)},t.THROW_IF_NOT_FOUND=R,t.NULL=new D,t}(),M=function(t){return t},L=[],j=M,V=function(){return Array.prototype.slice.call(arguments)},U={},F=function(t){for(var e in t)if(t[e]===U)return e;throw Error("!prop")}({provide:String,useValue:U}),B=P.NULL,q=/\n/gm,H="\u0275",W=function(){function t(t,e,n){void 0===e&&(e=B),void 0===n&&(n=null),this.parent=e,this.source=n;var r=this._records=new Map;r.set(P,{token:P,fn:M,deps:L,value:this,useNew:!1}),function t(e,n){if(n)if((n=N(n))instanceof Array)for(var r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw z("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw z("Unexpected provider",n);var i=N(n.provide),o=function(t){var e=function(t){var e=L,n=t.deps;if(n&&n.length){e=[];for(var r=0;r<n.length;r++){var i=6;if((u=N(n[r]))instanceof Array)for(var o=0,a=u;o<a.length;o++){var s=a[o];s instanceof m||s==m?i|=1:s instanceof b||s==b?i&=-3:s instanceof v||s==v?i&=-5:u=s instanceof g?s.token:N(s)}e.push({token:u,options:i})}}else if(t.useExisting){var u;e=[{token:u=N(t.useExisting),options:6}]}else if(!(n||F in t))throw z("'deps' required",t);return e}(t),n=M,r=L,i=!1,o=N(t.provide);if(F in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=N(t.useClass);else{if("function"!=typeof o)throw z("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);i=!0,n=o}return{deps:e,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var a=e.get(i);if(a){if(a.fn!==V)throw G(i)}else e.set(i,a={token:n.provide,deps:[],useNew:!1,fn:V,value:L});a.deps.push({token:i=n,options:6})}var s=e.get(i);if(s&&s.fn==V)throw G(i);e.set(i,o)}}(r,t)}return t.prototype.get=function(t,e){var n=this._records.get(t);try{return function t(e,n,r,i,o){try{return function(e,n,r,i,o){var a,s;if(n){if((a=n.value)==j)throw Error(H+"Circular dependency");if(a===L){n.value=j;var u=n.useNew,c=n.fn,l=n.deps,h=L;if(l.length){h=[];for(var f=0;f<l.length;f++){var p=l[f],d=p.options,y=2&d?r.get(p.token):void 0;h.push(t(p.token,y,r,y||4&d?i:B,1&d?null:P.THROW_IF_NOT_FOUND))}}n.value=a=u?new((s=c).bind.apply(s,[void 0].concat(h))):c.apply(void 0,h)}}else a=i.get(e,o);return a}(e,n,r,i,o)}catch(t){throw t instanceof Error||(t=new Error(t)),(t.ngTempTokenPath=t.ngTempTokenPath||[]).unshift(e),n&&n.value==j&&(n.value=L),t}}(t,n,this._records,this.parent,e)}catch(e){var r=e.ngTempTokenPath;throw t[x]&&r.unshift(t[x]),e.message=K("\n"+e.message,r,this.source),e.ngTokenPath=r,e.ngTempTokenPath=null,e}},t.prototype.toString=function(){var t=[];return this._records.forEach(function(e,n){return t.push(k(n))}),"StaticInjector["+t.join(", ")+"]"},t}();function G(t){return z("Cannot mix multi providers and regular providers",t)}function K(t,e,n){void 0===n&&(n=null),t=t&&"\n"===t.charAt(0)&&t.charAt(1)==H?t.substr(2):t;var r=k(e);if(e instanceof Array)r=e.map(k).join(" -> ");else if("object"==typeof e){var i=[];for(var o in e)if(e.hasOwnProperty(o)){var a=e[o];i.push(o+":"+("string"==typeof a?JSON.stringify(a):k(a)))}r="{"+i.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+r+"]: "+t.replace(q,"\n  ")}function z(t,e){return new Error(K(t,e))}var Q="ngDebugContext",X="ngOriginalError",Y="ngErrorLogger";function J(t){return t[Q]}function Z(t){return t[X]}function $(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.error.apply(t,e)}var tt=function(){function t(){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[Y]||$}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)},t.prototype._findContext=function(t){return t?J(t)?J(t):this._findContext(Z(t)):null},t.prototype._findOriginalError=function(t){for(var e=Z(t);e&&Z(e);)e=Z(e);return e},t}();function et(t){return!!t&&"function"==typeof t.then}function nt(t){return!!t&&"function"==typeof t.subscribe}Function;var rt=new c("Application Initializer"),it=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();et(i)&&e.push(i)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}},t}(),ot=new c("AppId");function at(){return""+st()+st()+st()}function st(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var ut=new c("Platform Initializer"),ct=new c("Platform ID"),lt=new c("appBootstrapListener"),ht=function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t.ctorParameters=function(){return[]},t}();function ft(){throw new Error("Runtime compiler is not loaded")}var pt=function(){function t(){}return t.prototype.compileModuleSync=function(t){throw ft()},t.prototype.compileModuleAsync=function(t){throw ft()},t.prototype.compileModuleAndAllComponentsSync=function(t){throw ft()},t.prototype.compileModuleAndAllComponentsAsync=function(t){throw ft()},t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t}(),dt=function(){},yt=function(){};function gt(t){var e=Error("No component factory found for "+k(t)+". Did you add it to @NgModule.entryComponents?");return e[bt]=t,e}var mt,vt,bt="ngComponent",wt=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw gt(t)},t}(),_t=function(){function t(){}return t.NULL=new wt,t}(),Et=function(){function t(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(var r=0;r<t.length;r++){var i=t[r];this._factories.set(i.componentType,i)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw gt(t);return new Tt(e,this._ngModule)},t}(),Tt=function(t){function e(e,n){var r=t.call(this)||this;return r.factory=e,r.ngModule=n,r.selector=e.selector,r.componentType=e.componentType,r.ngContentSelectors=e.ngContentSelectors,r.inputs=e.inputs,r.outputs=e.outputs,r}return Object(r.__extends)(e,t),e.prototype.create=function(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)},e}(yt),St=function(){},It=function(){},Ct=function(){var t=E.wtf;return!(!t||!(mt=t.trace)||(vt=mt.events,0))}();function At(t,e){return null}var kt=Ct?function(t,e){return void 0===e&&(e=null),vt.createScope(t,e)}:function(t,e){return At},Ot=Ct?function(t,e){return mt.leaveScope(t,e),e}:function(t,e){return e},Nt=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.__isAsync=e,n}return Object(r.__extends)(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,r){var i,o=function(t){return null},a=function(){return null};e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(a=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(o=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),r&&(a=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var s=t.prototype.subscribe.call(this,i,o,a);return e instanceof u.a&&e.add(s),s},e}(s.a),xt=function(){function t(t){var e,n=t.enableLongStackTrace,r=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Nt(!1),this.onMicrotaskEmpty=new Nt(!1),this.onStable=new Nt(!1),this.onError=new Nt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,n,r,i,o,a){try{return Mt(e),t.invokeTask(r,i,o,a)}finally{Lt(e)}},onInvoke:function(t,n,r,i,o,a,s){try{return Mt(e),t.invoke(r,i,o,a,s)}finally{Lt(e)}},onHasTask:function(t,n,r,i){t.hasTask(r,i),n===r&&("microTask"==i.change?(e.hasPendingMicrotasks=i.microTask,Pt(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,n,r,i){return t.handleError(r,i),e.runOutsideAngular(function(){return e.onError.emit(i)}),!1}})}return t.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},t.prototype.run=function(t,e,n){return this._inner.run(t,e,n)},t.prototype.runTask=function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Dt,Rt,Rt);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}},t.prototype.runGuarded=function(t,e,n){return this._inner.runGuarded(t,e,n)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}();function Rt(){}var Dt={};function Pt(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function Mt(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Lt(t){t._nesting--,Pt(t)}var jt=function(){function t(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Nt,this.onMicrotaskEmpty=new Nt,this.onStable=new Nt,this.onError=new Nt}return t.prototype.run=function(t){return t()},t.prototype.runGuarded=function(t){return t()},t.prototype.runOutsideAngular=function(t){return t()},t.prototype.runTask=function(t){return t()},t}(),Vt=function(){function t(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents()}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){xt.assertNotInAngularZone(),C(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0==this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;this.isStable()?C(function(){for(;0!==t._callbacks.length;)t._callbacks.pop()(t._didWork);t._didWork=!1}):this._didWork=!0},t.prototype.whenStable=function(t){this._callbacks.push(t),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findProviders=function(t,e,n){return[]},t}(),Ut=function(){function t(){this._applications=new Map,qt.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.unregisterApplication=function(t){this._applications.delete(t)},t.prototype.unregisterAllApplications=function(){this._applications.clear()},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),qt.findTestabilityInTree(this,t,e)},t.ctorParameters=function(){return[]},t}();function Ft(t){qt=t}var Bt,qt=new(function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}()),Ht=!0,Wt=!1,Gt=new c("AllowMultipleToken");function Kt(){if(Wt)throw new Error("Cannot enable prod mode after platform setup.");Ht=!1}function zt(){return Wt=!0,Ht}var Qt=function(t,e){this.name=t,this.token=e};function Xt(t,e,n){void 0===n&&(n=[]);var r="Platform: "+e,i=new c(r);return function(e){void 0===e&&(e=[]);var o=Yt();if(!o||o.injector.get(Gt,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var a=n.concat(e).concat({provide:i,useValue:!0});!function(t){if(Bt&&!Bt.destroyed&&!Bt.injector.get(Gt,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Bt=t.get(Jt);var e=t.get(ut,null);e&&e.forEach(function(t){return t()})}(P.create({providers:a,name:r}))}return function(t){var e=Yt();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Yt(){return Bt&&!Bt.destroyed?Bt:null}var Jt=function(){function t(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return t.prototype.bootstrapModuleFactory=function(t,e){var n,r=this,i="noop"===(n=e?e.ngZone:void 0)?new jt:("zone.js"===n?void 0:n)||new xt({enableLongStackTrace:zt()}),o=[{provide:xt,useValue:i}];return i.run(function(){var e=P.create({providers:o,parent:r.injector,name:t.moduleType.name}),n=t.create(e),a=n.injector.get(tt,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return te(r._modules,n)}),i.runOutsideAngular(function(){return i.onError.subscribe({next:function(t){a.handleError(t)}})}),function(t,e,i){try{var o=((a=n.injector.get(it)).runInitializers(),a.donePromise.then(function(){return r._moduleDoBootstrap(n),n}));return et(o)?o.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):o}catch(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}var a}(a,i)})},t.prototype.bootstrapModule=function(t,e){var n=this;void 0===e&&(e=[]);var r=this.injector.get(dt),i=Zt({},e);return r.createCompiler([i]).compileModuleAsync(t).then(function(t){return n.bootstrapModuleFactory(t,i)})},t.prototype._moduleDoBootstrap=function(t){var e=t.injector.get($t);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module "+k(t.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(t.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t}();function Zt(t,e){return Array.isArray(e)?e.reduce(Zt,t):Object(r.__assign)({},t,e)}var $t=function(){function t(t,e,n,r,s,u){var c=this;this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=zt(),this._zone.onMicrotaskEmpty.subscribe({next:function(){c._zone.run(function(){c.tick()})}});var l=new i.a(function(t){c._stable=c._zone.isStable&&!c._zone.hasPendingMacrotasks&&!c._zone.hasPendingMicrotasks,c._zone.runOutsideAngular(function(){t.next(c._stable),t.complete()})}),h=new i.a(function(t){var e;c._zone.runOutsideAngular(function(){e=c._zone.onStable.subscribe(function(){xt.assertNotInAngularZone(),C(function(){c._stable||c._zone.hasPendingMacrotasks||c._zone.hasPendingMicrotasks||(c._stable=!0,t.next(!0))})})});var n=c._zone.onUnstable.subscribe(function(){xt.assertInAngularZone(),c._stable&&(c._stable=!1,c._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(o.a)(l,a.a.call(h))}return t.prototype.bootstrap=function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof yt?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n instanceof Tt?null:this._injector.get(St),o=n.create(P.NULL,[],e||n.selector,i);o.onDestroy(function(){r._unloadComponent(o)});var a=o.injector.get(Vt,null);return a&&o.injector.get(Ut).registerApplication(o.location.nativeElement,a),this._loadComponent(o),zt()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o},t.prototype.tick=function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=t._tickScope();try{this._runningTick=!0,this._views.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(t){return t.checkNoChanges()})}catch(t){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(t)})}finally{this._runningTick=!1,Ot(n)}},t.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},t.prototype.detachView=function(t){var e=t;te(this._views,e),e.detachFromAppRef()},t.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(lt,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},t.prototype._unloadComponent=function(t){this.detachView(t.hostView),te(this.components,t)},t.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(t.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),t._tickScope=kt("ApplicationRef#tick()"),t}();function te(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var ee=function(){},ne=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}(),re=function(){},ie=function(t){this.nativeElement=t},oe=function(){},ae=function(){function t(){this.dirty=!0,this._results=[],this.changes=new Nt,this.length=0}return t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[I()]=function(){return this._results[I()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=function t(e){return e.reduce(function(e,n){var r=Array.isArray(n)?t(n):n;return e.concat(r)},[])}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}(),se=function(){},ue={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},ce=function(){function t(t,e){this._compiler=t,this._config=e||ue}return t.prototype.load=function(t){return this._compiler instanceof pt?this.loadFactory(t):this.loadAndCompile(t)},t.prototype.loadAndCompile=function(t){var e=this,r=t.split("#"),i=r[0],o=r[1];return void 0===o&&(o="default"),n("Jnfr")(i).then(function(t){return t[o]}).then(function(t){return le(t,i,o)}).then(function(t){return e._compiler.compileModuleAsync(t)})},t.prototype.loadFactory=function(t){var e=t.split("#"),r=e[0],i=e[1],o="NgFactory";return void 0===i&&(i="default",o=""),n("Jnfr")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(function(t){return t[i+o]}).then(function(t){return le(t,r,i)})},t}();function le(t,e,n){if(!t)throw new Error("Cannot find '"+n+"' in '"+e+"'");return t}var he=function(){},fe=function(){},pe=function(){},de=function(){function t(t,e,n){this._debugContext=n,this.nativeNode=t,e&&e instanceof ye?e.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(t.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),t}(),ye=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=e,i}return Object(r.__extends)(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n,r=this,i=this.childNodes.indexOf(t);-1!==i&&((n=this.childNodes).splice.apply(n,[i+1,0].concat(e)),e.forEach(function(t){t.parent&&t.parent.removeChild(t),t.parent=r}))},e.prototype.insertBefore=function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return ge(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return me(this,t,e),e},Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(de);function ge(t,e,n){t.childNodes.forEach(function(t){t instanceof ye&&(e(t)&&n.push(t),ge(t,e,n))})}function me(t,e,n){t instanceof ye&&t.childNodes.forEach(function(t){e(t)&&n.push(t),t instanceof ye&&me(t,e,n)})}var ve=new Map;function be(t){return ve.get(t)||null}function we(t){ve.set(t.nativeNode,t)}function _e(t,e){var n=Se(t),r=Se(e);return n&&r?function(t,e,n){for(var r=t[I()](),i=e[I()]();;){var o=r.next(),a=i.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(t,e,_e):!(n||!t||"object"!=typeof t&&"function"!=typeof t||r||!e||"object"!=typeof e&&"function"!=typeof e)||A(t,e)}var Ee=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t.unwrap=function(e){return t.isWrapped(e)?e.wrapped:e},t.isWrapped=function(e){return e instanceof t},t}(),Te=function(){function t(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}return t.prototype.isFirstChange=function(){return this.firstChange},t}();function Se(t){return!!Ie(t)&&(Array.isArray(t)||!(t instanceof Map)&&I()in t)}function Ie(t){return null!==t&&("function"==typeof t||"object"==typeof t)}var Ce=function(){function t(){}return t.prototype.supports=function(t){return Se(t)},t.prototype.create=function(t){return new ke(t)},t}(),Ae=function(t,e){return e},ke=function(){function t(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ae}return t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<Re(n,r,i)?e:n,a=Re(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,c=s-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[o.previousIndex]=c-u}}a!==s&&t(o,a,s)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!Se(t))throw new Error("Error trying to diff '"+k(t)+"'. Only arrays and iterables are allowed");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)i=this._trackByFn(s,r=t[s]),null!==o&&A(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),A(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r=t[I()](),i=void 0;!(i=r.next()).done;)e(i.value)}(t,function(t){i=e._trackByFn(n,t),null!==o&&A(o.trackById,i)?(a&&(o=e._verifyReinsertion(o,t,i,n)),A(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),a=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=t,this.isDirty},Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(A(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(A(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Oe(e,n),i,r),t},t.prototype._verifyReinsertion=function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new xe),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xe),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t},t}(),Oe=function(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Ne=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&A(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),xe=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,n=this.map.get(e);n||(n=new Ne,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){var n=this.map.get(t);return n?n.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t}();function Re(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var De=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||Ie(t)},t.prototype.create=function(){return new Pe},t}(),Pe=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||Ie(t)))throw new Error("Error trying to diff '"+k(t)+"'. Only maps and objects are allowed")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new Me(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){A(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})},t}(),Me=function(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Le=function(){function t(t){this.factories=t}return t.create=function(e,n){if(null!=n){var r=n.factories.slice();return new t(e=e.concat(r))}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new b,new m]]}},t.prototype.find=function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'")},t}(),je=function(){function t(t){this.factories=t}return t.create=function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new b,new m]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '"+t+"'")},t}(),Ve=[new De],Ue=new Le([new Ce]),Fe=new je(Ve),Be=Xt(null,"core",[{provide:ct,useValue:"unknown"},{provide:Jt,deps:[P]},{provide:Ut,deps:[]},{provide:ht,deps:[]}]),qe=new c("LocaleId");function He(){return Ue}function We(){return Fe}function Ge(t){return t||"en-US"}var Ke=function(t){},ze=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}(),Qe=function(){};function Xe(t,e,n){var r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function Ye(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Je(t,e){return t.nodes[e]}function Ze(t,e){return t.nodes[e]}function $e(t,e){return t.nodes[e]}function tn(t,e){return t.nodes[e]}function en(t,e){return t.nodes[e]}var nn={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function rn(t,e,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+e+"'. Current value: '"+n+"'.";return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return on(n,e),n}(i,t)}function on(t,e){t[Q]=e,t[Y]=e.logError.bind(e)}function an(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}var sn=function(){},un=new Map;function cn(t){var e=un.get(t);return e||(e=k(t)+"_"+un.size,un.set(t,e)),e}function ln(t,e,n,r){if(Ee.isWrapped(r)){r=Ee.unwrap(r);var i=t.def.nodes[e].bindingIndex+n,o=Ee.unwrap(t.oldValues[i]);t.oldValues[i]=new Ee(o)}return r}var hn="$$undefined",fn="$$empty";function pn(t){return{id:hn,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var dn=0;function yn(t,e,n,r){return!(!(2&t.state)&&A(t.oldValues[e.bindingIndex+n],r))}function gn(t,e,n,r){return!!yn(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function mn(t,e,n,r){var i=t.oldValues[e.bindingIndex+n];if(1&t.state||!_e(i,r)){var o=e.bindings[n].name;throw rn(nn.createDebugContext(t,e.nodeIndex),o+": "+i,o+": "+r,0!=(1&t.state))}}function vn(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function bn(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function wn(t,e,n,r){try{return vn(33554432&t.def.nodes[e].flags?Ze(t,e).componentView:t),nn.handleEvent(t,e,n,r)}catch(e){t.root.errorHandler.handleError(e)}}function _n(t){return t.parent?Ze(t.parent,t.parentNodeDef.nodeIndex):null}function En(t){return t.parent?t.parentNodeDef.parent:null}function Tn(t,e){switch(201347067&e.flags){case 1:return Ze(t,e.nodeIndex).renderElement;case 2:return Je(t,e.nodeIndex).renderText}}function Sn(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function In(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function Cn(t){var e={},n=0,r={};return t&&t.forEach(function(t){var i=t[0],o=t[1];"number"==typeof i?(e[i]=o,n|=function(t){return 1<<t%32}(i)):r[i]=o}),{matchedQueries:e,references:r,matchedQueryIds:n}}function An(t,e){return t.map(function(t){var n,r;return Array.isArray(t)?(r=t[0],n=t[1]):(r=0,n=t),n&&("function"==typeof n||"object"==typeof n)&&e&&Object.defineProperty(n,x,{value:e,configurable:!0}),{flags:r,token:n,tokenKey:cn(n)}})}function kn(t,e,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===p.Native?Ze(t,n.renderParent.nodeIndex).renderElement:void 0:e}var On=new WeakMap;function Nn(t){var e=On.get(t);return e||((e=t(function(){return sn})).factory=t,On.set(t,e)),e}function xn(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(Tn(t,t.def.lastRenderRootNode))),Rn(t,e,0,t.def.nodes.length-1,n,r,i)}function Rn(t,e,n,r,i,o,a){for(var s=n;s<=r;s++){var u=t.def.nodes[s];11&u.flags&&Pn(t,u,e,i,o,a),s+=u.childCount}}function Dn(t,e,n,r,i,o){for(var a=t;a&&!Sn(a);)a=a.parent;for(var s=a.parent,u=En(a),c=u.nodeIndex+u.childCount,l=u.nodeIndex+1;l<=c;l++){var h=s.def.nodes[l];h.ngContentIndex===e&&Pn(s,h,n,r,i,o),l+=h.childCount}if(!s.parent){var f=t.root.projectableNodes[e];if(f)for(l=0;l<f.length;l++)Mn(t,f[l],n,r,i,o)}}function Pn(t,e,n,r,i,o){if(8&e.flags)Dn(t,e.ngContent.index,n,r,i,o);else{var a=Tn(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&Mn(t,a,n,r,i,o),32&e.bindingFlags&&Mn(Ze(t,e.nodeIndex).componentView,a,n,r,i,o)):Mn(t,a,n,r,i,o),16777216&e.flags)for(var s=Ze(t,e.nodeIndex).viewContainer._embeddedViews,u=0;u<s.length;u++)xn(s[u],n,r,i,o);1&e.flags&&!e.element.name&&Rn(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,o)}}function Mn(t,e,n,r,i,o){var a=t.renderer;switch(n){case 1:a.appendChild(r,e);break;case 2:a.insertBefore(r,e,i);break;case 3:a.removeChild(r,e);break;case 0:o.push(e)}}var Ln=/^:([^:]+):(.+)$/;function jn(t){if(":"===t[0]){var e=t.match(Ln);return[e[1],e[2]]}return["",t]}function Vn(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function Un(t,e,n,r,i,o){t|=1;var a=Cn(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a.matchedQueries,matchedQueryIds:a.matchedQueryIds,references:a.references,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?Nn(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||sn},provider:null,text:null,query:null,ngContent:null}}function Fn(t,e,n,r,i,o,a,s,u,c,l,h){void 0===a&&(a=[]),c||(c=sn);var f=Cn(n),d=f.matchedQueries,y=f.references,g=f.matchedQueryIds,m=null,v=null;o&&(m=(x=jn(o))[0],v=x[1]),s=s||[];for(var b=new Array(s.length),w=0;w<s.length;w++){var _=s[w],E=_[0],T=_[2],S=jn(_[1]),I=S[0],C=S[1],A=void 0,k=void 0;switch(15&E){case 4:k=T;break;case 1:case 8:A=T}b[w]={flags:E,ns:I,name:C,nonMinifiedName:C,securityContext:A,suffix:k}}u=u||[];var O=new Array(u.length);for(w=0;w<u.length;w++){var N=u[w];O[w]={type:0,target:N[0],eventName:N[1],propName:null}}var x,R=(a=a||[]).map(function(t){var e=t[1],n=jn(t[0]);return[n[0],n[1],e]});return h=function(t){if(t&&t.id===hn){var e=null!=t.encapsulation&&t.encapsulation!==p.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+dn++:fn}return t&&t.id===fn&&(t=null),t||null}(h),l&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:g,references:y,ngContentIndex:r,childCount:i,bindings:b,bindingFlags:Vn(b),outputs:O,element:{ns:m,name:v,attrs:R,template:null,componentProvider:null,componentView:l||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:c||sn},provider:null,text:null,query:null,ngContent:null}}function Bn(t,e,n){var r,i=n.element,o=t.root.selectorOrNode,a=t.renderer;if(t.parent||!o){r=i.name?a.createElement(i.name,i.ns):a.createComment("");var s=kn(t,e,n);s&&a.appendChild(s,r)}else r=a.selectRootElement(o);if(i.attrs)for(var u=0;u<i.attrs.length;u++){var c=i.attrs[u];a.setAttribute(r,c[1],c[2],c[0])}return r}function qn(t,e,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],a=Hn(t,n.nodeIndex,(h=o.eventName,(l=o.target)?l+":"+h:h)),s=o.target,u=t;"component"===o.target&&(s=null,u=e);var c=u.renderer.listen(s||r,o.eventName,a);t.disposables[n.outputIndex+i]=c}var l,h}function Hn(t,e,n){return function(r){return wn(t,e,n,r)}}function Wn(t,e,n,r){if(!gn(t,e,n,r))return!1;var i=e.bindings[n],o=Ze(t,e.nodeIndex),a=o.renderElement,s=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,o){var a=e.securityContext,s=a?t.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var u=t.renderer;null!=o?u.setAttribute(n,i,s,r):u.removeAttribute(n,i,r)}(t,i,a,i.ns,s,r);break;case 2:!function(t,e,n,r){var i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,a,s,r);break;case 4:!function(t,e,n,r,i){var o=t.root.sanitizer.sanitize(ze.STYLE,i);if(null!=o){o=o.toString();var a=e.suffix;null!=a&&(o+=a)}else o=null;var s=t.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(t,i,a,s,r);break;case 8:!function(t,e,n,r,i){var o=e.securityContext,a=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,a)}(33554432&e.flags&&32&i.flags?o.componentView:t,i,a,s,r)}return!0}var Gn=new Object,Kn=cn(P),zn=cn(St);function Qn(t,e,n,r){return n=N(n),{index:-1,deps:An(r,k(e)),flags:t,token:e,value:n}}function Xn(t){for(var e={},n=0;n<t.length;n++){var r=t[n];r.index=n,e[cn(r.token)]=r}return{factory:null,providersByKey:e,providers:t}}function Yn(t,e,n){if(void 0===n&&(n=P.THROW_IF_NOT_FOUND),8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);var r=e.tokenKey;switch(r){case Kn:case zn:return t}var i=t._def.providersByKey[r];if(i){var o=t._providers[i.index];return void 0===o&&(o=t._providers[i.index]=Jn(t,i)),o===Gn?void 0:o}return t._parent.get(e.token,n)}function Jn(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var r=n.length;switch(r){case 0:return new e;case 1:return new e(Yn(t,n[0]));case 2:return new e(Yn(t,n[0]),Yn(t,n[1]));case 3:return new e(Yn(t,n[0]),Yn(t,n[1]),Yn(t,n[2]));default:for(var i=new Array(r),o=0;o<r;o++)i[o]=Yn(t,n[o]);return new(e.bind.apply(e,[void 0].concat(i)))}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var r=n.length;switch(r){case 0:return e();case 1:return e(Yn(t,n[0]));case 2:return e(Yn(t,n[0]),Yn(t,n[1]));case 3:return e(Yn(t,n[0]),Yn(t,n[1]),Yn(t,n[2]));default:for(var i=Array(r),o=0;o<r;o++)i[o]=Yn(t,n[o]);return e.apply(void 0,i)}}(t,e.value,e.deps);break;case 2048:n=Yn(t,e.deps[0]);break;case 256:n=e.value}return void 0===n?Gn:n}function Zn(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var r=n[e];return r.viewContainerParent=null,nr(n,e),nn.dirtyParentQueries(r),tr(r),r}function $n(t,e,n){var r=e?Tn(e,e.def.lastRenderRootNode):t.renderElement;xn(n,2,n.renderer.parentNode(r),n.renderer.nextSibling(r),void 0)}function tr(t){xn(t,3,null,null,void 0)}function er(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function nr(t,e){e>=t.length-1?t.pop():t.splice(e,1)}var rr=new Object;function ir(t,e,n,r,i,o){return new or(t,e,n,r,i,o)}var or=function(t){function e(e,n,r,i,o,a){var s=t.call(this)||this;return s.selector=e,s.componentType=n,s._inputs=i,s._outputs=o,s.ngContentSelectors=a,s.viewDefFactory=r,s}return Object(r.__extends)(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){if(!r)throw new Error("ngModule should be provided");var i=Nn(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,a=nn.createRootView(t,e||[],n,i,r,rr),s=$e(a,o).instance;return n&&a.renderer.setAttribute(Ze(a,0).renderElement,"ng-version",y.full),new ar(a,new lr(a),s)},e}(yt),ar=function(t){function e(e,n,r){var i=t.call(this)||this;return i._view=e,i._viewRef=n,i._component=r,i._elDef=i._view.def.nodes[0],i.hostView=n,i.changeDetectorRef=n,i.instance=r,i}return Object(r.__extends)(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return new ie(Ze(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new dr(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(function(){});function sr(t,e,n){return new ur(t,e,n)}var ur=function(){function t(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}return Object.defineProperty(t.prototype,"element",{get:function(){return new ie(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new dr(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=En(t),t=t.parent;return t?new dr(t,e):new dr(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=Zn(this._data,t);nn.destroyView(e)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var n=new lr(e);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(t.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r},t.prototype.createComponent=function(t,e,n,r,i){var o=n||this.parentInjector;i||t instanceof Tt||(i=o.get(St));var a=t.create(o,r,void 0,i);return this.insert(a.hostView,e),a},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,o,a=t;return i=a._view,o=(n=this._data).viewContainer._embeddedViews,null!==(r=e)&&void 0!==r||(r=o.length),i.viewContainerParent=this._view,er(o,r,i),function(t,e){var n=_n(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,n){if(!(4&n.flags)){e.parent.def.nodeFlags|=4,n.flags|=4;for(var r=n.parent;r;)r.childFlags|=4,r=r.parent}}(0,e.parentNodeDef)}}(n,i),nn.dirtyParentQueries(i),$n(n,r>0?o[r-1]:null,i),a.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,o,a,s=this._embeddedViews.indexOf(t._view);return i=e,a=(o=(n=this._data).viewContainer._embeddedViews)[r=s],nr(o,r),null==i&&(i=o.length),er(o,i,a),nn.dirtyParentQueries(a),tr(a),$n(n,i>0?o[i-1]:null,a),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=Zn(this._data,t);e&&nn.destroyView(e)},t.prototype.detach=function(t){var e=Zn(this._data,t);return e?new lr(e):null},t}();function cr(t){return new lr(t)}var lr=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,"rootNodes",{get:function(){return xn(this._view,0,void 0,void 0,t=[]),t;var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){vn(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{nn.checkAndUpdateView(this._view)}finally{t.end&&t.end()}},t.prototype.checkNoChanges=function(){nn.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),nn.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,tr(this._view),nn.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t},t}();function hr(t,e){return new fr(t,e)}var fr=function(t){function e(e,n){var r=t.call(this)||this;return r._parentView=e,r._def=n,r}return Object(r.__extends)(e,t),e.prototype.createEmbeddedView=function(t){return new lr(nn.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,"elementRef",{get:function(){return new ie(Ze(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),e}(he);function pr(t,e){return new dr(t,e)}var dr=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){return void 0===e&&(e=P.THROW_IF_NOT_FOUND),nn.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:cn(t)},e)},t}();function yr(t,e){var n=t.def.nodes[e];if(1&n.flags){var r=Ze(t,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return Je(t,n.nodeIndex).renderText;if(20240&n.flags)return $e(t,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+e)}function gr(t){return new mr(t.renderer)}var mr=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var n=jn(e),r=this.delegate.createElement(n[1],n[0]);return t&&this.delegate.appendChild(t,r),r},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n},t.prototype.projectNodes=function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])},t.prototype.attachViewAfter=function(t,e){for(var n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t),i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},t.prototype.destroyView=function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.setElementProperty=function(t,e,n){this.delegate.setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var r=jn(e),i=r[0],o=r[1];null!=n?this.delegate.setAttribute(t,o,n,i):this.delegate.removeAttribute(t,o,i)},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){t[e].apply(t,n)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},t}();function vr(t,e,n,r){return new br(t,e,n,r)}var br=function(){function t(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),r=0;r<e.providers.length;r++){var i=e.providers[r];4096&i.flags||(n[r]=Jn(t,i))}}(this)}return t.prototype.get=function(t,e){return void 0===e&&(e=P.THROW_IF_NOT_FOUND),Yn(this,{token:t,tokenKey:cn(t),flags:0},e)},Object.defineProperty(t.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(_t)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+k(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(t,e){for(var n=t._def,r=0;r<n.providers.length;r++)if(131072&n.providers[r].flags){var i=t._providers[r];i&&i!==Gn&&i.ngOnDestroy()}}(this),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),wr=cn(function(){}),_r=cn(re),Er=cn(ie),Tr=cn(fe),Sr=cn(he),Ir=cn(pe),Cr=cn(P);function Ar(t,e,n,r,i,o,a,s){var u=[];if(a)for(var c in a){var l=a[c];u[l[0]]={flags:8,name:c,nonMinifiedName:l[1],ns:null,securityContext:null,suffix:null}}var h=[];if(s)for(var f in s)h.push({type:1,propName:f,target:null,eventName:s[f]});return Or(t,e|=16384,n,r,i,i,o,u,h)}function kr(t,e,n){return Or(-1,t|=16,null,0,e,e,n)}function Or(t,e,n,r,i,o,a,s,u){var c=Cn(n),l=c.matchedQueries,h=c.references,f=c.matchedQueryIds;u||(u=[]),s||(s=[]),o=N(o);var p=An(a,k(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:l,matchedQueryIds:f,references:h,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:Vn(s),outputs:u,element:null,provider:{token:i,value:o,deps:p},text:null,query:null,ngContent:null}}function Nr(t,e){return Pr(t,e)}function xr(t,e){for(var n=t;n.parent&&!Sn(n);)n=n.parent;return Mr(n.parent,En(n),!0,e.provider.value,e.provider.deps)}function Rr(t,e){var n=Mr(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var r=0;r<e.outputs.length;r++){var i=e.outputs[r],o=n[i.propName].subscribe(Dr(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=o.unsubscribe.bind(o)}return n}function Dr(t,e,n){return function(r){return wn(t,e,n,r)}}function Pr(t,e){var n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return Mr(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,i){var o=i.length;switch(o){case 0:return r();case 1:return r(jr(t,e,n,i[0]));case 2:return r(jr(t,e,n,i[0]),jr(t,e,n,i[1]));case 3:return r(jr(t,e,n,i[0]),jr(t,e,n,i[1]),jr(t,e,n,i[2]));default:for(var a=Array(o),s=0;s<o;s++)a[s]=jr(t,e,n,i[s]);return r.apply(void 0,a)}}(t,e.parent,n,r.value,r.deps);case 2048:return jr(t,e.parent,n,r.deps[0]);case 256:return r.value}}function Mr(t,e,n,r,i){var o=i.length;switch(o){case 0:return new r;case 1:return new r(jr(t,e,n,i[0]));case 2:return new r(jr(t,e,n,i[0]),jr(t,e,n,i[1]));case 3:return new r(jr(t,e,n,i[0]),jr(t,e,n,i[1]),jr(t,e,n,i[2]));default:for(var a=new Array(o),s=0;s<o;s++)a[s]=jr(t,e,n,i[s]);return new(r.bind.apply(r,[void 0].concat(a)))}}var Lr={};function jr(t,e,n,r,i){if(void 0===i&&(i=P.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var o=t;2&r.flags&&(i=null);var a=r.tokenKey;for(a===Ir&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);t;){if(e)switch(a){case wr:return gr(Vr(t,e,n));case _r:return Vr(t,e,n).renderer;case Er:return new ie(Ze(t,e.nodeIndex).renderElement);case Tr:return Ze(t,e.nodeIndex).viewContainer;case Sr:if(e.element.template)return Ze(t,e.nodeIndex).template;break;case Ir:return cr(Vr(t,e,n));case Cr:return pr(t,e);default:var s=(n?e.element.allProviders:e.element.publicProviders)[a];if(s){var u=$e(t,s.nodeIndex);return u||(u={instance:Pr(t,s)},t.nodes[s.nodeIndex]=u),u.instance}}n=Sn(t),e=En(t),t=t.parent}var c=o.root.injector.get(r.token,Lr);return c!==Lr||i===Lr?c:o.root.ngModule.injector.get(r.token,i)}function Vr(t,e,n){var r;if(n)r=Ze(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!Sn(r);)r=r.parent;return r}function Ur(t,e,n,r,i,o){if(32768&n.flags){var a=Ze(t,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var s=Ee.unwrap(t.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new Te(s,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function Fr(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],a=o.parent;for(!a&&o.flags&e&&qr(t,i,o.flags&e,r++),0==(o.childFlags&e)&&(i+=o.childCount);a&&1&a.flags&&i===a.nodeIndex+a.childCount;)a.directChildFlags&e&&(r=Br(t,a,e,r)),a=a.parent}}function Br(t,e,n,r){for(var i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){var o=t.def.nodes[i];o.flags&n&&qr(t,i,o.flags&n,r++),i+=o.childCount}return r}function qr(t,e,n,r){var i=$e(t,e);if(i){var o=i.instance;o&&(nn.setCurrentNode(t,e),1048576&n&&Ye(t,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Ye(t,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}function Hr(t){for(var e=t.def.nodeMatchedQueries;t.parent&&In(t);){var n=t.parentNodeDef;t=t.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++)67108864&(o=t.def.nodes[i]).flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&en(t,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}if(134217728&t.def.nodeFlags)for(i=0;i<t.def.nodes.length;i++){var o;134217728&(o=t.def.nodes[i]).flags&&536870912&o.flags&&en(t,i).setDirty(),i+=o.childCount}}function Wr(t,e){var n=en(t,e.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&e.flags){var o=e.parent.parent;i=Gr(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),r=$e(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=Gr(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);for(var a=e.query.bindings,s=!1,u=0;u<a.length;u++){var c=a[u],l=void 0;switch(c.bindingType){case 0:l=n.first;break;case 1:l=n,s=!0}r[c.propName]=l}s&&n.notifyOnChanges()}}function Gr(t,e,n,r,i){for(var o=e;o<=n;o++){var a=t.def.nodes[o],s=a.matchedQueries[r.id];if(null!=s&&i.push(Kr(t,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=Ze(t,o);if((a.childMatchedQueries&r.filterId)===r.filterId&&(Gr(t,o+1,o+a.childCount,r,i),o+=a.childCount),16777216&a.flags)for(var c=u.viewContainer._embeddedViews,l=0;l<c.length;l++){var h=c[l],f=_n(h);f&&f===u&&Gr(h,0,h.def.nodes.length-1,r,i)}var p=u.template._projectedViews;if(p)for(l=0;l<p.length;l++){var d=p[l];Gr(d,0,d.def.nodes.length-1,r,i)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(o+=a.childCount)}return i}function Kr(t,e,n){if(null!=n)switch(n){case 1:return Ze(t,e.nodeIndex).renderElement;case 0:return new ie(Ze(t,e.nodeIndex).renderElement);case 2:return Ze(t,e.nodeIndex).template;case 3:return Ze(t,e.nodeIndex).viewContainer;case 4:return $e(t,e.nodeIndex).instance}}function zr(t,e,n){var r=kn(t,e,n);r&&Dn(t,n.ngContent.index,1,r,null,void 0)}function Qr(t,e,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Xr(t,e,n){var r,i=t.renderer;r=i.createText(n.text.prefix);var o=kn(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function Yr(t,e){return(null!=t?t.toString():"")+e.suffix}function Jr(t,e,n,r){for(var i=0,o=0,a=0,s=0,u=0,c=null,l=null,h=!1,f=!1,p=null,d=0;d<e.length;d++){var y=e[d];if(y.nodeIndex=d,y.parent=c,y.bindingIndex=i,y.outputIndex=o,y.renderParent=l,a|=y.flags,u|=y.matchedQueryIds,y.element){var g=y.element;g.publicProviders=c?c.element.publicProviders:Object.create(null),g.allProviders=g.publicProviders,h=!1,f=!1,y.element.template&&(u|=y.element.template.nodeMatchedQueries)}if($r(c,y,e.length),i+=y.bindings.length,o+=y.outputs.length,!l&&3&y.flags&&(p=y),20224&y.flags){h||(h=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);var m=0!=(32768&y.flags);0==(8192&y.flags)||m?c.element.publicProviders[cn(y.provider.token)]=y:(f||(f=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[cn(y.provider.token)]=y),m&&(c.element.componentProvider=y)}if(c?(c.childFlags|=y.flags,c.directChildFlags|=y.flags,c.childMatchedQueries|=y.matchedQueryIds,y.element&&y.element.template&&(c.childMatchedQueries|=y.element.template.nodeMatchedQueries)):s|=y.flags,y.childCount>0)c=y,Zr(y)||(l=y);else for(;c&&d===c.nodeIndex+c.childCount;){var v=c.parent;v&&(v.childFlags|=c.childFlags,v.childMatchedQueries|=c.childMatchedQueries),l=(c=v)&&Zr(c)?c.renderParent:c}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||sn,updateRenderer:r||sn,handleEvent:function(t,n,r,i){return e[n].element.handleEvent(t,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:p}}function Zr(t){return 0!=(1&t.flags)&&null===t.element.name}function $r(t,e,n){var r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+e.nodeIndex+"!")}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+e.nodeIndex+"!");if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+e.nodeIndex+"!");if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+e.nodeIndex+"!")}if(e.childCount){var i=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=i&&e.nodeIndex+e.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+e.nodeIndex+"!")}}function ti(t,e,n,r){var i=ri(t.root,t.renderer,t,e,n);return ii(i,t.component,r),oi(i),i}function ei(t,e,n){var r=ri(t,t.renderer,null,null,e);return ii(r,n,n),oi(r),r}function ni(t,e,n,r){var i,o=e.element.componentRendererType;return i=o?t.root.rendererFactory.createRenderer(r,o):t.root.renderer,ri(t.root,i,t,e.element.componentProvider,n)}function ri(t,e,n,r,i){var o=new Array(i.nodes.length),a=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:a,initIndex:-1}}function ii(t,e,n){t.component=e,t.context=n}function oi(t){var e;Sn(t)&&(e=Ze(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,r=t.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i];nn.setCurrentNode(t,i);var a=void 0;switch(201347067&o.flags){case 1:var s=Bn(t,e,o),u=void 0;if(33554432&o.flags){var c=Nn(o.element.componentView);u=nn.createComponentView(t,o,c,s)}qn(t,u,o,s),a={renderElement:s,componentView:u,viewContainer:null,template:o.element.template?hr(t,o):void 0},16777216&o.flags&&(a.viewContainer=sr(t,o,a));break;case 2:a=Xr(t,e,o);break;case 512:case 1024:case 2048:case 256:(a=r[i])||4096&o.flags||(a={instance:Nr(t,o)});break;case 16:a={instance:xr(t,o)};break;case 16384:(a=r[i])||(a={instance:Rr(t,o)}),32768&o.flags&&ii(Ze(t,o.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new ae;break;case 8:zr(t,e,o),a=void 0}r[i]=a}di(t,pi.CreateViewNodes),vi(t,201326592,268435456,0)}function ai(t){ci(t),nn.updateDirectives(t,1),yi(t,pi.CheckNoChanges),nn.updateRenderer(t,1),di(t,pi.CheckNoChanges),t.state&=-97}function si(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Xe(t,0,256),ci(t),nn.updateDirectives(t,0),yi(t,pi.CheckAndUpdate),vi(t,67108864,536870912,0);var e=Xe(t,256,512);Fr(t,2097152|(e?1048576:0)),nn.updateRenderer(t,0),di(t,pi.CheckAndUpdate),vi(t,134217728,536870912,0),Fr(t,8388608|((e=Xe(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Xe(t,768,1024)}function ui(t,e,n,r,i,o,a,s,u,c,l,h,f){return 0===n?function(t,e,n,r,i,o,a,s,u,c,l,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=e.bindings.length,p=!1;return f>0&&Wn(t,e,0,n)&&(p=!0),f>1&&Wn(t,e,1,r)&&(p=!0),f>2&&Wn(t,e,2,i)&&(p=!0),f>3&&Wn(t,e,3,o)&&(p=!0),f>4&&Wn(t,e,4,a)&&(p=!0),f>5&&Wn(t,e,5,s)&&(p=!0),f>6&&Wn(t,e,6,u)&&(p=!0),f>7&&Wn(t,e,7,c)&&(p=!0),f>8&&Wn(t,e,8,l)&&(p=!0),f>9&&Wn(t,e,9,h)&&(p=!0),p}(t,e,n,r,i,o,a,s,u,c,l,h);case 2:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=!1,p=e.bindings,d=p.length;if(d>0&&gn(t,e,0,n)&&(f=!0),d>1&&gn(t,e,1,r)&&(f=!0),d>2&&gn(t,e,2,i)&&(f=!0),d>3&&gn(t,e,3,o)&&(f=!0),d>4&&gn(t,e,4,a)&&(f=!0),d>5&&gn(t,e,5,s)&&(f=!0),d>6&&gn(t,e,6,u)&&(f=!0),d>7&&gn(t,e,7,c)&&(f=!0),d>8&&gn(t,e,8,l)&&(f=!0),d>9&&gn(t,e,9,h)&&(f=!0),f){var y=e.text.prefix;d>0&&(y+=Yr(n,p[0])),d>1&&(y+=Yr(r,p[1])),d>2&&(y+=Yr(i,p[2])),d>3&&(y+=Yr(o,p[3])),d>4&&(y+=Yr(a,p[4])),d>5&&(y+=Yr(s,p[5])),d>6&&(y+=Yr(u,p[6])),d>7&&(y+=Yr(c,p[7])),d>8&&(y+=Yr(l,p[8])),d>9&&(y+=Yr(h,p[9]));var g=Je(t,e.nodeIndex).renderText;t.renderer.setValue(g,y)}return f}(t,e,n,r,i,o,a,s,u,c,l,h);case 16384:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=$e(t,e.nodeIndex),p=f.instance,d=!1,y=void 0,g=e.bindings.length;return g>0&&yn(t,e,0,n)&&(d=!0,y=Ur(t,f,e,0,n,y)),g>1&&yn(t,e,1,r)&&(d=!0,y=Ur(t,f,e,1,r,y)),g>2&&yn(t,e,2,i)&&(d=!0,y=Ur(t,f,e,2,i,y)),g>3&&yn(t,e,3,o)&&(d=!0,y=Ur(t,f,e,3,o,y)),g>4&&yn(t,e,4,a)&&(d=!0,y=Ur(t,f,e,4,a,y)),g>5&&yn(t,e,5,s)&&(d=!0,y=Ur(t,f,e,5,s,y)),g>6&&yn(t,e,6,u)&&(d=!0,y=Ur(t,f,e,6,u,y)),g>7&&yn(t,e,7,c)&&(d=!0,y=Ur(t,f,e,7,c,y)),g>8&&yn(t,e,8,l)&&(d=!0,y=Ur(t,f,e,8,l,y)),g>9&&yn(t,e,9,h)&&(d=!0,y=Ur(t,f,e,9,h,y)),y&&p.ngOnChanges(y),65536&e.flags&&Ye(t,256,e.nodeIndex)&&p.ngOnInit(),262144&e.flags&&p.ngDoCheck(),d}(t,e,n,r,i,o,a,s,u,c,l,h);case 32:case 64:case 128:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=e.bindings,p=!1,d=f.length;if(d>0&&gn(t,e,0,n)&&(p=!0),d>1&&gn(t,e,1,r)&&(p=!0),d>2&&gn(t,e,2,i)&&(p=!0),d>3&&gn(t,e,3,o)&&(p=!0),d>4&&gn(t,e,4,a)&&(p=!0),d>5&&gn(t,e,5,s)&&(p=!0),d>6&&gn(t,e,6,u)&&(p=!0),d>7&&gn(t,e,7,c)&&(p=!0),d>8&&gn(t,e,8,l)&&(p=!0),d>9&&gn(t,e,9,h)&&(p=!0),p){var y=tn(t,e.nodeIndex),g=void 0;switch(201347067&e.flags){case 32:g=new Array(f.length),d>0&&(g[0]=n),d>1&&(g[1]=r),d>2&&(g[2]=i),d>3&&(g[3]=o),d>4&&(g[4]=a),d>5&&(g[5]=s),d>6&&(g[6]=u),d>7&&(g[7]=c),d>8&&(g[8]=l),d>9&&(g[9]=h);break;case 64:g={},d>0&&(g[f[0].name]=n),d>1&&(g[f[1].name]=r),d>2&&(g[f[2].name]=i),d>3&&(g[f[3].name]=o),d>4&&(g[f[4].name]=a),d>5&&(g[f[5].name]=s),d>6&&(g[f[6].name]=u),d>7&&(g[f[7].name]=c),d>8&&(g[f[8].name]=l),d>9&&(g[f[9].name]=h);break;case 128:var m=n;switch(d){case 1:g=m.transform(n);break;case 2:g=m.transform(r);break;case 3:g=m.transform(r,i);break;case 4:g=m.transform(r,i,o);break;case 5:g=m.transform(r,i,o,a);break;case 6:g=m.transform(r,i,o,a,s);break;case 7:g=m.transform(r,i,o,a,s,u);break;case 8:g=m.transform(r,i,o,a,s,u,c);break;case 9:g=m.transform(r,i,o,a,s,u,c,l);break;case 10:g=m.transform(r,i,o,a,s,u,c,l,h)}}y.value=g}return p}(t,e,n,r,i,o,a,s,u,c,l,h);default:throw"unreachable"}}(t,e,r,i,o,a,s,u,c,l,h,f):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var r=!1,i=0;i<n.length;i++)Wn(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)gn(t,e,o,n[o])&&(i=!0);if(i){var a="";for(o=0;o<n.length;o++)a+=Yr(n[o],r[o]);a=e.text.prefix+a;var s=Je(t,e.nodeIndex).renderText;t.renderer.setValue(s,a)}return i}(t,e,n);case 16384:return function(t,e,n){for(var r=$e(t,e.nodeIndex),i=r.instance,o=!1,a=void 0,s=0;s<n.length;s++)yn(t,e,s,n[s])&&(o=!0,a=Ur(t,r,e,s,n[s],a));return a&&i.ngOnChanges(a),65536&e.flags&&Ye(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)gn(t,e,o,n[o])&&(i=!0);if(i){var a=tn(t,e.nodeIndex),s=void 0;switch(201347067&e.flags){case 32:s=n;break;case 64:for(s={},o=0;o<n.length;o++)s[r[o].name]=n[o];break;case 128:var u=n[0],c=n.slice(1);s=u.transform.apply(u,c)}a.value=s}return i}(t,e,n);default:throw"unreachable"}}(t,e,r)}function ci(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(4&r.flags){var i=Ze(t,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var a=i[o];a.state|=32,bn(a,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function li(t,e,n,r,i,o,a,s,u,c,l,h,f){return 0===n?function(t,e,n,r,i,o,a,s,u,c,l,h){var f=e.bindings.length;f>0&&mn(t,e,0,n),f>1&&mn(t,e,1,r),f>2&&mn(t,e,2,i),f>3&&mn(t,e,3,o),f>4&&mn(t,e,4,a),f>5&&mn(t,e,5,s),f>6&&mn(t,e,6,u),f>7&&mn(t,e,7,c),f>8&&mn(t,e,8,l),f>9&&mn(t,e,9,h)}(t,e,r,i,o,a,s,u,c,l,h,f):function(t,e,n){for(var r=0;r<n.length;r++)mn(t,e,r,n[r])}(t,e,r),!1}function hi(t,e){if(en(t,e.nodeIndex).dirty)throw rn(nn.createDebugContext(t,e.nodeIndex),"Query "+e.query.id+" not dirty","Query "+e.query.id+" dirty",0!=(1&t.state))}function fi(t){if(!(128&t.state)){if(yi(t,pi.Destroy),di(t,pi.Destroy),Fr(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=_n(t);if(e){var n=e.template._projectedViews;n&&(nr(n,n.indexOf(t)),nn.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var r=t.def.nodes[n];1&r.flags?t.renderer.destroyNode(Ze(t,n).renderElement):2&r.flags?t.renderer.destroyNode(Je(t,n).renderText):(67108864&r.flags||134217728&r.flags)&&en(t,n).destroy()}}(t),Sn(t)&&t.renderer.destroy(),t.state|=128}}var pi=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function di(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?gi(Ze(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function yi(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=Ze(t,r).viewContainer._embeddedViews,a=0;a<o.length;a++)gi(o[a],e);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function gi(t,e){var n=t.state;switch(e){case pi.CheckNoChanges:0==(128&n)&&(12==(12&n)?ai(t):64&n&&mi(t,pi.CheckNoChangesProjectedViews));break;case pi.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?ai(t):64&n&&mi(t,e));break;case pi.CheckAndUpdate:0==(128&n)&&(12==(12&n)?si(t):64&n&&mi(t,pi.CheckAndUpdateProjectedViews));break;case pi.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?si(t):64&n&&mi(t,e));break;case pi.Destroy:fi(t);break;case pi.CreateViewNodes:oi(t)}}function mi(t,e){yi(t,e),di(t,e)}function vi(t,e,n,r){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var i=t.def.nodes.length,o=0;o<i;o++){var a=t.def.nodes[o];if(a.flags&e&&a.flags&n)switch(nn.setCurrentNode(t,a.nodeIndex),r){case 0:Wr(t,a);break;case 1:hi(t,a)}a.childFlags&e&&a.childFlags&n||(o+=a.childCount)}}var bi=!1;function wi(t,e,n,r,i,o){return ei(Ei(t,i,i.injector.get(ee),e,n),r,o)}function _i(t,e,n,r,i,o){var a=i.injector.get(ee),s=Ei(t,i,new eo(a),e,n),u=xi(r);return $i(Fi.create,ei,null,[s,u,o])}function Ei(t,e,n,r,i){var o=e.injector.get(Qe),a=e.injector.get(tt);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:n.createRenderer(null,null),errorHandler:a}}function Ti(t,e,n,r){var i=xi(n);return $i(Fi.create,ti,null,[t,e,i,r])}function Si(t,e,n,r){return n=Ai.get(e.element.componentProvider.provider.token)||xi(n),$i(Fi.create,ni,null,[t,e,n,r])}function Ii(t,e,n,r){return vr(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===Ci.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(function(t){var r=Ci.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasDeprecatedOverrides;return e.hasOverrides?(function(t){for(var e=0;e<t.providers.length;e++){var r=t.providers[e];n&&(r.flags|=4096);var i=Ci.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=An(i.deps),r.value=i.value)}}(t=t.factory(function(){return sn})),t):t}(r))}var Ci=new Map,Ai=new Map;function ki(t){Ci.set(t.token,t)}function Oi(t,e){var n=Nn(Nn(e.viewDefFactory).nodes[0].element.componentView);Ai.set(t,n)}function Ni(){Ci.clear(),Ai.clear()}function xi(t){if(0===Ci.size)return t;var e=function(t){for(var e=[],n=null,r=0;r<t.nodes.length;r++){var i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&Ci.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return sn});for(var n=0;n<e.length;n++)r(t,e[n]);return t;function r(t,e){for(var n=e+1;n<t.nodes.length;n++){var r=t.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=Ci.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=An(o.deps),i.value=o.value)}}}}function Ri(t,e,n,r,i,o,a,s,u,c,l,h,f){var p=t.def.nodes[e];return ui(t,p,n,r,i,o,a,s,u,c,l,h,f),224&p.flags?tn(t,e).value:void 0}function Di(t,e,n,r,i,o,a,s,u,c,l,h,f){var p=t.def.nodes[e];return li(t,p,n,r,i,o,a,s,u,c,l,h,f),224&p.flags?tn(t,e).value:void 0}function Pi(t){return $i(Fi.detectChanges,si,null,[t])}function Mi(t){return $i(Fi.checkNoChanges,ai,null,[t])}function Li(t){return $i(Fi.destroy,fi,null,[t])}var ji,Vi,Ui,Fi=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();function Bi(t,e){Vi=t,Ui=e}function qi(t,e,n,r){return Bi(t,e),$i(Fi.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function Hi(t,e){if(128&t.state)throw an(Fi[ji]);return Bi(t,Xi(t,0)),t.def.updateDirectives(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?Gi(t,a,r,i):Ki(t,a,r,i),16384&a.flags&&Bi(t,Xi(t,n)),224&a.flags?tn(t,a.nodeIndex).value:void 0},t)}function Wi(t,e){if(128&t.state)throw an(Fi[ji]);return Bi(t,Yi(t,0)),t.def.updateRenderer(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?Gi(t,a,r,i):Ki(t,a,r,i),3&a.flags&&Bi(t,Yi(t,n)),224&a.flags?tn(t,a.nodeIndex).value:void 0},t)}function Gi(t,e,n,r){if(ui.apply(void 0,[t,e,n].concat(r))){var i=1===n?r[0]:r;if(16384&e.flags){for(var o={},a=0;a<e.bindings.length;a++){var s=e.bindings[a],u=i[a];8&s.flags&&(o[(f=s.nonMinifiedName,"ng-reflect-"+(f=f.replace(/[$@]/g,"_").replace(zi,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"-"+t[1].toLowerCase()})))]=Qi(u))}var c=e.parent,l=Ze(t,c.nodeIndex).renderElement;if(c.element.name)for(var h in o)null!=(u=o[h])?t.renderer.setAttribute(l,h,u):t.renderer.removeAttribute(l,h);else t.renderer.setValue(l,"bindings="+JSON.stringify(o,null,2))}}var f}function Ki(t,e,n,r){li.apply(void 0,[t,e,n].concat(r))}var zi=/([A-Z])/g;function Qi(t){try{return null!=t?t.toString().slice(0,30):t}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function Xi(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function Yi(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var Ji=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var n=this.nodeDef,r=t;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=En(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(t.prototype,"elOrCompView",{get:function(){return Ze(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return pr(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){var t={};if(this.elDef){Zi(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&Zi(this.elView,n,t),e+=n.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentRenderElement",{get:function(){var t=function(t){for(;t&&!Sn(t);)t=t.parent;return t.parent?Ze(t.parent,En(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?Tn(this.view,this.nodeDef):Tn(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];2&this.nodeDef.flags?(e=this.view.def,n=this.nodeDef.nodeIndex):(e=this.elView.def,n=this.elDef.nodeIndex);var o=function(t,e){for(var n=-1,r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(e,n),a=-1;e.factory(function(){return++a===o?(e=t.error).bind.apply(e,[t].concat(r)):sn;var e}),a<o&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,r))},t}();function Zi(t,e,n){for(var r in e.references)n[r]=Kr(t,e,e.references[r])}function $i(t,e,n,r){var i=ji,o=Vi,a=Ui;try{ji=t;var s=e.apply(n,r);return Vi=o,Ui=a,ji=i,s}catch(t){if(J(t)||!Vi)throw t;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),on(t,e),t}(t,to())}}function to(){return Vi?new Ji(Vi,Ui):null}var eo=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new no(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),no=function(){function t(t){this.delegate=t,this.data=this.delegate.data}return t.prototype.destroyNode=function(t){!function(t){ve.delete(t.nativeNode)}(be(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var n=this.delegate.createElement(t,e),r=to();if(r){var i=new ye(n,null,r);i.name=t,we(i)}return n},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),n=to();return n&&we(new de(e,null,n)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),n=to();return n&&we(new de(e,null,n)),e},t.prototype.appendChild=function(t,e){var n=be(t),r=be(e);n&&r&&n instanceof ye&&n.addChild(r),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,n){var r=be(t),i=be(e),o=be(n);r&&i&&r instanceof ye&&r.insertBefore(o,i),this.delegate.insertBefore(t,e,n)},t.prototype.removeChild=function(t,e){var n=be(t),r=be(e);n&&r&&n instanceof ye&&n.removeChild(r),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t){var e=this.delegate.selectRootElement(t),n=to();return n&&we(new ye(e,null,n)),e},t.prototype.setAttribute=function(t,e,n,r){var i=be(t);i&&i instanceof ye&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){var r=be(t);r&&r instanceof ye&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){var n=be(t);n&&n instanceof ye&&(n.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var n=be(t);n&&n instanceof ye&&(n.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){var i=be(t);i&&i instanceof ye&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){var r=be(t);r&&r instanceof ye&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){var r=be(t);r&&r instanceof ye&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)},t.prototype.listen=function(t,e,n){if("string"!=typeof t){var r=be(t);r&&r.listeners.push(new function(t,e){this.name=t,this.callback=e}(e,n))}return this.delegate.listen(t,e,n)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}();function ro(t,e,n){return new oo(t,e,n)}var io,oo=function(t){function e(e,n,r){var i=t.call(this)||this;return i.moduleType=e,i._bootstrapComponents=n,i._ngModuleDefFactory=r,i}return Object(r.__extends)(e,t),e.prototype.create=function(t){!function(){if(!bi){bi=!0;var t=zt()?{setCurrentNode:Bi,createRootView:_i,createEmbeddedView:Ti,createComponentView:Si,createNgModuleRef:Ii,overrideProvider:ki,overrideComponentView:Oi,clearOverrides:Ni,checkAndUpdateView:Pi,checkNoChangesView:Mi,destroyView:Li,createDebugContext:function(t,e){return new Ji(t,e)},handleEvent:qi,updateDirectives:Hi,updateRenderer:Wi}:{setCurrentNode:function(){},createRootView:wi,createEmbeddedView:ti,createComponentView:ni,createNgModuleRef:vr,overrideProvider:sn,overrideComponentView:sn,clearOverrides:sn,checkAndUpdateView:si,checkNoChangesView:ai,destroyView:fi,createDebugContext:function(t,e){return new Ji(t,e)},handleEvent:function(t,e,n,r){return t.def.handleEvent(t,e,n,r)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?Ri:Di,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?Ri:Di,t)}};nn.setCurrentNode=t.setCurrentNode,nn.createRootView=t.createRootView,nn.createEmbeddedView=t.createEmbeddedView,nn.createComponentView=t.createComponentView,nn.createNgModuleRef=t.createNgModuleRef,nn.overrideProvider=t.overrideProvider,nn.overrideComponentView=t.overrideComponentView,nn.clearOverrides=t.clearOverrides,nn.checkAndUpdateView=t.checkAndUpdateView,nn.checkNoChangesView=t.checkNoChangesView,nn.destroyView=t.destroyView,nn.resolveDep=jr,nn.createDebugContext=t.createDebugContext,nn.handleEvent=t.handleEvent,nn.updateDirectives=t.updateDirectives,nn.updateRenderer=t.updateRenderer,nn.dirtyParentQueries=Hr}}();var e=Nn(this._ngModuleDefFactory);return nn.createNgModuleRef(this.moduleType,t||P.NULL,this._bootstrapComponents,e)},e}(It);"undefined"==typeof ngDevMode&&("undefined"!=typeof window&&(window.ngDevMode=!0),"undefined"!=typeof self&&(self.ngDevMode=!0),"undefined"!=typeof t&&(t.ngDevMode=!0)),io=function(t,e,n){return{parent:io,id:null,node:null,data:[],ngStaticData:[],cleanup:null,renderer:null,child:null,tail:null,next:null,bindingStartIndex:null,creationMode:!0,viewHookStartIndex:null}}()}).call(e,n("DuR2"))},Whum:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.forEach=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},e.extend=function(t,n){return e.forEach(n,function(e,n){t[e]=n}),t},e.clone=function(t){return e.extend({},t)},e.isNonNullObject=function(t){return"object"==typeof t&&null!==t},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.map=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},e.findKey=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},e.findValue=function(t,n,r){var i=e.findKey(t,n,r);return i&&t[i]},e.getAnyKey=function(t){for(var e in t)return e},e.getValues=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0}},YNQF:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Whum");e.querystring=function(t){var e=[];return r.forEach(t,function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e}},YaPU:function(t,e,n){"use strict";var r=n("AMGY"),i=n("OVmG"),o=n("tLDX"),a=n("t7NR"),s=n("+CnV"),u=n("f9aG");n.d(e,"a",function(){return c});var c=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,s=function(t,e,n){if(t){if(t instanceof i.a)return t;if(t[o.a])return t[o.a]()}return t||e||n?new i.a(t,e,n):new i.a(a.a)}(t,e,n);if(r?r.call(s,this.source):s.add(this.source||!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var n=this;if(e||(r.a.Rx&&r.a.Rx.config&&r.a.Rx.config.Promise?e=r.a.Rx.config.Promise:r.a.Promise&&(e=r.a.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,r){var i;i=n.subscribe(function(e){if(i)try{t(e)}catch(t){r(t),i.unsubscribe()}else t(e)},r,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[s.a]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:Object(u.b)(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(r.a.Rx&&r.a.Rx.config&&r.a.Rx.config.Promise?t=r.a.Rx.config.Promise:r.a.Promise&&(t=r.a.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}()},ZCyv:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e};e.base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&s)<<2|c>>6,h=63&c;u||(h=64,a||(l=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!=s&&(r.push(a<<4&240|s>>2),64!=u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},e.base64Encode=function(t){var n=r(t);return e.base64.encodeByteArray(n,!0)},e.base64Decode=function(t){try{return e.base64.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}},bzVp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("+iia"),i=(n.n(r),n("m9DX")),o=(n.n(i),n("OAVl"));n.n(o)},cQXm:function(t,e,n){"use strict";e.a=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},dgOU:function(t,e,n){"use strict";e.a=function(t){return null!=t&&"object"==typeof t}},etqZ:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var n=t.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var r=t.Map;if(r)for(var i=Object.getOwnPropertyNames(r.prototype),o=0;o<i.length;++o){var a=i[o];if("entries"!==a&&"size"!==a&&r.prototype[a]===r.prototype.entries)return a}return"@@iterator"}(n("AMGY").a)},f9aG:function(t,e,n){"use strict";function r(){}function i(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:r}e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return i(t)},e.b=i},g5jc:function(t,e,n){"use strict";var r=n("TToO"),i=n("YaPU"),o=n("OVmG"),a=n("VwZZ"),s=n("x6VL"),u=function(t){function e(e,n){t.call(this),this.subject=e,this.subscriber=n,this.closed=!1}return Object(r.__extends)(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(a.a),c=n("tLDX");n.d(e,"b",function(){return l}),n.d(e,"a",function(){return h});var l=function(t){function e(e){t.call(this,e),this.destination=e}return Object(r.__extends)(e,t),e}(o.a),h=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return Object(r.__extends)(e,t),e.prototype[c.a]=function(){return new l(this)},e.prototype.lift=function(t){var e=new f(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new s.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new s.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new s.a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),a.a.EMPTY):this.isStopped?(t.complete(),a.a.EMPTY):(this.observers.push(t),new u(this,t))},e.prototype.asObservable=function(){var t=new i.a;return t.source=this,t},e.create=function(t,e){return new f(t,e)},e}(i.a),f=function(t){function e(e,n){t.call(this),this.destination=e,this.source=n}return Object(r.__extends)(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):a.a.EMPTY},e}(h)},iNRZ:function(t,e,n){"use strict";function r(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=r(t[n],e[n]));return t}Object.defineProperty(e,"__esModule",{value:!0}),e.deepCopy=function(t){return r(void 0,t)},e.deepExtend=r,e.patchProperty=function(t,e,n){t[e]=n}},lt8x:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("ZCyv"),i=n("sA4o");e.decode=function(t){var e={},n={},o={},a="";try{var s=t.split(".");e=i.jsonEval(r.base64Decode(s[0])||""),n=i.jsonEval(r.base64Decode(s[1])||""),a=s[2],o=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:o,signature:a}},e.isValidTimestamp=function(t){var n,r,i=e.decode(t).claims,o=Math.floor((new Date).getTime()/1e3);return"object"==typeof i&&(i.hasOwnProperty("nbf")?n=i.nbf:i.hasOwnProperty("iat")&&(n=i.iat),r=i.hasOwnProperty("exp")?i.exp:n+86400),o&&n&&r&&o>=n&&o<=r},e.issuedAtTime=function(t){var n=e.decode(t).claims;return"object"==typeof n&&n.hasOwnProperty("iat")?n.iat:null},e.isValidFormat=function(t){var n=e.decode(t),r=n.claims;return!!n.signature&&!!r&&"object"==typeof r&&r.hasOwnProperty("iat")},e.isAdmin=function(t){var n=e.decode(t).claims;return"object"==typeof n&&!0===n.admin}},m4rg:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("9/vk");e.stringToByteArray=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);if(o>=55296&&o<=56319){var a=o-55296;r.assert(++i<t.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(t.charCodeAt(i)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},m9DX:function(t,e){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return o;i++}}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){if(t.call(r,e[i],i,e))return i;i++}return-1}})},r3eQ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createSubscribe=function(t,e){var n=new r(t,e);return n.subscribe.bind(n)};var r=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,o=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=i),void 0===r.error&&(r.error=i),void 0===r.complete&&(r.complete=i);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(t){}}),this.observers.push(r),a},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function i(){}e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}}},sA4o:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.jsonEval=function(t){return JSON.parse(t)},e.stringify=function(t){return JSON.stringify(t)}},t7NR:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},tLDX:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("AMGY").a.Symbol,i="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber"},tZ2B:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("TToO"),i=function(t){function e(){t.apply(this,arguments)}return Object(r.__extends)(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n("OVmG").a)},x35b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("WT6e"),i=n("YaPU"),o=n("TToO"),a=n("OVmG"),s=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return i.a.of(this.value);case"E":return i.a.throw(this.error);case"C":return i.a.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return"undefined"!=typeof e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),u=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.scheduler,this.delay))},t}(),c=function(t){function e(e,n,r){void 0===r&&(r=0),t.call(this,e),this.scheduler=n,this.delay=r}return Object(o.__extends)(e,t),e.dispatch=function(t){t.notification.observe(t.destination),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new l(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(s.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(s.createError(t))},e.prototype._complete=function(){this.scheduleMessage(s.createComplete())},e}(a.a),l=function(t,e){this.notification=t,this.destination=e};function h(t,e){return void 0===e&&(e=0),function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new u(t,e))}}(t,e)(this)}var f=n("9eBd"),p=new r.o("FirebaseAppConfigToken"),d=function(){};function y(t,e){try{return e?f.default.initializeApp(t,e):f.default.initializeApp(t)}catch(t){return f.default.app("app/duplicate-app"===t.code?t.name:null)}}var g=n("AMGY"),m=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n}return Object(o.__extends)(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n,this.pending=!1}return Object(o.__extends)(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),g.a.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;g.a.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){t.call(this)}return Object(o.__extends)(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n("VwZZ").a))),v=new(function(t){function e(){t.apply(this,arguments)}return Object(o.__extends)(e,t),e}(function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return Object(o.__extends)(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}())))(m),b=new r.o("FirebaseAppName"),w=function(){function t(){}return t.initializeApp=function(e,n){return{ngModule:t,providers:[{provide:p,useValue:e},{provide:b,useValue:n}]}},t}(),_=function(){function t(t){this.zone=t}return t.prototype.schedule=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.zone.run(function(){return v.schedule.apply(v,t)})},t}(),E=n("tZ2B"),T=n("PIsA"),S=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new I(t,this.project,this.resultSelector))},t}(),I=function(t){function e(e,n,r){t.call(this,e),this.project=n,this.resultSelector=r,this.index=0}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe(),this.add(this.innerSubscription=Object(T.a)(this,t,e,n))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.resultSelector?this._tryNotifyNext(t,e,n,r):this.destination.next(e)},e.prototype._tryNotifyNext=function(t,e,n,r){var i;try{i=this.resultSelector(t,e,n,r)}catch(t){return void this.destination.error(t)}this.destination.next(i)},e}(E.a);i.a.prototype.switchMap=function(t,e){return function(t,e){return function(n){return n.lift(new S(t,e))}}(t,e)(this)};var C=n("Veqx"),A=C.a.of;i.a.of=A;var k=function(t){function e(e,n){t.call(this),this.promise=e,this.scheduler=n}return Object(o.__extends)(e,t),e.create=function(t,n){return new e(t,n)},e.prototype._subscribe=function(t){var e=this,n=this.promise,r=this.scheduler;if(null==r)this._isScalar?t.closed||(t.next(this.value),t.complete()):n.then(function(n){e.value=n,e._isScalar=!0,t.closed||(t.next(n),t.complete())},function(e){t.closed||t.error(e)}).then(null,function(t){g.a.setTimeout(function(){throw t})});else if(this._isScalar){if(!t.closed)return r.schedule(O,0,{value:this.value,subscriber:t})}else n.then(function(n){e.value=n,e._isScalar=!0,t.closed||t.add(r.schedule(O,0,{value:n,subscriber:t}))},function(e){t.closed||t.add(r.schedule(N,0,{err:e,subscriber:t}))}).then(null,function(t){g.a.setTimeout(function(){throw t})})},e}(i.a);function O(t){var e=t.subscriber;e.closed||(e.next(t.value),e.complete())}function N(t){var e=t.subscriber;e.closed||e.error(t.err)}var x=k.create;i.a.fromPromise=x;var R=function(){return function(t){var e=this;this.app=t,this.auth=t.auth();var n=new i.a(function(t){return{unsubscribe:e.auth.onAuthStateChanged(t)}});this.authState=h.call(n,new _(Zone.current));var r=new i.a(function(t){return{unsubscribe:e.auth.onIdTokenChanged(t)}}).switchMap(function(t){return t?i.a.fromPromise(t.getIdToken()):i.a.of(null)});this.idToken=h.call(r,new _(Zone.current))}}();function D(t){return new R(t)}n("VuKk");var P=function(){},M=n("It2I"),L=function(){function t(t){var e=this;this.afAuth=t,this.afAuth.authState.subscribe(function(t){t?(e.authId=t.uid,e.name=t.displayName):(e.authId=null,e.name=null)})}return Object.defineProperty(t.prototype,"authState",{get:function(){return this.afAuth.authState},enumerable:!0,configurable:!0}),t.prototype.login=function(){this.afAuth.auth.signInWithPopup(new M.auth.GoogleAuthProvider)},t.prototype.logout=function(){this.afAuth.auth.signOut()},t}(),j=function(){},V=n("BX3T"),U=n("N4j0"),F=n("cQXm"),B=n("etqZ"),q=function(t){function e(e,n){if(t.call(this),this.scheduler=n,null==e)throw new Error("iterator cannot be null.");this.iterator=function(t){var e=t[B.a];if(!e&&"string"==typeof t)return new H(t);if(!e&&void 0!==t.length)return new W(t);if(!e)throw new TypeError("object is not iterable");return t[B.a]()}(e)}return Object(o.__extends)(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.index,n=t.iterator,r=t.subscriber;if(t.hasError)r.error(t.error);else{var i=n.next();i.done?r.complete():(r.next(i.value),t.index=e+1,r.closed?"function"==typeof n.return&&n.return():this.schedule(t))}},e.prototype._subscribe=function(t){var n=this.iterator,r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{index:0,iterator:n,subscriber:t});for(;;){var i=n.next();if(i.done){t.complete();break}if(t.next(i.value),t.closed){"function"==typeof n.return&&n.return();break}}},e}(i.a),H=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length),this.str=t,this.idx=e,this.len=n}return t.prototype[B.a]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),W=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=function(e){var n,r,i=+t.length;return isNaN(i)?0:0!==i&&"number"==typeof(n=i)&&g.a.isFinite(n)?(i=(0==(r=+i)?r:isNaN(r)?r:r<0?-1:1)*Math.floor(Math.abs(i)))<=0?0:i>G?G:i:i}()),this.arr=t,this.idx=e,this.len=n}return t.prototype[B.a]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}(),G=Math.pow(2,53)-1,K=n("TILf"),z=n("+3/4"),Q=function(t){function e(e,n){t.call(this),this.arrayLike=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return Object(o.__extends)(e,t),e.create=function(t,n){var r=t.length;return 0===r?new z.a:1===r?new K.a(t[0],n):new e(t,n)},e.dispatch=function(t){var e=t.arrayLike,n=t.index,r=t.subscriber;r.closed||(n>=t.length?r.complete():(r.next(e[n]),t.index=n+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.arrayLike,r=this.scheduler,i=n.length;if(r)return r.schedule(e.dispatch,0,{arrayLike:n,index:0,length:i,subscriber:t});for(var o=0;o<i&&!t.closed;o++)t.next(n[o]);t.complete()},e}(i.a),X=n("+CnV"),Y=function(t){function e(e,n){t.call(this,null),this.ish=e,this.scheduler=n}return Object(o.__extends)(e,t),e.create=function(t,n){if(null!=t){if("function"==typeof t[X.a])return t instanceof i.a&&!n?t:new e(t,n);if(Object(V.a)(t))return new C.a(t,n);if(Object(F.a)(t))return new k(t,n);if("function"==typeof t[B.a]||"string"==typeof t)return new q(t,n);if(Object(U.a)(t))return new Q(t,n)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,n=this.scheduler;return null==n?e[X.a]().subscribe(t):e[X.a]().subscribe(new c(t,n,0))},e}(i.a).create,J=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Z(t,this.project,this.thisArg))},t}(),Z=function(t){function e(e,n,r){t.call(this,e),this.project=n,this.count=0,this.thisArg=r||this}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(a.a);function $(t,e){return function(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new J(t,e))}}(t,e)(this)}i.a.prototype.map=$;var tt=n("Rf9G");function et(t){return function(t){var e=new i.a(function(e){return{unsubscribe:t.onSnapshot(e)}});return h.call(e,new _(Zone.current))}(t).share()}function nt(t){return et(t).map(function(t){return{payload:t,type:"query"}})}i.a.prototype.share=tt.a;var rt=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new it(t,this.predicate,this.thisArg))},t}(),it=function(t){function e(e,n,r){t.call(this,e),this.predicate=n,this.thisArg=r,this.count=0}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(a.a);function ot(t,e){return function(t,e){return function(n){return n.lift(new rt(t,e))}}(t,e)(this)}function at(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new st(t,e,n))}}i.a.prototype.filter=ot;var st=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new ut(t,this.accumulator,this.seed,this.hasSeed))},t}(),ut=function(t){function e(e,n,r,i){t.call(this,e),this.accumulator=n,this._seed=r,this.hasSeed=i,this.index=0}return Object(o.__extends)(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(a.a);function ct(t){return nt(t).map(function(t){return t.payload.docChanges.map(function(t){return{type:t.type,payload:t}})})}i.a.prototype.scan=function(t,e){return arguments.length>=2?at(t,e)(this):at(t)(this)};var lt=function(){function t(t,e){this.ref=t,this.query=e}return t.prototype.stateChanges=function(t){return t&&0!==t.length?ct(this.query).map(function(e){return e.filter(function(e){return t.indexOf(e.type)>-1})}).filter(function(t){return t.length>0}):ct(this.query)},t.prototype.auditTrail=function(t){return this.stateChanges(t).scan(function(t,e){return t.concat(e)},[])},t.prototype.snapshotChanges=function(t){return t=function(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(t),function(t,e){return nt(t).map(function(t){return t.payload.docChanges}).scan(function(t,n){return function(t,e,n){return e.forEach(function(e){n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.id==e.doc.id||t.splice(e.newIndex,0,e);break;case"modified":e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e);break;case"removed":t.splice(e.oldIndex,1)}return t}(t,e))}),t}(t,n,e)},[]).map(function(t){return t.map(function(t){return{type:t.type,payload:t}})})}(this.query,t)},t.prototype.valueChanges=function(t){return nt(this.query).map(function(t){return t.payload.docs.map(function(t){return t.data()})})},t.prototype.add=function(t){return this.ref.add(t)},t.prototype.doc=function(t){return new ht(this.ref.doc(t))},t}(),ht=function(){function t(t){this.ref=t}return t.prototype.set=function(t,e){return this.ref.set(t,e)},t.prototype.update=function(t){return this.ref.update(t)},t.prototype.delete=function(){return this.ref.delete()},t.prototype.collection=function(t,e){var n=pt(this.ref.collection(t),e);return new lt(n.ref,n.query)},t.prototype.snapshotChanges=function(){return et(this.ref).map(function(t){return{payload:t,type:"value"}})},t.prototype.valueChanges=function(){return this.snapshotChanges().map(function(t){return t.payload.exists?t.payload.data():null})},t}(),ft=new r.o("EnablePersistenceToken");function pt(t,e){return void 0===e&&(e=function(t){return t}),{query:e(t),ref:t}}var dt=function(){function t(t,e){this.app=t,this.firestore=t.firestore(),this.persistenceEnabled$=Y(e?t.firestore().enablePersistence().then(function(){return!0},function(){return!1}):new Promise(function(t,e){t(!1)}))}return t.prototype.collection=function(t,e){var n=pt(this.firestore.collection(t),e);return new lt(n.ref,n.query)},t.prototype.doc=function(t){var e=this.firestore.doc(t);return new ht(e)},t.prototype.createId=function(){return this.firestore.collection("_").doc().id},t}(),yt=f.default.SDK_VERSION,gt=[],mt=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),vt=mt.INFO,bt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case mt.DEBUG:case mt.VERBOSE:console.log.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case mt.INFO:console.info.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case mt.WARN:console.warn.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case mt.ERROR:console.error.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},wt=new(function(){function t(t){this.name=t,this._logLevel=vt,this._logHandler=bt,gt.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in mt))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,mt.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,mt.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,mt.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,mt.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,mt.ERROR].concat(t))},t}())("@firebase/firestore"),_t=function(t){return t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT",t}({});function Et(){return wt.logLevel===mt.DEBUG?_t.DEBUG:wt.logLevel===mt.SILENT?_t.SILENT:_t.ERROR}function Tt(t){switch(t){case _t.DEBUG:wt.logLevel=mt.DEBUG;break;case _t.ERROR:wt.logLevel=mt.ERROR;break;case _t.SILENT:wt.logLevel=mt.SILENT;break;default:wt.error("Firestore ("+yt+"): Invalid value passed to `setLogLevel`")}}function St(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(wt.logLevel<=mt.DEBUG){var i=n.map(Ct);wt.debug.apply(wt,["Firestore ("+yt+") ["+t+"]: "+e].concat(i))}}function It(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(wt.logLevel<=mt.ERROR){var r=e.map(Ct);wt.error.apply(wt,["Firestore ("+yt+"): "+t].concat(r))}}function Ct(t){if("string"==typeof t)return t;var e=Ot.getPlatform();try{return e.formatJSON(t)}catch(e){return t}}function At(t){var e="FIRESTORE ("+yt+") INTERNAL ASSERTION FAILED: "+t;throw It(e),new Error(e)}function kt(t,e){t||At(e)}var Ot=function(){function t(){}return t.setPlatform=function(e){t.platform&&At("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||At("Platform not set"),t.platform},t}();function Nt(){return Ot.getPlatform().emptyByteString}var xt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Rt=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return o.__extends(e,t),e}(Error);function Dt(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new Rt(xt.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function Pt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Mt(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function Lt(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jt(t){for(var e in kt(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vt(t){kt(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function Ut(t,e,n){if(e.length!==n)throw new Rt(xt.INVALID_ARGUMENT,"Function "+t+"() requires "+$t(n,"argument")+", but was called with "+$t(e.length,"argument")+".")}function Ft(t,e,n){if(e.length<n)throw new Rt(xt.INVALID_ARGUMENT,"Function "+t+"() requires at least "+$t(n,"argument")+", but was called with "+$t(e.length,"argument")+".")}function Bt(t,e,n,r){if(e.length<n||e.length>r)throw new Rt(xt.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+$t(e.length,"argument")+".")}function qt(t,e,n,r){Kt(t,e,Zt(n)+" argument",r)}function Ht(t,e,n,r){void 0!==r&&qt(t,e,n,r)}function Wt(t,e,n,r){Kt(t,e,n+" option",r)}function Gt(t,e,n,r){void 0!==r&&Wt(t,e,n,r)}function Kt(t,e,n,r){if(typeof r!==e||"object"===e&&!zt(r)){var i=Qt(r);throw new Rt(xt.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function zt(t){return"object"==typeof t&&null!==t&&Object.getPrototypeOf(t)===Object.prototype}function Qt(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":At("Unknown wrong type: "+typeof t)}function Xt(t,e,n){if(void 0===n)throw new Rt(xt.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+Zt(e)+" argument, but it was undefined.")}function Yt(t,e,n){Lt(e,function(e,r){if(n.indexOf(e)<0)throw new Rt(xt.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function Jt(t,e,n,r){var i=Qt(r);return new Rt(xt.INVALID_ARGUMENT,"Function "+t+"() requires its "+Zt(n)+" argument to be a "+e+", but it was: "+i)}function Zt(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function $t(t,e){return t+" "+e+(1===t?"":"s")}var te=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return kt(20===e.length,"Invalid auto ID: "+e),e},t}();function ee(t,e){return t<e?-1:t>e?1:0}function ne(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function re(){if("undefined"==typeof Uint8Array)throw new Rt(xt.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ie(){if(!Ot.getPlatform().base64Available)throw new Rt(xt.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var oe=function(){function t(t){ie(),this._binaryString=t}return t.fromBase64String=function(e){Ut("Blob.fromBase64String",arguments,1),qt("Blob.fromBase64String","string",1,e),ie();try{return new t(Ot.getPlatform().atob(e))}catch(t){throw new Rt(xt.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(Ut("Blob.fromUint8Array",arguments,1),re(),!(e instanceof Uint8Array))throw Jt("Blob.fromUint8Array","Uint8Array",1,e);return new t(Array.prototype.map.call(e,function(t){return String.fromCharCode(t)}).join(""))},t.prototype.toBase64=function(){return Ut("Blob.toBase64",arguments,0),ie(),Ot.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){Ut("Blob.toUint8Array",arguments,0),re();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return ee(this._binaryString,t._binaryString)},t}(),ae=Dt(oe,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),se=function(){function t(t,e){if(Ut("GeoPoint",arguments,2),qt("GeoPoint","number",1,t),qt("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new Rt(xt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Rt(xt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return ee(this._lat,t._lat)||ee(this._long,t._long)},t}(),ue="(default)",ce=function(){function t(t,e){this.projectId=t,this.database=e||ue}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===ue},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return ee(this.projectId,t.projectId)||ee(this.database,t.database)},t}(),le=function(){function t(t,e,n){this.init(t,e,n)}return t.prototype.init=function(t,e,n){void 0===e?e=0:e>t.length&&At("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&At("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n},t.prototype.construct=function(t,e,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(t,e,n),r},Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):"string"==typeof e?n.push(e):At("Unknown parameter type for Path.child(): "+e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return kt(this.length>=(t=void 0===t?1:t),"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return kt(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return kt(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return kt(!this.isEmpty(),"Can't call lastSegment() on empty path"),this.segments[this.limit()-1]},t.prototype.get=function(t){return kt(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),he=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new Rt(xt.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter(function(t){return t.length>0}))},e.EMPTY_PATH=new e([]),e}(le),fe=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.isValidIdentifier=function(t){return fe.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Rt(xt.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Rt(xt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Rt(xt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Rt(xt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(le),de=function(){function t(e){this.path=e,kt(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.isEqual=function(t){return null!==t&&0===he.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return he.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new he(e.slice()))},t.fromPathString=function(e){return new t(he.fromString(e))},t.EMPTY=new t(new he([])),t}(),ye=function(){function t(t,e,n,r){this.key=t,this.version=e,this.data=n,this.hasLocalMutations=r.hasLocalMutations}return t.prototype.field=function(t){return this.data.field(t)},t.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},t.prototype.value=function(){return this.data.value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.data.isEqual(e.data)&&this.hasLocalMutations===e.hasLocalMutations},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"})"},t.compareByKey=function(t,e){return de.comparator(t.key,e.key)},t.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return void 0!==r&&void 0!==i?r.compareTo(i):At("Trying to compare documents on fields that don't exist")},t}(),ge=function(){function t(t,e){this.key=t,this.version=e}return t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},t.prototype.isEqual=function(t){return t&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},t.compareByKey=function(t,e){return de.comparator(t.key,e.key)},t}(),me=function(){function t(t,e){this.comparator=t,this.root=e||be.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,be.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,be.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new ve(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new ve(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new ve(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new ve(this.root,t,this.comparator,!0)},t}(),ve=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){kt(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),be=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw At("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw At("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw At("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}();be.EMPTY=new(function(){function t(){this.size=0}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new be(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var we=function(t){return t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue",t}({}),_e=function(t){return t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous",t}({}),Ee=function(){function t(t){this.serverTimestampBehavior=t}return t.fromSnapshotOptions=function(e){switch(e.serverTimestamps){case"estimate":return new t(_e.Estimate);case"previous":return new t(_e.Previous);case"none":case void 0:return t.defaultOptions;default:return At("fromSnapshotOptions() called with invalid options.")}},t.defaultOptions=new t(_e.Default),t}(),Te=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return kt(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),ee(this.typeOrder,t.typeOrder)},t}(),Se=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=we.NullValue,e.internalValue=null,e}return o.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(Te),Ie=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=we.BooleanValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?ee(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(Te),Ce=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=we.NumberValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue)<(r=t.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(t);var n,r},e}(Te);function Ae(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var ke=function(t){function e(e){return t.call(this,e)||this}return o.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Ae(this.internalValue,t.internalValue)},e}(Ce),Oe=function(t){function e(e){var n=t.call(this,e)||this;return n.internalValue=e,n}return o.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Ae(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(Ce),Ne=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=we.StringValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?ee(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(Te),xe=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=we.TimestampValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue.compareTo(t.internalValue):t instanceof Re?-1:this.defaultCompareTo(t)},e}(Te),Re=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=we.TimestampValue,r}return o.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===_e.Estimate?this.localWriteTime.toDate():t&&t.serverTimestampBehavior===_e.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime.compareTo(t.localWriteTime):t instanceof xe?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(Te),De=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=we.BlobValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(Te),Pe=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=we.RefValue,r}return o.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId)},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:de.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(Te),Me=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=we.GeoPointValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(Te),Le=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=we.ObjectValue,n}return o.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal(function(n,r){e[n]=r.value(t)}),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=ee(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return ee(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(kt(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(kt(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return void 0!==this.field(t)},e.prototype.field=function(t){kt(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach(function(t){n=n instanceof e&&n.internalValue.get(t)||void 0}),n},e.prototype.toString=function(){return JSON.stringify(this.value())},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new me(ee)),e}(Te),je=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=we.ArrayValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return ee(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return JSON.stringify(this.value())},e}(Te),Ve=Number,Ue=Ve.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Fe=Ve.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Be=Ve.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function qe(t){return null===t||void 0===t}var He,We=function(){function t(t,e,n,r,i,o){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),this.path=t,this.explicitOrderBy=e,this.filters=n,this.limit=r,this.startAt=i,this.endAt=o,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)this.memoizedOrderBy=t.isKeyField()?[Ze]:[new Je(t),Ze];else{kt(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Xe.ASCENDING)===Xe.ASCENDING?Ze:$e)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){kt(null==this.getInequalityFilterField()||!(e instanceof Ke)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),kt(!de.isDocumentKey(this.path),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){kt(!de.isDocumentKey(this.path),"No ordering allowed for document query"),kt(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";qe(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),qe(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.isKeyField()}return kt(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesAncestor(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!qe(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Ke&&n.isInequality())return n.field}return null},t.prototype.isDocumentQuery=function(){return de.isDocumentKey(this.path)&&0===this.filters.length},t.prototype.matchesAncestor=function(t){var e=t.key.path;return de.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isPrefixOf(e)&&this.path.length===e.length-1},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&void 0===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){kt(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),Ge=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;default:return At("Unknown relation: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t}(),Ke=function(){function t(t,e,n){this.field=t,this.op=e,this.value=n}return t.prototype.matches=function(t){if(this.field.isKeyField()){kt(this.value instanceof Pe,"Comparing on key, but filter value not a RefValue");var e=de.comparator(t.key,this.value.key);return this.matchesComparison(e)}var n=t.field(this.field);return void 0!==n&&this.matchesValue(n)},t.prototype.matchesValue=function(t){return this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(t){switch(this.op){case Ge.LESS_THAN:return t<0;case Ge.LESS_THAN_OR_EQUAL:return t<=0;case Ge.EQUAL:return 0===t;case Ge.GREATER_THAN:return t>0;case Ge.GREATER_THAN_OR_EQUAL:return t>=0;default:return At("Unknown relation op"+this.op)}},t.prototype.isInequality=function(){return this.op!==Ge.EQUAL},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(),ze=function(){function t(t){this.field=t}return t.prototype.matches=function(t){var e=t.field(this.field);return void 0!==e&&null===e.value()},t.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},t.prototype.toString=function(){return this.field.canonicalString()+" IS null"},t.prototype.isEqual=function(e){return e instanceof t&&this.field.isEqual(e.field)},t}(),Qe=function(){function t(t){this.field=t}return t.prototype.matches=function(t){var e=t.field(this.field).value();return"number"==typeof e&&isNaN(e)},t.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},t.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},t.prototype.isEqual=function(e){return e instanceof t&&this.field.isEqual(e.field)},t}(),Xe=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),Ye=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},t.prototype.sortsBeforeDocument=function(t,e){kt(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())kt(o instanceof Pe,"Bound has a non-key value where the key path is being used."),n=de.comparator(o.key,e.key);else{var a=e.field(i.field);kt(void 0!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===Xe.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)return this.position[e].isEqual(t.position[e]);return!0},t}(),Je=function(){function t(t,e){this.field=t,void 0===e&&(e=Xe.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?ye.compareByKey(t,e):ye.compareByField(this.field,t,e);switch(this.dir){case Xe.ASCENDING:return n;case Xe.DESCENDING:return-1*n;default:return At("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),Ze=new Je(pe.keyField(),Xe.ASCENDING),$e=new Je(pe.keyField(),Xe.DESCENDING),tn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/),en=function(){function t(t,e){this.seconds=t,this.nanos=e,kt(e>=0,"timestamp nanoseconds out of range: "+e),kt(e<1e9,"timestamp nanoseconds out of range"+e),kt(t>=-62135596800,"timestamp seconds out of range: "+t),kt(t<253402300800,"timestamp seconds out of range"+t)}return t.now=function(){return t.fromEpochMilliseconds(Date.now())},t.fromDate=function(e){return t.fromEpochMilliseconds(e.getTime())},t.fromEpochMilliseconds=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.fromISOString=function(e){var n=0,r=tn.exec(e);if(kt(!!r,"invalid timestamp: "+e),r[1]){var i=r[1];i=(i+"000000000").substr(0,9),n=Number(i)}var o=new Date(e);return new t(Math.floor(o.getTime()/1e3),n)},t.prototype.toDate=function(){return new Date(this.toEpochMilliseconds())},t.prototype.toEpochMilliseconds=function(){return 1e3*this.seconds+this.nanos/1e6},t.prototype.compareTo=function(t){return this.seconds===t.seconds?ee(this.nanos,t.nanos):ee(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanos===this.nanos},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanos="+this.nanos+")"},t}(),nn=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new en(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp.compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanos/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new en(0,0)),t}();!function(t){t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution"}(He||(He={}));var rn,on=function(){function t(t,e,n,r,i){void 0===r&&(r=nn.MIN),void 0===i&&(i=Nt()),this.query=t,this.targetId=e,this.purpose=n,this.snapshotVersion=r,this.resumeToken=i}return t.prototype.update=function(e){return new t(this.query,this.targetId,this.purpose,e.snapshotVersion,e.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),an=function(){function t(t){this.fields=t}return t.prototype.isEqual=function(t){return ne(this.fields,t.fields)},t}(),sn=function(){function t(){}return t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),un=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),cn=function(t){return t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete",t}({}),ln=function(){function t(t,e){this.updateTime=t,this.exists=e,kt(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof ye&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists?t instanceof ye:null===t||t instanceof ge:(kt(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return n=t.updateTime,(null!==(e=this.updateTime)&&void 0!==e?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),hn=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&kt(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof ye?t.version:nn.MIN},t}(),fn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=cn.Set,i}return o.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),kt(null==e.transformResults,"Transform results received by SetMutation.");var n=hn.getPostMutationVersion(t);return new ye(this.key,n,this.value,{hasLocalMutations:!1})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=hn.getPostMutationVersion(t);return new ye(this.key,r,this.value,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(hn),pn=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=cn.Patch,o}return o.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),kt(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return t;var n=hn.getPostMutationVersion(t),r=this.patchDocument(t);return new ye(this.key,n,r,{hasLocalMutations:!1})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=hn.getPostMutationVersion(t),i=this.patchDocument(t);return new ye(this.key,r,i,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){return this.patchObject(t instanceof ye?t.data:Le.EMPTY)},e.prototype.patchObject=function(t){for(var e=0,n=this.fieldMask.fields;e<n.length;e++){var r=n[e],i=this.data.field(r);t=void 0!==i?t.set(r,i):t.delete(r)}return t},e}(hn),dn=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=cn.Transform,r.precondition=ln.exists(!0),r}return o.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),kt(null!=e.transformResults,"Transform results missing for TransformMutation.");var n=e.transformResults;if(!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.transformObject(r.data,n);return new ye(this.key,r.version,i,{hasLocalMutations:!1})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,e),o=this.transformObject(r.data,i);return new ye(this.key,r.version,o,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&ne(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){kt(t instanceof ye,"Unknown MaybeDocument type "+t);var e=t;return kt(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.localTransformResults=function(t,e){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],a=o.transform;if(!(a instanceof sn))return At("Encountered unknown transform: "+a);var s=null;e instanceof ye&&(s=e.field(o.field)||null),n.push(new Re(t,s))}return n},e.prototype.transformObject=function(t,e){kt(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n],i=r.transform,o=r.field;if(!(i instanceof sn))return At("Encountered unknown transform: "+i);t=t.set(o,e[n])}return t},e}(hn),yn=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=cn.Delete,r}return o.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),kt(null==e.transformResults,"Transform results received by DeleteMutation."),new ge(this.key,nn.MIN)},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&kt(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new ge(this.key,nn.forDeletedDoc())):t},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(hn),gn=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}();function mn(t){switch(t){case xt.OK:return At("Treated status OK as error");case xt.CANCELLED:case xt.UNKNOWN:case xt.DEADLINE_EXCEEDED:case xt.RESOURCE_EXHAUSTED:case xt.INTERNAL:case xt.UNAVAILABLE:case xt.UNAUTHENTICATED:return!1;case xt.INVALID_ARGUMENT:case xt.NOT_FOUND:case xt.ALREADY_EXISTS:case xt.PERMISSION_DENIED:case xt.FAILED_PRECONDITION:case xt.ABORTED:case xt.OUT_OF_RANGE:case xt.UNIMPLEMENTED:case xt.DATA_LOSS:return!0;default:return At("Unknown status code: "+t)}}function vn(t){if(void 0===t)return It("GRPC error has no .code"),xt.UNKNOWN;switch(t){case rn.OK:return xt.OK;case rn.CANCELLED:return xt.CANCELLED;case rn.UNKNOWN:return xt.UNKNOWN;case rn.DEADLINE_EXCEEDED:return xt.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return xt.RESOURCE_EXHAUSTED;case rn.INTERNAL:return xt.INTERNAL;case rn.UNAVAILABLE:return xt.UNAVAILABLE;case rn.UNAUTHENTICATED:return xt.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return xt.INVALID_ARGUMENT;case rn.NOT_FOUND:return xt.NOT_FOUND;case rn.ALREADY_EXISTS:return xt.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return xt.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return xt.FAILED_PRECONDITION;case rn.ABORTED:return xt.ABORTED;case rn.OUT_OF_RANGE:return xt.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return xt.UNIMPLEMENTED;case rn.DATA_LOSS:return xt.DATA_LOSS;default:return At("Unknown status code: "+t)}}!function(t){t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS"}(rn||(rn={}));var bn=function(){function t(t){this.comparator=t,this.data=new me(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach(function(t){n=n.add(t)}),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),wn=new me(de.comparator);function _n(){return wn}var En=new me(de.comparator);function Tn(){return En}var Sn=new me(de.comparator);function In(){return Sn}var Cn=new bn(de.comparator);function An(){return Cn}var kn,On=function(){function t(t,e,n){this.snapshotVersion=t,this.targetChanges=e,this.documentUpdates=n}return t.prototype.addDocumentUpdate=function(t){this.documentUpdates=this.documentUpdates.insert(t.key,t)},t.prototype.handleExistenceFilterMismatch=function(t){this.targetChanges[t]={mapping:new xn,snapshotVersion:nn.MIN,currentStatusUpdate:kn.MarkNotCurrent,resumeToken:Nt()}},t}();!function(t){t[t.None=0]="None",t[t.MarkNotCurrent=1]="MarkNotCurrent",t[t.MarkCurrent=2]="MarkCurrent"}(kn||(kn={}));var Nn=An(),xn=function(){function t(){this.docs=Nn}return Object.defineProperty(t.prototype,"documents",{get:function(){return this.docs},enumerable:!0,configurable:!0}),t.prototype.add=function(t){this.docs=this.docs.add(t)},t.prototype.delete=function(t){this.docs=this.docs.delete(t)},t.prototype.isEqual=function(t){return null!==t&&this.docs.isEqual(t.docs)},t}(),Rn=function(){function t(){this.addedDocuments=Nn,this.removedDocuments=Nn}return t.prototype.applyToKeySet=function(t){var e=t;return this.addedDocuments.forEach(function(t){return e=e.add(t)}),this.removedDocuments.forEach(function(t){return e=e.delete(t)}),e},t.prototype.add=function(t){this.addedDocuments=this.addedDocuments.add(t),this.removedDocuments=this.removedDocuments.delete(t)},t.prototype.delete=function(t){this.addedDocuments=this.addedDocuments.delete(t),this.removedDocuments=this.removedDocuments.add(t)},t.prototype.isEqual=function(t){return null!==t&&this.addedDocuments.isEqual(t.addedDocuments)&&this.removedDocuments.isEqual(t.removedDocuments)},t}(),Dn=function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r},Pn=function(t,e){this.targetId=t,this.existenceFilter=e},Mn=function(t){return t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset",t}({}),Ln=function(){return function(t,e,n,r){void 0===n&&(n=Nt()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}(),jn=function(){function t(t,e,n){this.snapshotVersion=t,this.listenTargets=e,this.existenceFilters={},this.targetChanges={},this.documentUpdates=_n(),this.frozen=!1,this.pendingTargetResponses=Vt(n)}return t.prototype.add=function(t){kt(!this.frozen,"Trying to modify frozen WatchChangeAggregator."),t instanceof Dn?this.addDocumentChange(t):t instanceof Ln?this.addTargetChange(t):t instanceof Pn?this.addExistenceFilterChange(t):At("Unknown watch change: "+t)},t.prototype.addChanges=function(t){var e=this;kt(!this.frozen,"Trying to modify frozen WatchChangeAggregator."),t.forEach(function(t){return e.add(t)})},t.prototype.createRemoteEvent=function(){var t=this,e=this.targetChanges;return Mt(this.targetChanges,function(n){t.isActiveTarget(n)||delete e[n]}),this.frozen=!0,new On(this.snapshotVersion,e,this.documentUpdates)},t.prototype.ensureTargetChange=function(t){var e=this.targetChanges[t];return e||(e={currentStatusUpdate:kn.None,snapshotVersion:this.snapshotVersion,mapping:new Rn,resumeToken:Nt()},this.targetChanges[t]=e),e},t.prototype.isActiveTarget=function(t){return!Pt(this.pendingTargetResponses,t)&&Pt(this.listenTargets,t)},t.prototype.addDocumentChange=function(t){for(var e=!1,n=0,r=t.updatedTargetIds;n<r.length;n++)this.isActiveTarget(a=r[n])&&(this.ensureTargetChange(a).mapping.add(t.key),e=!0);for(var i=0,o=t.removedTargetIds;i<o.length;i++){var a;this.isActiveTarget(a=o[i])&&(this.ensureTargetChange(a).mapping.delete(t.key),e=!0)}t.newDoc&&e&&(this.documentUpdates=this.documentUpdates.insert(t.key,t.newDoc))},t.prototype.addTargetChange=function(t){var e=this;t.targetIds.forEach(function(n){var r=e.ensureTargetChange(n);switch(t.state){case Mn.NoChange:e.isActiveTarget(n)&&Vn(r,t.resumeToken);break;case Mn.Added:e.recordTargetResponse(n),Pt(e.pendingTargetResponses,n)||(r.mapping=new Rn,r.currentStatusUpdate=kn.None,delete e.existenceFilters[n]),Vn(r,t.resumeToken);break;case Mn.Removed:e.recordTargetResponse(n),kt(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case Mn.Current:e.isActiveTarget(n)&&(r.currentStatusUpdate=kn.MarkCurrent,Vn(r,t.resumeToken));break;case Mn.Reset:e.isActiveTarget(n)&&(r.mapping=new xn,Vn(r,t.resumeToken));break;default:At("Unknown target watch change state: "+t.state)}})},t.prototype.recordTargetResponse=function(t){var e=(this.pendingTargetResponses[t]||0)-1;0===e?delete this.pendingTargetResponses[t]:this.pendingTargetResponses[t]=e},t.prototype.addExistenceFilterChange=function(t){this.isActiveTarget(t.targetId)&&(this.existenceFilters[t.targetId]=t.existenceFilter)},t}();function Vn(t,e){e.length>0&&(t.resumeToken=e)}var Un,Fn,Bn=((Un={})[Xe.ASCENDING.name]="ASCENDING",Un[Xe.DESCENDING.name]="DESCENDING",Un),qn=((Fn={})[Ge.LESS_THAN.name]="LESS_THAN",Fn[Ge.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Fn[Ge.GREATER_THAN.name]="GREATER_THAN",Fn[Ge.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Fn[Ge.EQUAL.name]="EQUAL",Fn);function Hn(t,e){kt(!qe(t),e+" is missing")}function Wn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):At("can't parse "+t)}var Gn=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?xt.UNKNOWN:vn(t.code);return new Rt(e,t.message||"")},t.prototype.toInt32Value=function(t){return qe(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return qe(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return{seconds:t.seconds,nanos:t.nanos}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return en.fromISOString(t);kt(!!t,"Cannot deserialize null or undefined timestamp.");var e=Wn(t.seconds||"0");return new en(e,t.nanos||0)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(kt(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),oe.fromBase64String(t)):(kt(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),oe.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return kt(!!t,"Trying to deserialize version that isn't set"),nn.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=he.fromString(t);return kt(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return kt(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),kt(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new de(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return 0===t.length?this.encodedDatabaseId:this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?he.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new he(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new he(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return kt(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof Se)return{nullValue:"NULL_VALUE"};if(t instanceof Ie)return{booleanValue:t.value()};if(t instanceof ke)return{integerValue:""+t.value()};if(t instanceof Oe){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof Ne?{stringValue:t.value()}:t instanceof Le?{mapValue:this.toMapValue(t)}:t instanceof je?{arrayValue:this.toArrayValue(t)}:t instanceof xe?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof Me?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof De?{bytesValue:this.toBytes(t.value())}:t instanceof Pe?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:At("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this,n=t.value_type;if(Kn(t,n,"nullValue"))return Se.INSTANCE;if(Kn(t,n,"booleanValue"))return Ie.of(t.booleanValue);if(Kn(t,n,"integerValue"))return new ke(Wn(t.integerValue));if(Kn(t,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return Oe.NAN;if("Infinity"===t.doubleValue)return Oe.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Oe.NEGATIVE_INFINITY}return new Oe(t.doubleValue)}if(Kn(t,n,"stringValue"))return new Ne(t.stringValue);if(Kn(t,n,"mapValue"))return this.fromFields(t.mapValue.fields||{});if(Kn(t,n,"arrayValue"))return Hn(t.arrayValue,"arrayValue"),new je((t.arrayValue.values||[]).map(function(t){return e.fromValue(t)}));if(Kn(t,n,"timestampValue"))return Hn(t.timestampValue,"timestampValue"),new xe(this.fromTimestamp(t.timestampValue));if(Kn(t,n,"geoPointValue"))return Hn(t.geoPointValue,"geoPointValue"),new Me(new se(t.geoPointValue.latitude||0,t.geoPointValue.longitude||0));if(Kn(t,n,"bytesValue")){Hn(t.bytesValue,"bytesValue");var r=this.fromBlob(t.bytesValue);return new De(r)}if(Kn(t,n,"referenceValue")){Hn(t.referenceValue,"referenceValue");var i=this.fromResourceName(t.referenceValue),o=new ce(i.get(1),i.get(3)),a=new de(this.extractLocalPathFromResourceName(i));return new Pe(o,a)}return At("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return kt(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t){return new ye(this.fromName(t.name),this.fromVersion(t.updateTime),this.fromFields(t.fields||{}),{hasLocalMutations:!1})},t.prototype.toFields=function(t){var e=this,n={};return t.forEach(function(t,r){n[t]=e.toValue(r)}),n},t.prototype.fromFields=function(t){var e=this,n=Le.EMPTY;return Lt(t,function(t,r){n=n.set(new pe([t]),e.fromValue(r))}),n},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){kt(!!t.found,"Tried to deserialize a found document from a missing document."),Hn(t.found.name,"doc.found.name"),Hn(t.found.updateTime,"doc.found.updateTime");var e=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),r=this.fromFields(t.found.fields||{});return new ye(e,n,r,{hasLocalMutations:!1})},t.prototype.fromMissing=function(t){kt(!!t.missing,"Tried to deserialize a missing document from a found document."),kt(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new ge(e,n)},t.prototype.fromMaybeDocument=function(t){var e=t.result;return Kn(t,e,"found")?this.fromFound(t):Kn(t,e,"missing")?this.fromMissing(t):At("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case Mn.Added:return"ADD";case Mn.Current:return"CURRENT";case Mn.NoChange:return"NO_CHANGE";case Mn.Removed:return"REMOVE";case Mn.Reset:return"RESET";default:return At("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof Pn)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof Dn){var e;if(t.newDoc instanceof ye)return{documentChange:{document:{name:this.toName((e=t.newDoc).key),fields:this.toFields(e.data),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}};if(t.newDoc instanceof ge)return{documentDelete:{document:this.toName((e=t.newDoc).key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Ln){var n=void 0;return t.cause&&(n={code:function(t){if(void 0===t)return rn.OK;switch(t){case xt.OK:return rn.OK;case xt.CANCELLED:return rn.CANCELLED;case xt.UNKNOWN:return rn.UNKNOWN;case xt.DEADLINE_EXCEEDED:return rn.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return rn.RESOURCE_EXHAUSTED;case xt.INTERNAL:return rn.INTERNAL;case xt.UNAVAILABLE:return rn.UNAVAILABLE;case xt.UNAUTHENTICATED:return rn.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return rn.INVALID_ARGUMENT;case xt.NOT_FOUND:return rn.NOT_FOUND;case xt.ALREADY_EXISTS:return rn.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return rn.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return rn.FAILED_PRECONDITION;case xt.ABORTED:return rn.ABORTED;case xt.OUT_OF_RANGE:return rn.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return rn.UNIMPLEMENTED;case xt.DATA_LOSS:return rn.DATA_LOSS;default:return At("Unknown status code: "+t)}}(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return At("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=t.response_type;if(Kn(t,n,"targetChange")){Hn(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),a=t.targetChange.cause,s=a&&this.fromRpcStatus(a);e=new Ln(r,i,o,s||null)}else if(Kn(t,n,"documentChange")){Hn(t.documentChange,"documentChange"),Hn(t.documentChange.document,"documentChange.name"),Hn(t.documentChange.document.name,"documentChange.document.name"),Hn(t.documentChange.document.updateTime,"documentChange.document.updateTime");var u=t.documentChange,c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=this.fromFields(u.document.fields||{}),f=new ye(c,l,h,{hasLocalMutations:!1});e=new Dn(u.targetIds||[],u.removedTargetIds||[],f.key,f)}else if(Kn(t,n,"documentDelete")){Hn(t.documentDelete,"documentDelete"),Hn(t.documentDelete.document,"documentDelete.document");var p=t.documentDelete;c=this.fromName(p.document),l=p.readTime?this.fromVersion(p.readTime):nn.forDeletedDoc(),f=new ge(c,l),e=new Dn([],p.removedTargetIds||[],f.key,f)}else if(Kn(t,n,"documentRemove")){Hn(t.documentRemove,"documentRemove"),Hn(t.documentRemove.document,"documentRemove");var d=t.documentRemove;c=this.fromName(d.document),e=new Dn([],d.removedTargetIds||[],c,null)}else{if(!Kn(t,n,"filter"))return At("Unknown change type "+JSON.stringify(t));Hn(t.filter,"filter"),Hn(t.filter.targetId,"filter.targetId");var y=t.filter,g=new gn(y.count||0);e=new Pn(y.targetId,g)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?Mn.NoChange:"ADD"===t?Mn.Added:"REMOVE"===t?Mn.Removed:"CURRENT"===t?Mn.Current:"RESET"===t?Mn.Reset:At("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!Kn(t,t.response_type,"targetChange"))return nn.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?nn.MIN:e.readTime?this.fromVersion(e.readTime):nn.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof fn)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof yn)e={delete:this.toName(t.key)};else if(t instanceof pn)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof dn))return At("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):ln.NONE;if(t.update){Hn(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new pn(r,i,o,n)}return new fn(r,i,n)}if(t.delete)return r=this.fromName(t.delete),new yn(r,n);if(t.transform){r=this.fromName(t.transform.document);var a=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return kt(!0===n.exists,'Transforms only support precondition "exists == true"'),new dn(r,a)}return At("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return kt(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:At("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?ln.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?ln.exists(t.exists):ln.NONE},t.prototype.fromWriteResult=function(t){var e=this,n=t.updateTime?this.fromVersion(t.updateTime):null,r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults.map(function(t){return e.fromValue(t)})),new function(t,e){this.version=t,this.transformResults=e}(n,r)},t.prototype.fromWriteResults=function(t){var e=this;return(t||[]).map(function(t){return e.fromWriteResult(t)})},t.prototype.toFieldTransform=function(t){return kt(t.transform instanceof sn,"Unknown transform: "+t.transform),{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"}},t.prototype.fromFieldTransform=function(t){kt("REQUEST_TIME"===t.setToServerValue,"Unknown transform proto: "+JSON.stringify(t));var e=pe.fromServerFormat(t.fieldPath);return new un(e,sn.instance)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;return kt(1===e,"DocumentsTarget contained other than 1 document: "+e),We.atPath(this.fromQueryPath(t.documents[0]))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}};if(t.path.isEmpty())e.parent=this.toQueryPath(he.EMPTY_PATH);else{var n=t.path;kt(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]}var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0;r>0&&(kt(1===r,"StructuredQuery.from with more than one collection is not supported."),e=e.child(n.from[0].collectionId));var i=[];n.where&&(i=this.fromFilter(n.where));var o=[];n.orderBy&&(o=this.fromOrder(n.orderBy));var a=null;n.limit&&(a=this.fromInt32Value(n.limit));var s=null;n.startAt&&(s=this.fromCursor(n.startAt));var u=null;return n.endAt&&(u=this.fromCursor(n.endAt)),new We(e,o,i,a,s,u)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case He.Listen:return null;case He.ExistenceFilterMismatch:return"existence-filter-mismatch";case He.LimboResolution:return"limbo-document";default:return At("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof Ke?e.toRelationFilter(t):e.toUnaryFilter(t)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromRelationFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):At("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new Ye(r,n)},t.prototype.toDirection=function(t){return Bn[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return Xe.ASCENDING;case"DESCENDING":return Xe.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return qn[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return Ge.EQUAL;case"GREATER_THAN":return Ge.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Ge.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Ge.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Ge.LESS_THAN_OR_EQUAL;case"OPERATOR_UNSPECIFIED":return At("Unspecified relation");default:return At("Unknown relation")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return pe.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new Je(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.toRelationFilter=function(t){return t instanceof Ke?{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}:At("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromRelationFilter=function(t){return new Ke(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryFilter=function(t){return t instanceof Qe?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}}:t instanceof ze?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}:At("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return new Qe(e);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return new ze(n);case"OPERATOR_UNSPECIFIED":return At("Unspecified filter");default:return At("Unknown filter")}},t.prototype.toDocumentMask=function(t){return{fieldPaths:t.fields.map(function(t){return t.canonicalString()})}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map(function(t){return pe.fromServerFormat(t)});return new an(e)},t}();function Kn(t,e,n){return e===n||!e&&n in t}var zn=n("Df3s"),Qn=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){kt(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){kt(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){kt(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){kt(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){kt(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){kt(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),Xn="Connection",Yn={BatchGetDocuments:"batchGet",Commit:"commit"},Jn="gl-js/ fire/"+yt,Zn=function(){function t(t){this.databaseId=t.databaseId,this.pool=new zn.XhrIoPool,this.baseUrl=(t.ssl?"https":"http")+"://"+t.host}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=Jn},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise(function(o,a){r.pool.getObject(function(s){s.listenOnce(zn.EventType.COMPLETE,function(){try{switch(s.getLastErrorCode()){case zn.ErrorCode.NO_ERROR:var e=s.getResponseJson();St(Xn,"XHR received:",JSON.stringify(e)),o(e);break;case zn.ErrorCode.TIMEOUT:St(Xn,'RPC "'+t+'" timed out'),a(new Rt(xt.DEADLINE_EXCEEDED,"Request time out"));break;case zn.ErrorCode.HTTP_ERROR:var n=s.getStatus();St(Xn,'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0?a(new Rt(function(t){switch(t){case 200:return xt.OK;case 400:return xt.INVALID_ARGUMENT;case 401:return xt.UNAUTHENTICATED;case 403:return xt.PERMISSION_DENIED;case 404:return xt.NOT_FOUND;case 409:return xt.ABORTED;case 416:return xt.OUT_OF_RANGE;case 429:return xt.RESOURCE_EXHAUSTED;case 499:return xt.CANCELLED;case 500:return xt.UNKNOWN;case 501:return xt.UNIMPLEMENTED;case 503:return xt.UNAVAILABLE;case 504:return xt.DEADLINE_EXCEEDED;default:return t>=200&&t<300?xt.OK:t>=400&&t<500?xt.FAILED_PRECONDITION:t>=500&&t<600?xt.INTERNAL:xt.UNKNOWN}}(n),"Server responded with status "+s.getStatusText())):(St(Xn,'RPC "'+t+'" failed'),a(new Rt(xt.UNAVAILABLE,"Connection failed.")));break;default:At('RPC "'+t+'" failed with unanticipated webchannel error '+s.getLastErrorCode()+": "+s.getLastError()+", giving up.")}}finally{St(Xn,'RPC "'+t+'" completed.'),r.pool.releaseObject(s)}});var u=JSON.stringify(e);St(Xn,"XHR sending: ",i+" "+u);var c={"Content-Type":"text/plain"};r.modifyHeadersForRequest(c,n),s.send(i,"POST",u,c,15)})})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1beta1.Firestore","/",t,"/channel"],r=Object(zn.createWebChannelTransport)(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},httpHeadersOverwriteParam:"$httpHeaders",messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0};this.modifyHeadersForRequest(i.initMessageHeaders,e);var o=n.join("");St(Xn,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),s=!1,u=!1,c=new Qn({sendFn:function(t){u?St(Xn,"Not sending because WebChannel is closed:",t):(s||(St(Xn,"Opening WebChannel transport."),a.open(),s=!0),St(Xn,"WebChannel sending:",t),a.send(t))},closeFn:function(){return a.close()}}),l=function(t,e){a.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})};return l(zn.WebChannel.EventType.OPEN,function(){u||St(Xn,"WebChannel transport opened.")}),l(zn.WebChannel.EventType.CLOSE,function(){u||(u=!0,St(Xn,"WebChannel transport closed"),c.callOnClose())}),l(zn.WebChannel.EventType.ERROR,function(t){u||(u=!0,St(Xn,"WebChannel transport errored:",t),c.callOnClose(new Rt(xt.UNAVAILABLE,"The operation could not be completed")))}),l(zn.WebChannel.EventType.MESSAGE,function(t){if(!u){var e=t.data[0];kt(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){St(Xn,"WebChannel received error:",n);var r=n.status,i=function(t){var e=rn[r];if(void 0!==e)return vn(e)}(),o=n.message;void 0===i&&(i=xt.INTERNAL,o="Unknown error status: "+r+" with message "+n.message),u=!0,c.callOnClose(new Rt(i,o)),a.close()}else St(Xn,"WebChannel received:",e),c.callOnMessage(e)}}),setTimeout(function(){c.callOnOpen()},0),c},t.prototype.makeUrl=function(t){var e=Yn[t];kt(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1beta1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}();Ot.setPlatform(new(function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return t.prototype.loadConnection=function(t){return Promise.resolve(new Zn(t))},t.prototype.newSerializer=function(t){return new Gn(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}()));var $n,tr=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(e,n,r,i){if(!(t instanceof Array)||t.length<1)throw new Rt(xt.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+$t(1,"element")+".")}();for(var n=0;n<t.length;++n)if(qt("FieldPath","string",n,t[n]),0===t[n].length)throw new Rt(xt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pe(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Jt("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(pe.keyField().canonicalString()),t}(),er=new RegExp("[~\\*/\\[\\]]");!function(t){t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline"}($n||($n={}));var nr=function(t){return t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata",t}({}),rr=function(t){return t[t.Local=0]="Local",t[t.Synced=1]="Synced",t}({}),ir=function(){function t(){this.changeMap=new me(de.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==nr.Added&&n.type===nr.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===nr.Metadata&&n.type!==nr.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===nr.Modified&&n.type===nr.Modified?this.changeMap=this.changeMap.insert(e,{type:nr.Modified,doc:t.doc}):t.type===nr.Modified&&n.type===nr.Added?this.changeMap=this.changeMap.insert(e,{type:nr.Added,doc:t.doc}):t.type===nr.Removed&&n.type===nr.Added?this.changeMap=this.changeMap.remove(e):t.type===nr.Removed&&n.type===nr.Modified?this.changeMap=this.changeMap.insert(e,{type:nr.Removed,doc:n.doc}):t.type===nr.Added&&n.type===nr.Removed?this.changeMap=this.changeMap.insert(e,{type:nr.Modified,doc:t.doc}):At("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal(function(e,n){t.push(n)}),t},t}(),or=function(){function t(t,e,n,r,i,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.fromCache=i,this.hasPendingWrites=o,this.syncStateChanged=a}return t.prototype.isEqual=function(t){if(this.fromCache!==t.fromCache||this.hasPendingWrites!==t.hasPendingWrites||this.syncStateChanged!==t.syncStateChanged||!this.query.isEqual(t.query)||!this.docs.isEqual(t.docs)||!this.oldDocs.isEqual(t.oldDocs))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ar=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||de.comparator(e.key,n.key)}:function(t,e){return de.comparator(t.key,e.key)},this.keyedMap=Tn(),this.sortedSet=new me(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),sr=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[1];if(o[0].isEqual(t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Lt(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return jt(this.inner)},t}(),ur=function(){function t(t){this.syncEngine=t,this.queries=new sr(function(t){return t.canonicalId()}),this.onlineState=$n.Unknown,this.syncEngine.subscribe(this.onChange.bind(this),this.onError.bind(this))}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new function(){this.listeners=[]},this.queries.set(e,r)),r.listeners.push(t),t.applyOnlineStateChange(this.onlineState),r.viewSnap&&t.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t,t}):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return o.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return o.__generator(this,function(o){return n=!1,(r=this.queries.get(e=t.query))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},t.prototype.onChange=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=this.queries.get(r.query);if(i){for(var o=0,a=i.listeners;o<a.length;o++)a[o].onViewSnapshot(r);i.viewSnap=r}}},t.prototype.onError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.queries.delete(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.queries.forEach(function(e,n){for(var r=0,i=n.listeners;r<i.length;r++)i[r].applyOnlineStateChange(t)})},t}(),cr=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.onlineState=$n.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(kt(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeDocumentMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==nr.Metadata&&e.push(i)}t=new or(t.query,t.docs,t.oldDocs,e,t.fromCache,t.hasPendingWrites,t.syncStateChanged)}this.raisedInitialEvent?this.shouldRaiseEvent(t)&&this.queryObserver.next(t):this.shouldRaiseInitialEvent(t,this.onlineState)&&this.raiseInitialEvent(t),this.snap=t},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&this.raiseInitialEvent(this.snap)},t.prototype.shouldRaiseInitialEvent=function(t,e){return kt(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache||(this.options.waitForSyncWhenOnline&&e!==$n.Offline?(kt(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===$n.Offline)},t.prototype.shouldRaiseEvent=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeQueryMetadataChanges},t.prototype.raiseInitialEvent=function(e){kt(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=new or(e.query,e.docs,ar.emptySet(e.docs),t.getInitialViewChanges(e),e.fromCache,e.hasPendingWrites,!0),this.raisedInitialEvent=!0,this.queryObserver.next(e)},t.getInitialViewChanges=function(t){var e=[];return t.docs.forEach(function(t){e.push({type:nr.Added,doc:t})}),e},t}(),lr=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&At("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return e.reduce(function(t,e,n){return t.next(function(){return e})},t.resolve())},t.map=function(e){var n=[],r=!0,i=t.resolve(null);return e.reduce(function(t,e){return t.next(function(t){return r||n.push(t),r=!1,e})},i).next(function(t){return n.push(t),n})},t}(),hr=function(){function t(){this.isEager=!0,this.sources=[],this.potentialGarbage=An()}return t.prototype.addGarbageSource=function(t){this.sources.push(t),t.setGarbageCollector(this)},t.prototype.removeGarbageSource=function(t){this.sources.splice(this.sources.indexOf(t),1),t.setGarbageCollector(null)},t.prototype.addPotentialGarbageKey=function(t){this.potentialGarbage=this.potentialGarbage.add(t)},t.prototype.collectGarbage=function(t){var e=this,n=[],r=An();return this.potentialGarbage.forEach(function(i){var o=e.documentHasAnyReferences(t,i);n.push(o.next(function(t){return t||(r=r.add(i)),lr.resolve()}))}),this.potentialGarbage=An(),lr.waitFor(n).next(function(){return r})},t.prototype.documentHasAnyReferences=function(t,e){var n=lr.resolve(!1);return this.sources.map(function(n){return function(){return n.containsKey(t,e)}}).reduce(function(t,e){return t.next(function(t){return t?lr.resolve(!0):e()})},n)},t}(),fr=function(){function t(t,e,n){this.query=t,this.addedKeys=e,this.removedKeys=n}return t.fromSnapshot=function(e){for(var n=An(),r=An(),i=0,o=e.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case nr.Added:n=n.add(a.doc.key);break;case nr.Removed:r=r.add(a.doc.key)}}return new t(e.query,n,r)},t}(),pr=function(){function t(){this.refsByKey=new bn(dr.compareByKey),this.refsByTarget=new bn(dr.compareByTargetId),this.garbageCollector=null}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new dr(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new dr(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=de.EMPTY,r=new dr(n,t),i=new dr(n,t+1);this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t)})},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t),null!==this.garbageCollector&&this.garbageCollector.addPotentialGarbageKey(t.key)},t.prototype.referencesForId=function(t){var e=de.EMPTY,n=new dr(e,t),r=new dr(e,t+1),i=An();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.setGarbageCollector=function(t){this.garbageCollector=t},t.prototype.containsKey=function(t,e){var n=new dr(e,0),r=this.refsByKey.firstAfterOrEqual(n);return lr.resolve(null!==r&&e.isEqual(r.key))},t}(),dr=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return de.comparator(t.key,e.key)||ee(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return ee(t.targetOrBatchId,e.targetOrBatchId)||de.comparator(t.key,e.key)},t}(),yr=1,gr=function(t){return t[t.LocalStore=0]="LocalStore",t[t.SyncEngine=1]="SyncEngine",t}({}),mr=function(){function t(t,e){void 0===e&&(e=0),this.generatorId=t;var n=e>>yr<<yr;this.previousId=e-n>=t?n|this.generatorId:(n|this.generatorId)-(1<<yr)}return t.prototype.next=function(){return this.previousId+=1<<yr,this.previousId},t.forLocalStore=function(e){return void 0===e&&(e=0),new t(gr.LocalStore,e)},t.forSyncEngine=function(){return new t(gr.SyncEngine)},t}(),vr=function(t){this.key=t},br=function(t){this.key=t},wr=function(){function t(t,e){this.query=t,this.syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=An(),this.mutatedKeys=An(),this.documentSet=new ar(t.docComparator.bind(t))}return t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new ir,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(t.inorderTraversal(function(t,e){var c=i.get(t),l=e instanceof ye?e:null;if(l&&(kt(t.isEqual(l.key),"Mismatching keys found in document changes: "+t+" != "+l.key),l=n.query.matches(l)?l:null),l?(a=a.add(l),o=l.hasLocalMutations?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)),c&&l){var h=c.data.isEqual(l.data);h&&c.hasLocalMutations===l.hasLocalMutations||(r.track(h?{type:nr.Metadata,doc:l}:{type:nr.Modified,doc:l}),u&&n.query.docComparator(l,u)>0&&(s=!0))}else!c&&l?r.track({type:nr.Added,doc:l}):c&&!l&&(r.track({type:nr.Removed,doc:c}),u&&(s=!0))}),this.query.hasLimit())for(;a.size>this.query.limit;){var c=a.last();a=a.delete(c.key),r.track({type:nr.Removed,doc:c})}return kt(!s||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},t.prototype.applyChanges=function(t,e){var n=this;kt(!t.needsRefill,"Cannot apply changes that need a refill");var r=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var i=t.changeSet.getChanges();i.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case nr.Added:return 1;case nr.Modified:case nr.Metadata:return 2;case nr.Removed:return 0;default:return At("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||n.query.docComparator(t.doc,e.doc)}),this.applyTargetChange(e);var o=this.updateLimboDocuments(),a=0===this.limboDocuments.size&&this.current?rr.Synced:rr.Local,s=a!==this.syncState;return this.syncState=a,0!==i.length||s?{snapshot:new or(this.query,t.documentSet,r,i,a===rr.Local,!t.mutatedKeys.isEmpty(),s),limboChanges:o}:{limboChanges:o}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===$n.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new ir,mutatedKeys:this.mutatedKeys,needsRefill:!1})):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this.syncedDocuments.has(t)&&!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations},t.prototype.applyTargetChange=function(t){if(t){var e=t.mapping;switch(e instanceof xn?this.syncedDocuments=e.documents:e instanceof Rn&&(this.syncedDocuments=e.applyToKeySet(this.syncedDocuments)),t.currentStatusUpdate){case kn.MarkCurrent:this.current=!0;break;case kn.MarkNotCurrent:this.current=!1;break;case kn.None:break;default:At("Unknown current status update: "+t.currentStatusUpdate)}}},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=An(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var n=[];return e.forEach(function(e){t.limboDocuments.has(e)||n.push(new br(e))}),this.limboDocuments.forEach(function(t){e.has(t)||n.push(new vr(t))}),n},t}(),_r=function(){function t(t,e,n){this.localStore=t,this.remoteStore=e,this.currentUser=n,this.viewHandler=null,this.errorHandler=null,this.queryViewsByQuery=new sr(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new me(de.comparator),this.limboKeysByTarget={},this.limboDocumentRefs=new pr,this.limboCollector=new hr,this.mutationUserCallbacks={},this.targetIdGenerator=mr.forSyncEngine()}return t.prototype.subscribe=function(t,e){kt(null!==t&&null!==e,"View and error handlers cannot be null"),kt(null===this.viewHandler&&null===this.errorHandler,"SyncEngine already has a subscriber."),this.viewHandler=t,this.errorHandler=e,this.limboCollector.addGarbageSource(this.limboDocumentRefs)},t.prototype.listen=function(t){var e=this;return this.assertSubscribed("listen()"),kt(!this.queryViewsByQuery.has(t),"We already listen to the query: "+t),this.localStore.allocateQuery(t).then(function(n){return e.localStore.executeQuery(t).then(function(r){return e.localStore.remoteDocumentKeys(n.targetId).then(function(i){var o=new wr(t,i),a=o.computeDocChanges(r),s=o.applyChanges(a);kt(0===s.limboChanges.length,"View returned limbo docs before target ack from the server."),kt(!!s.snapshot,"applyChanges for new view should always return a snapshot");var u=new function(t,e,n,r){this.query=t,this.targetId=e,this.resumeToken=n,this.view=r}(t,n.targetId,n.resumeToken,o);e.queryViewsByQuery.set(t,u),e.queryViewsByTarget[n.targetId]=u,e.viewHandler([s.snapshot]),e.remoteStore.listen(n)})}).then(function(){return n.targetId})})},t.prototype.unlisten=function(t){var e=this;this.assertSubscribed("unlisten()");var n=this.queryViewsByQuery.get(t);return kt(!!n,"Trying to unlisten on query not found:"+t),this.localStore.releaseQuery(t).then(function(){return e.remoteStore.unlisten(n.targetId),e.removeAndCleanupQuery(n).then(function(){return e.localStore.collectGarbage()})})},t.prototype.write=function(t,e){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(t).then(function(t){return n.addMutationCallback(t.batchId,e),n.emitNewSnapsAndNotifyLocalStore(t.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},t.prototype.wrapUpdateFunctionError=function(t){return t},t.prototype.runTransaction=function(t,e){var n=this;void 0===e&&(e=5),kt(e>=0,"Got negative number of retries for transaction.");var r=this.remoteStore.createTransaction();return function(){try{var e=t(r);return!qe(e)&&e.catch&&e.then?e.catch(function(t){return Promise.reject(n.wrapUpdateFunctionError(t))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(t){return Promise.reject(n.wrapUpdateFunctionError(t))}}().then(function(i){return r.commit().then(function(){return i}).catch(function(r){return 0===e?Promise.reject(r):n.runTransaction(t,e-1)})})},t.prototype.applyRemoteEvent=function(t){var e=this;return this.assertSubscribed("applyRemoteEvent()"),Mt(t.targetChanges,function(n,r){var i=e.limboKeysByTarget[n];i&&r.currentStatusUpdate===kn.MarkCurrent&&!t.documentUpdates.get(i)&&t.addDocumentUpdate(new ge(i,t.snapshotVersion))}),this.localStore.applyRemoteEvent(t).then(function(n){return e.emitNewSnapsAndNotifyLocalStore(n,t)})},t.prototype.applyOnlineStateChange=function(t){var e=[];this.queryViewsByQuery.forEach(function(n,r){var i=r.view.applyOnlineStateChange(t);kt(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&e.push(i.snapshot)}),this.viewHandler(e)},t.prototype.rejectListen=function(t,e){var n=this;this.assertSubscribed("rejectListens()");var r=this.limboKeysByTarget[t];if(r){this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboKeysByTarget[t];var i=new me(de.comparator);i=i.insert(r,new ge(r,nn.forDeletedDoc()));var o=new On(nn.MIN,{},i);return this.applyRemoteEvent(o)}var a=this.queryViewsByTarget[t];return kt(!!a,"Unknown targetId: "+t),this.localStore.releaseQuery(a.query).then(function(){return n.removeAndCleanupQuery(a).then(function(){n.errorHandler(a.query,e)})})},t.prototype.applySuccessfulWrite=function(t){var e=this;return this.assertSubscribed("applySuccessfulWrite()"),this.processUserCallback(t.batch.batchId,null),this.localStore.acknowledgeBatch(t).then(function(t){return e.emitNewSnapsAndNotifyLocalStore(t)})},t.prototype.rejectFailedWrite=function(t,e){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.localStore.rejectBatch(t).then(function(t){return n.emitNewSnapsAndNotifyLocalStore(t)})},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new me(ee)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(kt(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){return this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.limboDocumentRefs.removeReferencesForId(t.targetId),this.gcLimboDocuments()},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof vr?(this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i)):i instanceof br?(St("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t)):At("Unknown limbo change: "+JSON.stringify(i))}return this.gcLimboDocuments()},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){St("SyncEngine","New document in limbo: "+e);var n=this.targetIdGenerator.next(),r=We.atPath(e.path);this.limboKeysByTarget[n]=e,this.remoteStore.listen(new on(r,n,He.Listen)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.gcLimboDocuments=function(){var t=this;return this.limboCollector.collectGarbage(null).next(function(e){e.forEach(function(e){var n=t.limboTargetsByKey.get(e);null!==n&&(t.remoteStore.unlisten(n),t.limboTargetsByKey=t.limboTargetsByKey.remove(e),delete t.limboKeysByTarget[n])})}).toPromise()},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){var n=this,r=[],i=[],o=[];return this.queryViewsByQuery.forEach(function(a,s){o.push(Promise.resolve().then(function(){var e=s.view.computeDocChanges(t);return e.needsRefill?n.localStore.executeQuery(s.query).then(function(t){return s.view.computeDocChanges(t,e)}):e}).then(function(t){var o=s.view.applyChanges(t,e&&e.targetChanges[s.targetId]);return n.updateTrackedLimbos(s.targetId,o.limboChanges).then(function(){if(o.snapshot){r.push(o.snapshot);var t=fr.fromSnapshot(o.snapshot);i.push(t)}})}))}),Promise.all(o).then(function(){return n.viewHandler(r),n.localStore.notifyLocalViewChanges(i)}).then(function(){return n.localStore.collectGarbage()})},t.prototype.assertSubscribed=function(t){kt(null!==this.viewHandler&&null!==this.errorHandler,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleUserChange=function(t){var e=this;return this.currentUser=t,this.localStore.handleUserChange(t).then(function(t){return e.emitNewSnapsAndNotifyLocalStore(t)}).then(function(){return e.remoteStore.handleUserChange(t)})},t}(),Er=-1,Tr=function(){function t(t,e,n){this.batchId=t,this.localWriteTime=e,this.mutations=n}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&kt(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;kt(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=o.applyToRemoteDocument(e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){e&&kt(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=e,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t)&&(e=i.applyToLocalView(e,n,this.localWriteTime))}return e},t.prototype.keys=function(){for(var t=An(),e=0,n=this.mutations;e<n.length;e++)t=t.add(n[e].key);return t},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&ne(this.mutations,t.mutations)},t.prototype.isTombstone=function(){return 0===this.mutations.length},t.prototype.toTombstone=function(){return new t(this.batchId,this.localWriteTime,[])},t}(),Sr=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){kt(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=In(),a=e.mutations,s=0;s<a.length;s++){var u=r[s].version;null===u&&(u=n),o=o.insert(a[s].key,u)}return new t(e,n,r,i,o)},t}(),Ir="\x01",Cr="\x01",Ar="\x10",kr="\x11";function Or(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=xr(e)),e=Nr(t.get(n),e);return xr(e)}function Nr(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=Ir+Ar;break;case Ir:n+=Ir+kr;break;default:n+=o}}return n}function xr(t){return t+Ir+Cr}function Rr(t){var e=t.length;if(kt(e>=2,"Invalid path "+t),2===e)return kt(t.charAt(0)===Ir&&t.charAt(1)===Cr,"Non-empty path "+t+" had length 2"),he.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf(Ir,o);switch((a<0||a>n)&&At('Invalid encoded resource path: "'+t+'"'),t.charAt(a+1)){case Cr:var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case Ar:i+=t.substring(o,a),i+="\0";break;case kr:i+=t.substring(o,a+1);break;default:At('Invalid encoded resource path: "'+t+'"')}o=a+2}return new he(r)}function Dr(t,e,n,r){kt(n<r&&n>=0&&r<=2,"Unexpected schema upgrade from v${fromVersion} to v{toVersion}."),n<1&&r>=1&&(function(t){t.createObjectStore(Mr.store)}(t),function(t){t.createObjectStore(Lr.store,{keyPath:Lr.keyPath}),t.createObjectStore(jr.store,{keyPath:jr.keyPath}),t.createObjectStore(Vr.store)}(t),function(t){t.createObjectStore(Br.store,{keyPath:Br.keyPath}).createIndex(Br.documentTargetsIndex,Br.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Fr.store,{keyPath:Fr.keyPath}).createIndex(Fr.queryTargetsIndexName,Fr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(qr.store)}(t),function(t){t.createObjectStore(Ur.store)}(t));var i=lr.resolve();return n<2&&r>=2&&(i=function(t){var e=t.store(qr.store);return e.get(qr.key).next(function(t){return null!=t?lr.resolve(t):(t=new qr(0,0,nn.MIN.toTimestamp(),0),e.put(qr.key,t).next(function(){return t}))})}(e).next(function(t){return function(t,e){var n=t.store(qr.store);return t.store(Fr.store).count().next(function(t){return e.targetCount=t,n.put(qr.key,e)})}(e,t)})),i}var Pr=function(t,e){this.seconds=t,this.nanos=e},Mr=function(){function t(t,e){this.ownerId=t,this.leaseTimestampMs=e}return t.store="owner",t}(),Lr=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),jr=function(){function t(t,e,n,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.mutations=r}return t.store="mutations",t.keyPath=["userId","batchId"],t}(),Vr=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Or(e)]},t.key=function(t,e,n){return[t,Or(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),Ur=function(){function t(t,e){this.noDocument=t,this.document=e}return t.store="remoteDocuments",t}(),Fr=function(){function t(t,e,n,r,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),Br=function(){function t(t,e){this.targetId=t,this.path=e}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),qr=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),Hr=[Lr.store,jr.store,Vr.store,Ur.store,Fr.store,Mr.store,qr.store,Br.store],Wr=function(){function t(t){this.db=t}return t.openOrCreate=function(e,n,r){return kt(t.isAvailable(),"IndexedDB not supported in current environment."),St("SimpleDb","Opening database:",e),new lr(function(i,o){var a=window.indexedDB.open(e,n);a.onsuccess=function(e){i(new t(e.target.result))},a.onerror=function(t){o(t.target.error)},a.onupgradeneeded=function(t){St("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result,i=new Kr(a.transaction);r(n,i,t.oldVersion,2).next(function(){St("SimpleDb","Database upgrade to version 2 complete")})}}).toPromise()},t.delete=function(t){return St("SimpleDb","Removing database:",t),Qr(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;var t=window.navigator.userAgent;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0)},t.prototype.runTransaction=function(t,e,n){var r=Kr.open(this.db,t,e),i=n(r).catch(function(t){return r.abort(),lr.reject(t)}).toPromise();return r.completionPromise.then(function(){return i})},t.prototype.close=function(){this.db.close()},t}(),Gr=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return Qr(this.dbCursor.delete())},t}(),Kr=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionPromise=new Promise(function(t,n){e.transaction.onabort=e.transaction.oncomplete=function(e){t()},e.transaction.onerror=function(t){n(t.target.error)}})}return t.open=function(e,n,r){return new t(e.transaction(r,n))},t.prototype.abort=function(){this.aborted||(St("SimpleDb","Aborting transaction."),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return kt(!!e,"Object store not part of transaction: "+t),new zr(e)},t}(),zr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(St("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(St("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Qr(n)},t.prototype.get=function(t){var e=this;return Qr(this.store.get(t)).next(function(n){return void 0===n&&(n=null),St("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return St("SimpleDb","DELETE",this.store.name,t),Qr(this.store.delete(t))},t.prototype.count=function(){return St("SimpleDb","COUNT",this.store.name),Qr(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.deleteAll=function(t,e){St("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateCursor=function(t,e){var n=[];return new lr(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Gr(i),a=e(i.primaryKey,i.value,o);a instanceof lr&&n.push(a),o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return lr.waitFor(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(kt(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Qr(t){return new lr(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){n(t.target.error)}})}var Xr=function(){function t(t,e){this.userId=t,this.serializer=e,this.garbageCollector=null}return t.forUser=function(e,n){return kt(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n)},t.prototype.start=function(e){var n=this;return t.loadNextBatchIdFromDb(e).next(function(t){return n.nextBatchId=t,$r(e).get(n.userId)}).next(function(t){return t||(t=new Lr(n.userId,Er,"")),n.metadata=t,n.metadata.lastAcknowledgedBatchId>=n.nextBatchId?n.checkEmpty(e).next(function(t){return kt(t,"Reset nextBatchID is only possible when the queue is empty"),n.metadata.lastAcknowledgedBatchId=Er,$r(e).put(n.metadata)}):lr.resolve()})},t.loadNextBatchIdFromDb=function(t){var e=Er;return Jr(t).iterate({reverse:!0},function(t,n,r){var i,o,a=t[0];if(t[1]>e&&(e=n.batchId),""===a)r.done();else{var s=(o=(i=a).length-1,0===i.length?"":"\0"===i.charAt(o)?i.substring(0,o):i.substring(0,o)+String.fromCharCode(i.charCodeAt(o)-1));r.skip([s])}}).next(function(){return e+1})},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound(this.keyForBatchId(Number.NEGATIVE_INFINITY),this.keyForBatchId(Number.POSITIVE_INFINITY));return Jr(t).iterate({range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.getNextBatchId=function(t){return lr.resolve(this.nextBatchId)},t.prototype.getHighestAcknowledgedBatchId=function(t){return lr.resolve(this.metadata.lastAcknowledgedBatchId)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId;return kt(r>this.metadata.lastAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order"),this.metadata.lastAcknowledgedBatchId=r,this.metadata.lastStreamToken=Yr(n),$r(t).put(this.metadata)},t.prototype.getLastStreamToken=function(t){return lr.resolve(this.metadata.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.metadata.lastStreamToken=Yr(e),$r(t).put(this.metadata)},t.prototype.addMutationBatch=function(t,e,n){var r=this,i=this.nextBatchId;this.nextBatchId++;var o=new Tr(i,e,n),a=this.serializer.toDbMutationBatch(this.userId,o);return Jr(t).put(a).next(function(){for(var e=0,o=n;e<o.length;e++){var a=Vr.key(r.userId,o[e].key.path,i);Zr(t).put(a,Vr.PLACEHOLDER)}return lr.waitFor([])}).next(function(){return o})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Jr(t).get(this.keyForBatchId(e)).next(function(t){return t?n.serializer.fromDbMutationBatch(t):null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=Math.max(e,this.metadata.lastAcknowledgedBatchId)+1,i=IDBKeyRange.lowerBound(this.keyForBatchId(r)),o=null;return Jr(t).iterate({range:i},function(t,e,i){e.userId===n.userId&&(kt(e.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(e)),i.done()}).next(function(){return o})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound(this.keyForBatchId(Er),this.keyForBatchId(Number.POSITIVE_INFINITY));return Jr(t).loadAll(n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesThroughBatchId=function(t,e){var n=this,r=IDBKeyRange.bound(this.keyForBatchId(Er),this.keyForBatchId(e));return Jr(t).loadAll(r).next(function(t){return t.map(function(t){return n.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Vr.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Zr(t).iterate({range:i},function(r,i,a){var s=r[0],u=r[2],c=Rr(r[1]);if(s===n.userId&&e.path.isEqual(c)){var l=n.keyForBatchId(u);return Jr(t).get(l).next(function(t){null===t&&At("Dangling document-mutation reference found: "+r+" which points to "+l),o.push(n.serializer.fromDbMutationBatch(t))})}a.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;kt(!e.isDocumentQuery(),"Document queries shouldn't go down this path");var r=e.path,i=r.length+1,o=Vr.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new bn(ee);return Zr(t).iterate({range:a},function(t,e,o){var a=t[0],u=t[2],c=Rr(t[1]);a===n.userId&&r.isPrefixOf(c)?c.length===i&&(s=s.add(u)):o.done()}).next(function(){var e=[],r=[];return s.forEach(function(i){var o=n.keyForBatchId(i);r.push(Jr(t).get(o).next(function(t){null===t&&At("Dangling document-mutation reference found, which points to "+o),e.push(n.serializer.fromDbMutationBatch(t))}))}),lr.waitFor(r).next(function(){return e})})},t.prototype.removeMutationBatches=function(t,e){for(var n=Jr(t),r=Zr(t),i=[],o=function(t){var e=IDBKeyRange.only(a.keyForBatchId(t.batchId)),o=0,s=n.iterate({range:e},function(t,e,n){return o++,n.delete()});i.push(s.next(function(){kt(1===o,"Dangling document-mutation reference found: Missing batch "+t.batchId)}));for(var u=0,c=t.mutations;u<c.length;u++){var l=c[u],h=Vr.key(a.userId,l.key.path,t.batchId);i.push(r.delete(h)),null!==a.garbageCollector&&a.garbageCollector.addPotentialGarbageKey(l.key)}},a=this,s=0,u=e;s<u.length;s++)o(u[s]);return lr.waitFor(i)},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return lr.resolve();var r=IDBKeyRange.lowerBound(Vr.prefixForUser(e.userId)),i=[];return Zr(t).iterate({range:r},function(t,n,r){if(t[0]===e.userId){var o=Rr(t[1]);i.push(o)}else r.done()}).next(function(){kt(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},t.prototype.setGarbageCollector=function(t){this.garbageCollector=t},t.prototype.containsKey=function(t,e){var n=this,r=Vr.prefixForPath(this.userId,e.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Zr(t).iterate({range:o,keysOnly:!0},function(t,e,r){t[0]===n.userId&&t[1]===i&&(a=!0),r.done()}).next(function(){return a})},t.prototype.keyForBatchId=function(t){return[this.userId,t]},t}();function Yr(t){return kt("string"==typeof t,"Persisting non-string stream token not supported."),t}function Jr(t){return ti(t,jr.store)}function Zr(t){return ti(t,Vr.store)}function $r(t){return ti(t,Lr.store)}function ti(t,e){return t instanceof Kr?t.store(e):At("Invalid transaction object provided!")}var ei=function(){function t(t){this.serializer=t,this.lastRemoteSnapshotVersion=nn.MIN,this.metadata=null,this.garbageCollector=null}return t.prototype.start=function(t){var e=this;return ri(t).get(qr.key).next(function(t){kt(null!==t,"Missing metadata row that should be added by schema migration."),e.metadata=t;var n=t.lastRemoteSnapshotVersion;return e.lastRemoteSnapshotVersion=nn.fromTimestamp(new en(n.seconds,n.nanos)),lr.resolve()})},t.prototype.getHighestTargetId=function(){return this.metadata.highestTargetId},t.prototype.getLastRemoteSnapshotVersion=function(){return this.lastRemoteSnapshotVersion},t.prototype.setLastRemoteSnapshotVersion=function(t,e){return this.lastRemoteSnapshotVersion=e,this.metadata.lastRemoteSnapshotVersion=e.toTimestamp(),ri(t).put(qr.key,this.metadata)},t.prototype.addQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.metadata.targetCount+=1,n.updateMetadataFromQueryData(e),n.saveMetadata(t)})},t.prototype.updateQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.updateMetadataFromQueryData(e)?n.saveMetadata(t):lr.resolve()})},t.prototype.removeQueryData=function(t,e){var n=this;return kt(this.metadata.targetCount>0,"Removing from an empty query cache"),this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return ni(t).delete(e.targetId)}).next(function(){return n.metadata.targetCount-=1,n.saveMetadata(t)})},t.prototype.saveMetadata=function(t){return ri(t).put(qr.key,this.metadata)},t.prototype.saveQueryData=function(t,e){return ni(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t){var e=!1;return t.targetId>this.metadata.highestTargetId&&(this.metadata.highestTargetId=t.targetId,e=!0),e},Object.defineProperty(t.prototype,"count",{get:function(){return this.metadata.targetCount},enumerable:!0,configurable:!0}),t.prototype.getQueryData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ni(t).iterate({range:i,index:Fr.queryTargetsIndexName},function(t,r,i){var a=n.serializer.fromDbTarget(r);e.isEqual(a.query)&&(o=a,i.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(t,e,n){var r=[],i=ii(t);return e.forEach(function(t){var e=Or(t.path);r.push(i.put(new Br(n,e)))}),lr.waitFor(r)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=[],o=ii(t);return e.forEach(function(t){var e=Or(t.path);i.push(o.delete([n,e])),null!==r.garbageCollector&&r.garbageCollector.addPotentialGarbageKey(t)}),lr.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=ii(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return this.notifyGCForRemovedKeys(t,r).next(function(){return n.delete(r)})},t.prototype.notifyGCForRemovedKeys=function(t,e){var n=this,r=ii(t);return null!==this.garbageCollector&&this.garbageCollector.isEager?r.iterate({range:e,keysOnly:!0},function(t,e,r){var i=Rr(t[1]),o=new de(i);kt(null!==n.garbageCollector,"GarbageCollector for query cache set to null during key removal."),n.garbageCollector.addPotentialGarbageKey(o)}):lr.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ii(t),i=An();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=Rr(t[1]),o=new de(r);i=i.add(o)}).next(function(){return i})},t.prototype.setGarbageCollector=function(t){this.garbageCollector=t},t.prototype.containsKey=function(t,e){kt(null!==t,"Persistence Transaction cannot be null for query cache containsKey");var n,r=Or(e.path),i=IDBKeyRange.bound([r],[(n=r,n+"\0")],!1,!0),o=0;return ii(t).iterate({index:Br.documentTargetsIndex,keysOnly:!0,range:i},function(t,e,n){o++,n.done()}).next(function(){return o>0})},t}();function ni(t){return oi(t,Fr.store)}function ri(t){return oi(t,qr.store)}function ii(t){return oi(t,Br.store)}function oi(t,e){return t instanceof Kr?t.store(e):At("Invalid transaction object provided!")}var ai=function(){function t(t){this.serializer=t}return t.prototype.addEntry=function(t,e){return si(t).put(ui(e.key),this.serializer.toDbRemoteDocument(e))},t.prototype.removeEntry=function(t,e){return si(t).delete(ui(e))},t.prototype.getEntry=function(t,e){var n=this;return si(t).get(ui(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},t.prototype.getDocumentsMatchingQuery=function(t,e){var n=this,r=Tn(),i=e.path.toArray(),o=IDBKeyRange.lowerBound(i);return si(t).iterate({range:o},function(t,i,o){var a=n.serializer.fromDbRemoteDocument(i);e.path.isPrefixOf(a.key.path)?a instanceof ye&&e.matches(a)&&(r=r.insert(a.key,a)):o.done()}).next(function(){return r})},t}();function si(t){return t instanceof Kr?t.store(Ur.store):At("Invalid transaction object provided!")}function ui(t){return t.path.toArray()}var ci,li=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document);if(t.noDocument){var e=de.fromSegments(t.noDocument.path),n=t.noDocument.readTime,r=new en(n.seconds,n.nanos);return new ge(e,nn.fromTimestamp(r))}return At("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t){if(t instanceof ye){var e=this.remoteSerializer.toDocument(t);return new Ur(null,e)}var n=t.key.path.toArray(),r=t.version.toTimestamp(),i=new Pr(r.seconds,r.nanos);return new Ur(new function(t,e){this.path=t,this.readTime=e}(n,i),null)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new jr(t,e.batchId,e.localWriteTime.toEpochMilliseconds(),r)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),r=en.fromEpochMilliseconds(t.localWriteTimeMs);return new Tr(t.batchId,r,n)},t.prototype.fromDbTarget=function(t){var e,n=new en(t.readTime.seconds,t.readTime.nanos),r=nn.fromTimestamp(n);return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new on(e,t.targetId,He.Listen,r,t.resumeToken)},t.prototype.toDbTarget=function(t){kt(He.Listen===t.purpose,"Only queries with purpose "+He.Listen+" may be stored, got "+t.purpose);var e,n=t.snapshotVersion.toTimestamp(),r=new Pr(n.seconds,n.nanos);e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),kt("string"==typeof t.resumeToken,"Persisting non-string resume token not supported.");var i=t.resumeToken;return new Fr(t.targetId,t.query.canonicalId(),r,i,0,e)},t}(),hi="There is another tab open with offline persistence enabled. Only one such tab is allowed at a time. The other tab must be closed or persistence must be disabled.",fi=function(){function t(e,n){this.ownerId=this.generateOwnerId(),this.dbName=e+t.MAIN_DATABASE,this.serializer=new li(n),this.localStoragePrefix=e}return t.prototype.start=function(){var e=this;return t.isAvailable()?(kt(!this.started,"IndexedDbPersistence double-started!"),this.started=!0,Wr.openOrCreate(this.dbName,2,Dr).then(function(t){e.simpleDb=t}).then(function(){return e.tryAcquireOwnerLease()}).then(function(){e.scheduleOwnerLeaseRefreshes(),e.attachWindowUnloadHook()})):(this.persistenceError=new Rt(xt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled."),Promise.reject(this.persistenceError))},t.prototype.shutdown=function(){var t=this;return kt(this.started,"IndexedDbPersistence shutdown without start!"),this.started=!1,this.detachWindowUnloadHook(),this.stopOwnerLeaseRefreshes(),this.releaseOwnerLease().then(function(){t.simpleDb.close()})},t.prototype.getMutationQueue=function(t){return Xr.forUser(t,this.serializer)},t.prototype.getQueryCache=function(){return new ei(this.serializer)},t.prototype.getRemoteDocumentCache=function(){return new ai(this.serializer)},t.prototype.runTransaction=function(t,e){var n=this;return this.persistenceError?Promise.reject(this.persistenceError):(St("IndexedDbPersistence","Starting transaction:",t),this.simpleDb.runTransaction("readwrite",Hr,function(t){return n.ensureOwnerLease(t).next(function(){return e(t)})}))},t.isAvailable=function(){return Wr.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.tryAcquireOwnerLease=function(){var t=this;return this.simpleDb.runTransaction("readwrite",[Mr.store],function(e){var n=e.store(Mr.store);return n.get("owner").next(function(e){if(t.validOwner(e))return St("IndexedDbPersistence","Valid owner already. Failing. Current owner:",e),t.persistenceError=new Rt(xt.FAILED_PRECONDITION,hi),lr.reject(t.persistenceError);var r=new Mr(t.ownerId,Date.now());return St("IndexedDbPersistence","No valid owner. Acquiring owner lease. Current owner:",e,"New owner:",r),n.put("owner",r)})})},t.prototype.releaseOwnerLease=function(){var t=this;return this.simpleDb.runTransaction("readwrite",[Mr.store],function(e){var n=e.store(Mr.store);return n.get("owner").next(function(e){return null!==e&&e.ownerId===t.ownerId?(St("IndexedDbPersistence","Releasing owner lease."),n.delete("owner")):lr.resolve()})})},t.prototype.ensureOwnerLease=function(t){var e=this;return t.store(Mr.store).get("owner").next(function(t){return null===t||t.ownerId!==e.ownerId?(e.persistenceError=new Rt(xt.FAILED_PRECONDITION,hi),lr.reject(e.persistenceError)):lr.resolve()})},t.prototype.validOwner=function(t){var e=Date.now();return!(null===t||t.leaseTimestampMs<e-5e3||(t.leaseTimestampMs>e?(It("Persistence owner-lease is in the future. Discarding.",t),1):t.ownerId===this.getZombiedOwnerId()))},t.prototype.scheduleOwnerLeaseRefreshes=function(){var t=this;this.ownerLeaseRefreshHandle=setInterval(function(){t.runTransaction("Refresh owner timestamp",function(e){return e.store(Mr.store).put("owner",new Mr(t.ownerId,Date.now()))}).catch(function(e){It(e),t.stopOwnerLeaseRefreshes()})},4e3)},t.prototype.stopOwnerLeaseRefreshes=function(){this.ownerLeaseRefreshHandle&&(clearInterval(this.ownerLeaseRefreshHandle),this.ownerLeaseRefreshHandle=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;this.windowUnloadHandler=function(){t.setZombiedOwnerId(t.ownerId),t.shutdown()},window.addEventListener("unload",this.windowUnloadHandler)},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.getZombiedOwnerId=function(){try{var t=window.localStorage.getItem(this.zombiedOwnerLocalStorageKey());return St("IndexedDbPersistence","Zombied ownerID from LocalStorage:",t),t}catch(t){return It("Failed to get zombie owner id.",t),null}},t.prototype.setZombiedOwnerId=function(t){try{null===t?window.localStorage.removeItem(this.zombiedOwnerLocalStorageKey()):window.localStorage.setItem(this.zombiedOwnerLocalStorageKey(),t)}catch(t){It("Failed to set zombie owner id.",t)}},t.prototype.zombiedOwnerLocalStorageKey=function(){return this.localStoragePrefix+"zombiedOwnerId"},t.prototype.generateOwnerId=function(){return te.newId()},t.MAIN_DATABASE="main",t}(),pi=function(){function t(t,e){this.remoteDocumentCache=t,this.mutationQueue=e}return t.prototype.getDocument=function(t,e){var n=this;return this.remoteDocumentCache.getEntry(t,e).next(function(r){return n.computeLocalDocument(t,e,r)})},t.prototype.getDocuments=function(t,e){var n=this,r=[],i=_n();return e.forEach(function(e){r.push(n.getDocument(t,e).next(function(t){t||(t=new ge(e,nn.forDeletedDoc())),i=i.insert(e,t)}))}),lr.waitFor(r).next(function(){return i})},t.prototype.getDocumentsMatchingQuery=function(t,e){return de.isDocumentKey(e.path)?this.getDocumentsMatchingDocumentQuery(t,e.path):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new de(e)).next(function(t){var e=Tn();return t instanceof ye&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e){var n,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e).next(function(e){return r.computeLocalDocuments(t,e)}).next(function(i){return n=i,r.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){for(var i=An(),o=0,a=e;o<a.length;o++)for(var s=0,u=a[o].mutations;s<u.length;s++){var c=u[s];n.get(c.key)||(i=i.add(c.key))}var l=[];return i.forEach(function(e){l.push(r.getDocument(t,e).next(function(t){t instanceof ye&&(n=n.insert(t.key,t))}))}),lr.waitFor(l)}).next(function(){return n.forEach(function(t,r){e.matches(r)||(n=n.remove(t))}),n})},t.prototype.computeLocalDocument=function(t,e,n){return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(t){for(var r=0,i=t;r<i.length;r++)n=i[r].applyToLocalView(e,n);return n})},t.prototype.computeLocalDocuments=function(t,e){var n=this,r=[];return e.forEach(function(i,o){r.push(n.computeLocalDocument(t,i,o).next(function(t){t instanceof ye?e=e.insert(t.key,t):t instanceof ge?e=e.remove(t.key):At("Unknown MaybeDocument: "+t)}))}),lr.waitFor(r).next(function(){return e})},t}(),di=function(){function t(t){this.remoteDocumentCache=t,this.changes=_n()}return t.prototype.addEntry=function(t){var e=this.assertChanges();this.changes=e.insert(t.key,t)},t.prototype.getEntry=function(t,e){var n=this.assertChanges().get(e);return n?lr.resolve(n):this.remoteDocumentCache.getEntry(t,e)},t.prototype.apply=function(t){var e=this,n=[];return this.assertChanges().forEach(function(r,i){n.push(e.remoteDocumentCache.addEntry(t,i))}),this.changes=null,lr.waitFor(n)},t.prototype.assertChanges=function(){return kt(null!==this.changes,"Changes have already been applied."),this.changes},t}(),yi=function(){function t(t,e,n){this.persistence=t,this.garbageCollector=n,this.localViewReferences=new pr,this.targetIds={},this.targetIdGenerator=mr.forLocalStore(),this.heldBatchResults=[],this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new pi(this.remoteDocuments,this.mutationQueue),this.garbageCollector.addGarbageSource(this.localViewReferences),this.garbageCollector.addGarbageSource(this.queryCache),this.garbageCollector.addGarbageSource(this.mutationQueue)}return t.prototype.start=function(){var t=this;return this.persistence.runTransaction("Start LocalStore",function(e){return t.startMutationQueue(e).next(function(){return t.startQueryCache(e)})})},t.prototype.handleUserChange=function(t){var e=this;return this.persistence.runTransaction("Handle user change",function(n){var r;return e.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,e.garbageCollector.removeGarbageSource(e.mutationQueue),e.mutationQueue=e.persistence.getMutationQueue(t),e.garbageCollector.addGarbageSource(e.mutationQueue),e.startMutationQueue(n)}).next(function(){return e.localDocuments=new pi(e.remoteDocuments,e.mutationQueue),e.mutationQueue.getAllMutationBatches(n)}).next(function(t){for(var i=An(),o=0,a=[r,t];o<a.length;o++)for(var s=0,u=a[o];s<u.length;s++)for(var c=0,l=u[s].mutations;c<l.length;c++)i=i.add(l[c].key);return e.localDocuments.getDocuments(n,i)})})},t.prototype.startQueryCache=function(t){var e=this;return this.queryCache.start(t).next(function(){var t=e.queryCache.getHighestTargetId();e.targetIdGenerator=mr.forLocalStore(t)})},t.prototype.startMutationQueue=function(t){var e=this;return this.mutationQueue.start(t).next(function(){return e.heldBatchResults=[],e.mutationQueue.getHighestAcknowledgedBatchId(t)}).next(function(n){return n!==Er?e.mutationQueue.getAllMutationBatchesThroughBatchId(t,n):lr.resolve([])}).next(function(n){return n.length>0?e.mutationQueue.removeMutationBatches(t,n):lr.resolve()})},t.prototype.localWrite=function(t){var e=this;return this.persistence.runTransaction("Locally write mutations",function(n){var r,i=en.now();return e.mutationQueue.addMutationBatch(n,i,t).next(function(t){var i=(r=t).keys();return e.localDocuments.getDocuments(n,i)}).next(function(t){return{batchId:r.batchId,changes:t}})})},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch",function(n){var r;return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next(function(){if(e.shouldHoldBatchResult(t.commitVersion))return e.heldBatchResults.push(t),r=An(),lr.resolve();var i=new di(e.remoteDocuments);return e.releaseBatchResults(n,[t],i).next(function(t){return r=t,i.apply(n)})}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch",function(n){var r,i;return e.mutationQueue.lookupMutationBatch(n,t).next(function(i){return kt(null!=i,"Attempt to reject nonexistent batch!"),r=i,e.mutationQueue.getHighestAcknowledgedBatchId(n).next(function(e){return kt(t>e,"Acknowledged batches can't be rejected."),r})}).next(function(){return e.removeMutationBatch(n,r)}).next(function(t){return i=t,e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,i)})})},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token",function(e){return t.mutationQueue.getLastStreamToken(e)})},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token",function(n){return e.mutationQueue.setLastStreamToken(n,t)})},t.prototype.getLastRemoteSnapshotVersion=function(){return this.queryCache.getLastRemoteSnapshotVersion()},t.prototype.applyRemoteEvent=function(t){var e=this,n=new di(this.remoteDocuments);return this.persistence.runTransaction("Apply remote event",function(r){var i=[];Mt(t.targetChanges,function(t,n){var o=e.targetIds[t];if(o){var a=n.mapping;if(a)if(a instanceof xn)i.push(e.queryCache.removeMatchingKeysForTargetId(r,t).next(function(){return e.queryCache.addMatchingKeys(r,a.documents,t)}));else{if(!(a instanceof Rn))return At("Unknown mapping type: "+JSON.stringify(a));i.push(e.queryCache.removeMatchingKeys(r,a.removedDocuments,t).next(function(){return e.queryCache.addMatchingKeys(r,a.addedDocuments,t)}))}var s=n.resumeToken;s.length>0&&(o=o.update({resumeToken:s,snapshotVersion:n.snapshotVersion}),e.targetIds[t]=o,i.push(e.queryCache.updateQueryData(r,o)))}});var o=An();t.documentUpdates.forEach(function(t,a){o=o.add(t),i.push(n.getEntry(r,t).next(function(r){null==r||a.version.isEqual(nn.MIN)||a.version.compareTo(r.version)>=0?n.addEntry(a):St("LocalStore","Ignoring outdated watch update for ",t,". Current version:",r.version," Watch version:",a.version),e.garbageCollector.addPotentialGarbageKey(t)}))});var a,s=e.queryCache.getLastRemoteSnapshotVersion(),u=t.snapshotVersion;return u.isEqual(nn.MIN)||(kt(u.compareTo(s)>=0,"Watch stream reverted to previous snapshot?? "+u+" < "+s),i.push(e.queryCache.setLastRemoteSnapshotVersion(r,u))),lr.waitFor(i).next(function(){return e.releaseHeldBatchResults(r,n)}).next(function(t){return a=t,n.apply(r)}).next(function(){return e.localDocuments.getDocuments(r,o.unionWith(a))})})},t.prototype.notifyLocalViewChanges=function(t){var e=this;return this.persistence.runTransaction("Notify local view changes",function(n){for(var r=[],i=function(t){r.push(e.queryCache.getQueryData(n,t.query).next(function(n){kt(null!==n,"Local view changes contain unallocated query.");var r=n.targetId;e.localViewReferences.addReferences(t.addedKeys,r),e.localViewReferences.removeReferences(t.removedKeys,r)}))},o=0,a=t;o<a.length;o++)i(a[o]);return lr.waitFor(r)})},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch",function(n){return void 0===t&&(t=Er),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)})},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document",function(n){return e.localDocuments.getDocument(n,t)})},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction("Allocate query",function(n){var r;return e.queryCache.getQueryData(n,t).next(function(i){if(i)return r=i,lr.resolve();var o=e.targetIdGenerator.next();return r=new on(t,o,He.Listen),e.queryCache.addQueryData(n,r)}).next(function(){return kt(!e.targetIds[r.targetId],"Tried to allocate an already allocated query: "+t),e.targetIds[r.targetId]=r,r})})},t.prototype.releaseQuery=function(t){var e=this;return this.persistence.runTransaction("Release query",function(n){return e.queryCache.getQueryData(n,t).next(function(r){return kt(null!=r,"Tried to release nonexistent query: "+t),e.localViewReferences.removeReferencesForId(r.targetId),delete e.targetIds[r.targetId],e.garbageCollector.isEager?e.queryCache.removeQueryData(n,r):lr.resolve()}).next(function(){if(jt(e.targetIds)){var t=new di(e.remoteDocuments);return e.releaseHeldBatchResults(n,t).next(function(){t.apply(n)})}return lr.resolve()})})},t.prototype.executeQuery=function(t){var e=this;return this.persistence.runTransaction("Execute query",function(n){return e.localDocuments.getDocumentsMatchingQuery(n,t)})},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys",function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)})},t.prototype.collectGarbage=function(){var t=this;return this.persistence.runTransaction("Garbage collection",function(e){return t.garbageCollector.collectGarbage(e).next(function(n){var r=[];return n.forEach(function(n){r.push(t.remoteDocuments.removeEntry(e,n))}),lr.waitFor(r)})})},t.prototype.releaseHeldBatchResults=function(t,e){for(var n=[],r=0,i=this.heldBatchResults;r<i.length;r++){var o=i[r];if(!this.isRemoteUpToVersion(o.commitVersion))break;n.push(o)}return 0===n.length?lr.resolve(An()):(this.heldBatchResults.splice(0,n.length),this.releaseBatchResults(t,n,e))},t.prototype.isRemoteUpToVersion=function(t){var e=this.queryCache.getLastRemoteSnapshotVersion();return t.compareTo(e)<=0||jt(this.targetIds)},t.prototype.shouldHoldBatchResult=function(t){return!this.isRemoteUpToVersion(t)||this.heldBatchResults.length>0},t.prototype.releaseBatchResults=function(t,e,n){for(var r=this,i=lr.resolve(),o=function(e){i=i.next(function(){return r.applyWriteToRemoteDocuments(t,e,n)})},a=0,s=e;a<s.length;a++)o(s[a]);return i.next(function(){return r.removeMutationBatches(t,e.map(function(t){return t.batch}))})},t.prototype.removeMutationBatch=function(t,e){return this.removeMutationBatches(t,[e])},t.prototype.removeMutationBatches=function(t,e){for(var n=An(),r=0,i=e;r<i.length;r++)for(var o=0,a=i[r].mutations;o<a.length;o++)n=n.add(a[o].key);return this.mutationQueue.removeMutationBatches(t,e).next(function(){return n})},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=e.batch,i=r.keys(),o=lr.resolve();return i.forEach(function(i){o=o.next(function(){return n.getEntry(t,i)}).next(function(t){var o=t,a=e.docVersions.get(i);kt(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=r.applyToRemoteDocument(i,o,e))?n.addEntry(o):kt(!t,"Mutation batch "+r+" applied to document "+t+" resulted in null"))})}),o},t}(),gi=function(){function t(){this.mutationQueue=[],this.nextBatchId=1,this.highestAcknowledgedBatchId=Er,this.lastStreamToken=Nt(),this.garbageCollector=null,this.batchesByDocumentKey=new bn(dr.compareByKey)}return t.prototype.start=function(t){return 0===this.mutationQueue.length&&(this.nextBatchId=1,this.highestAcknowledgedBatchId=Er),kt(this.highestAcknowledgedBatchId<this.nextBatchId,"highestAcknowledgedBatchId must be less than the nextBatchId"),lr.resolve()},t.prototype.checkEmpty=function(t){return lr.resolve(0===this.mutationQueue.length)},t.prototype.getNextBatchId=function(t){return lr.resolve(this.nextBatchId)},t.prototype.getHighestAcknowledgedBatchId=function(t){return lr.resolve(this.highestAcknowledgedBatchId)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId;kt(r>this.highestAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order");var i=this.indexOfExistingBatchId(r,"acknowledged"),o=this.mutationQueue[i];return kt(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),kt(!o.isTombstone(),"Can't acknowledge a previously removed batch"),this.highestAcknowledgedBatchId=r,this.lastStreamToken=n,lr.resolve()},t.prototype.getLastStreamToken=function(t){return lr.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,lr.resolve()},t.prototype.addMutationBatch=function(t,e,n){kt(0!==n.length,"Mutation batches should not be empty");var r=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&kt(this.mutationQueue[this.mutationQueue.length-1].batchId<r,"Mutation batchIDs must be monotonically increasing order");var i=new Tr(r,e,n);this.mutationQueue.push(i);for(var o=0,a=n;o<a.length;o++)this.batchesByDocumentKey=this.batchesByDocumentKey.add(new dr(a[o].key,r));return lr.resolve(i)},t.prototype.lookupMutationBatch=function(t,e){return lr.resolve(this.findMutationBatch(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){for(var n=this.mutationQueue.length,r=Math.max(e,this.highestAcknowledgedBatchId)+1,i=this.indexOfBatchId(r),o=i<0?0:i;o<n;o++){var a=this.mutationQueue[o];if(!a.isTombstone())return lr.resolve(a)}return lr.resolve(null)},t.prototype.getAllMutationBatches=function(t){return lr.resolve(this.getAllLiveMutationBatchesBeforeIndex(this.mutationQueue.length))},t.prototype.getAllMutationBatchesThroughBatchId=function(t,e){var n=this.mutationQueue.length,r=this.indexOfBatchId(e);return r<0?r=0:r>=n?r=n:r++,lr.resolve(this.getAllLiveMutationBatchesBeforeIndex(r))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new dr(e,0),i=new dr(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(t){kt(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);kt(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),lr.resolve(o)},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=r;de.isDocumentKey(o)||(o=o.child(""));var a=new dr(new de(o),0),s=new bn(ee);this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!r.isPrefixOf(e)&&(e.length===i&&(s=s.add(t.targetOrBatchId)),!0)},a);var u=[];return s.forEach(function(t){var e=n.findMutationBatch(t);null!==e&&u.push(e)}),lr.resolve(u)},t.prototype.removeMutationBatches=function(t,e){var n=e.length;kt(n>0,"Should not remove mutations when none exist.");var r=e[0].batchId,i=this.mutationQueue.length,o=this.indexOfExistingBatchId(r,"removed");kt(this.mutationQueue[o].batchId===r,"Removed batches must exist in the queue");for(var a=1,s=o+1;a<n&&s<i;)(f=this.mutationQueue[s]).isTombstone()?s++:(kt(f.batchId===e[a].batchId,"Removed batches must be contiguous in the queue"),a++,s++);if(0===o){for(;s<i&&(f=this.mutationQueue[s]).isTombstone();s++);this.mutationQueue.splice(o,s-o)}else for(var u=o;u<s;u++)this.mutationQueue[u]=this.mutationQueue[u].toTombstone();for(var c=this.batchesByDocumentKey,l=0,h=e;l<h.length;l++)for(var f,p=(f=h[l]).batchId,d=0,y=f.mutations;d<y.length;d++){var g=y[d].key;null!==this.garbageCollector&&this.garbageCollector.addPotentialGarbageKey(g);var m=new dr(g,p);c=c.delete(m)}return this.batchesByDocumentKey=c,lr.resolve()},t.prototype.setGarbageCollector=function(t){this.garbageCollector=t},t.prototype.containsKey=function(t,e){var n=new dr(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return lr.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&kt(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),lr.resolve()},t.prototype.getAllLiveMutationBatchesBeforeIndex=function(t){for(var e=[],n=0;n<t;n++){var r=this.mutationQueue[n];r.isTombstone()||e.push(r)}return e},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return kt(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return kt(n.batchId===t,"If found batch must match"),n.isTombstone()?null:n},t}(),mi=function(){function t(){this.queries=new sr(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=nn.MIN,this.highestTargetId=0,this.references=new pr,this.targetCount=0}return t.prototype.start=function(t){return lr.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(){return this.lastRemoteSnapshotVersion},t.prototype.getHighestTargetId=function(){return this.highestTargetId},t.prototype.setLastRemoteSnapshotVersion=function(t,e){return this.lastRemoteSnapshotVersion=e,lr.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e)},t.prototype.addQueryData=function(t,e){return kt(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,lr.resolve()},t.prototype.updateQueryData=function(t,e){return kt(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),lr.resolve()},t.prototype.removeQueryData=function(t,e){return kt(this.targetCount>0,"Removing a target from an empty cache"),kt(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,lr.resolve()},Object.defineProperty(t.prototype,"count",{get:function(){return this.targetCount},enumerable:!0,configurable:!0}),t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return lr.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.references.addReferences(e,n),lr.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){return this.references.removeReferences(e,n),lr.resolve()},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),lr.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return lr.resolve(n)},t.prototype.setGarbageCollector=function(t){this.references.setGarbageCollector(t)},t.prototype.containsKey=function(t,e){return this.references.containsKey(t,e)},t}(),vi=function(){function t(){this.docs=_n()}return t.prototype.addEntry=function(t,e){return this.docs=this.docs.insert(e.key,e),lr.resolve()},t.prototype.removeEntry=function(t,e){return this.docs=this.docs.remove(e),lr.resolve()},t.prototype.getEntry=function(t,e){return lr.resolve(this.docs.get(e))},t.prototype.getDocumentsMatchingQuery=function(t,e){for(var n=Tn(),r=new de(e.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.value;if(!e.path.isPrefixOf(o.key.path))break;a instanceof ye&&e.matches(a)&&(n=n.insert(a.key,a))}return lr.resolve(n)},t}(),bi=function(){function t(){this.mutationQueues={},this.remoteDocumentCache=new vi,this.queryCache=new mi,this.started=!1}return t.prototype.start=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return kt(!this.started,"MemoryPersistence double-started!"),this.started=!0,[2]})})},t.prototype.shutdown=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return kt(this.started,"MemoryPersistence shutdown without start!"),this.started=!1,[2]})})},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new gi,this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e){return St("MemoryPersistence","Starting transaction:",t),e(new wi).toPromise()},t}(),wi=function(){},_i=function(){function t(){this.isEager=!1}return t.prototype.addGarbageSource=function(t){},t.prototype.removeGarbageSource=function(t){},t.prototype.addPotentialGarbageKey=function(t){},t.prototype.collectGarbage=function(t){return lr.resolve(An())},t}(),Ei=function(){return function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}}();!function(t){t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout"}(ci||(ci={}));var Ti,Si=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Rt(xt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueue(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),Ii=function(){function t(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return t.prototype.enqueue=function(t){var e=this;this.verifyNotFailed();var n=this.tail.then(function(){return e.operationInProgress=!0,t().catch(function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw It("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return e.operationInProgress=!1,t})});return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),kt(!this.containsDelayedOperation(t),"Attempted to schedule multiple operations with timer id "+t+".");var i=Si.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&At("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){kt(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},t.prototype.containsDelayedOperation=function(t){return this.delayedOperations.findIndex(function(e){return e.timerId===t})>=0},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then(function(){kt(t===ci.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==ci.All&&i.timerId===t)break}return e.drain()})},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);kt(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),Ci=function(){function t(t,e,n,r,i){this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){this.cancel();var e=this.currentBaseMs+this.jitterDelayMs();this.currentBaseMs>0&&St("ExponentialBackoff","Backing off for "+e+" ms (base delay: "+this.currentBaseMs+" ms)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,e,t),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}();!function(t){t[t.Initial=0]="Initial",t[t.Auth=1]="Auth",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff",t[t.Stopped=5]="Stopped"}(Ti||(Ti={}));var Ai=1e3,ki=6e4,Oi=1.5,Ni=function(){function t(t,e,n,r,i){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.inactivityTimerPromise=null,this.stream=null,this.listener=null,this.backoff=new Ci(t,e,Ai,Oi,ki),this.state=Ti.Initial}return t.prototype.isStarted=function(){return this.state===Ti.Backoff||this.state===Ti.Auth||this.state===Ti.Open},t.prototype.isOpen=function(){return this.state===Ti.Open},t.prototype.start=function(t){this.state!==Ti.Error?(kt(this.state===Ti.Initial,"Already started"),this.listener=t,this.auth()):this.performBackoff(t)},t.prototype.stop=function(){this.isStarted()&&this.close(Ti.Stopped)},t.prototype.inhibitBackoff=function(){kt(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Ti.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.inactivityTimerPromise&&(this.inactivityTimerPromise=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return this.isOpen()?[2,this.close(Ti.Initial)]:[2]})})},t.prototype.cancelIdleCheck=function(){this.inactivityTimerPromise&&(this.inactivityTimerPromise.cancel(),this.inactivityTimerPromise=null)},t.prototype.close=function(t,e){return o.__awaiter(this,void 0,void 0,function(){var n;return o.__generator(this,function(r){return kt(t===Ti.Error||qe(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),t!==Ti.Error?this.backoff.reset():e&&e.code===xt.RESOURCE_EXHAUSTED&&(It(e.toString()),It("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,n=this.listener,this.listener=null,t!==Ti.Stopped?[2,n.onClose(e)]:[2]})})},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;kt(this.state===Ti.Initial,"Must be in initial state to auth"),this.state=Ti.Auth,this.credentialsProvider.getToken(!1).then(function(e){t.startStream(e)},function(e){t.queue.enqueue(function(){return o.__awaiter(t,void 0,void 0,function(){var t;return o.__generator(this,function(n){return this.state!==Ti.Stopped?(t=new Rt(xt.UNKNOWN,"Fetching auth token failed: "+e.message),[2,this.handleStreamClose(t)]):[2]})})})})},t.prototype.startStream=function(t){var e=this;if(this.state!==Ti.Stopped){kt(this.state===Ti.Auth,"Trying to start stream in a non-auth state");var n=function(t,n){e.queue.enqueue(function(){return o.__awaiter(e,void 0,void 0,function(){return o.__generator(this,function(e){return this.stream===t?[2,n()]:[2]})})})};if(null!==this.listener){var r=this.startRpc(t);this.stream=r,this.stream.onOpen(function(){n(r,function(){return kt(e.state===Ti.Auth,"Expected stream to be in state auth, but was "+e.state),e.state=Ti.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(r,function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(r,function(){return e.onMessage(t)})})}}},t.prototype.performBackoff=function(t){var e=this;kt(this.state===Ti.Error,"Should only perform backoff in an error case"),this.state=Ti.Backoff,this.backoff.backoffAndRun(function(){return o.__awaiter(e,void 0,void 0,function(){return o.__generator(this,function(e){return this.state===Ti.Stopped?[2]:(this.state=Ti.Initial,this.start(t),kt(this.isStarted(),"PersistentStream should have started"),[2])})})})},t.prototype.handleStreamClose=function(t){return kt(this.isStarted(),"Can't handle server close on non-started stream"),St("PersistentStream","close with error: "+t),this.stream=null,this.close(Ti.Error,t)},t}(),xi=function(t){function e(e,n,r,i){var o=t.call(this,e,ci.ListenStreamConnectionBackoff,ci.ListenStreamIdle,n,r)||this;return o.serializer=i,o}return o.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(Ni),Ri=function(t){function e(e,n,r,i){var o=t.call(this,e,ci.WriteStreamConnectionBackoff,ci.WriteStreamIdle,n,r)||this;return o.serializer=i,o.handshakeComplete_=!1,o}return o.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(e){this.handshakeComplete_=!1,t.prototype.start.call(this,e)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(kt(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return kt(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){kt(this.isOpen(),"Writing handshake requires an opened stream"),kt(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;kt(this.isOpen(),"Writing mutations requires an opened stream"),kt(this.handshakeComplete_,"Handshake must be complete before writing mutations"),kt(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},e}(Ni),Di=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(){return new Ri(this.queue,this.connection,this.credentials,this.serializer)},t.prototype.newPersistentWatchStream=function(){return new xi(this.queue,this.connection,this.credentials,this.serializer)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults)})},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map(function(t){return e.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=_n();n.forEach(function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)});var i=[];return t.forEach(function(t){var e=r.get(t);kt(!!e,"Missing entity in write response for "+t),i.push(e)}),i})},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken(!1).then(function(r){return n.connection.invokeRPC(t,e,r)})},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken(!1).then(function(r){return n.connection.invokeStreamingRPC(t,e,r)})},t}(),Pi=function(){function t(t){this.datastore=t,this.readVersions=In(),this.mutations=[],this.committed=!1}return t.prototype.recordVersion=function(t){var e=t.version;t instanceof ge&&(e=nn.forDeletedDoc());var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new Rt(xt.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.lookup=function(t){var e=this;return this.committed?Promise.reject("Transaction has already completed."):this.mutations.length>0?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(t).then(function(t){return t.forEach(function(t){return e.recordVersion(t)}),t})},t.prototype.write=function(t){if(this.committed)throw new Rt(xt.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(t)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return e?ln.updateTime(e):ln.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(e&&e.isEqual(nn.forDeletedDoc()))throw new Rt(xt.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return e?ln.updateTime(e):ln.exists(!0)},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t)))},t.prototype.update=function(t,e){this.write(e.toMutations(t,this.preconditionForUpdate(t)))},t.prototype.delete=function(t){this.write([new yn(t,this.precondition(t))]),this.readVersions=this.readVersions.insert(t,nn.forDeletedDoc())},t.prototype.commit=function(){var t=this,e=this.readVersions;return this.mutations.forEach(function(t){e=e.remove(t.key)}),e.isEmpty()?this.datastore.commit(this.mutations).then(function(){t.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},t}(),Mi=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=$n.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast($n.Unknown),kt(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(ci.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,kt(t.state===$n.Unknown,"Timer should be canceled if we transitioned to a different state."),St("OnlineStateTracker","Watch stream didn't reach online or offline within 10000ms. Considering client offline."),t.logClientOfflineWarningIfNecessary(),t.setAndBroadcast($n.Offline),Promise.resolve()}))},t.prototype.handleWatchStreamFailure=function(){this.state===$n.Online?(this.setAndBroadcast($n.Unknown),kt(0===this.watchStreamFailures,"watchStreamFailures must be 0"),kt(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=2&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(),this.setAndBroadcast($n.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===$n.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(){this.shouldWarnClientIsOffline&&(It("Could not reach Firestore backend."),this.shouldWarnClientIsOffline=!1)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),Li=function(){function t(t,e,n,r){this.localStore=t,this.datastore=e,this.pendingWrites=[],this.lastBatchSeen=Er,this.listenTargets={},this.pendingTargetResponses={},this.accumulatedWatchChanges=[],this.watchStream=null,this.writeStream=null,this.onlineStateTracker=new Mi(n,r)}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.isNetworkEnabled=function(){return kt(null==this.watchStream==(null==this.writeStream),"WatchStream and WriteStream should both be null or non-null"),null!=this.watchStream},t.prototype.enableNetwork=function(){var t=this;return this.isNetworkEnabled()?Promise.resolve():(this.watchStream=this.datastore.newPersistentWatchStream(),this.writeStream=this.datastore.newPersistentWriteStream(),this.localStore.getLastStreamToken().then(function(e){return t.writeStream.lastStreamToken=e,t.shouldStartWatchStream()?t.startWatchStream():t.onlineStateTracker.set($n.Unknown),t.fillWritePipeline()}))},t.prototype.disableNetwork=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return this.disableNetworkInternal(),this.onlineStateTracker.set($n.Offline),[2]})})},t.prototype.disableNetworkInternal=function(){this.isNetworkEnabled()&&(this.watchStream.stop(),this.writeStream.stop(),this.cleanUpWatchStreamState(),this.cleanUpWriteStreamState(),this.writeStream=null,this.watchStream=null)},t.prototype.shutdown=function(){return St("RemoteStore","RemoteStore shutting down."),this.disableNetworkInternal(),this.onlineStateTracker.set($n.Unknown),Promise.resolve()},t.prototype.listen=function(t){kt(!Pt(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.isNetworkEnabled()&&this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){kt(Pt(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.isNetworkEnabled()&&this.watchStream.isOpen()&&(this.sendUnwatchRequest(t),jt(this.listenTargets)&&this.watchStream.markIdle())},t.prototype.sendWatchRequest=function(t){this.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.recordPendingTargetRequest=function(t){this.pendingTargetResponses[t]=(this.pendingTargetResponses[t]||0)+1},t.prototype.startWatchStream=function(){kt(this.shouldStartWatchStream(),"startWriteStream() called when shouldStartWatchStream() is false."),this.watchStream.start({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.isNetworkEnabled()&&!this.watchStream.isStarted()&&!jt(this.listenTargets)},t.prototype.cleanUpWatchStreamState=function(){this.accumulatedWatchChanges=[],this.pendingTargetResponses={}},t.prototype.onWatchStreamOpen=function(){return o.__awaiter(this,void 0,void 0,function(){var t=this;return o.__generator(this,function(e){return Mt(this.listenTargets,function(e,n){t.sendWatchRequest(n)}),[2]})})},t.prototype.onWatchStreamClose=function(t){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return kt(this.isNetworkEnabled(),"onWatchStreamClose() should only be called when the network is enabled"),this.cleanUpWatchStreamState(),this.onlineStateTracker.handleWatchStreamFailure(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set($n.Unknown),[2]})})},t.prototype.onWatchStreamChange=function(t,e){return o.__awaiter(this,void 0,void 0,function(){var n;return o.__generator(this,function(r){return this.onlineStateTracker.set($n.Online),t instanceof Ln&&t.state===Mn.Removed&&t.cause?[2,this.handleTargetError(t)]:(this.accumulatedWatchChanges.push(t),!e.isEqual(nn.MIN)&&e.compareTo(this.localStore.getLastRemoteSnapshotVersion())>=0?(n=this.accumulatedWatchChanges,this.accumulatedWatchChanges=[],[2,this.handleWatchChangeBatch(e,n)]):[2])})})},t.prototype.handleWatchChangeBatch=function(t,e){var n=this,r=new jn(t,this.listenTargets,this.pendingTargetResponses);r.addChanges(e);var i=r.createRemoteEvent();this.pendingTargetResponses=r.pendingTargetResponses;var o=[];return Mt(r.existenceFilters,function(e,r){var a=n.listenTargets[e];if(a){var s=a.query;if(s.isDocumentQuery())if(0===r.count){var u=new de(s.path),c=new ge(u,t);i.addDocumentUpdate(c)}else kt(1===r.count,"Single document existence filter with count: "+r.count);else{var l=n.localStore.remoteDocumentKeys(e).then(function(t){if(i.targetChanges[e]){var o=i.targetChanges[e].mapping;null!==o&&(o instanceof Rn?t=o.applyToKeySet(t):(kt(o instanceof xn,"Expected either reset or update mapping but got something else: "+o),t=o.documents))}if(t.size!==r.count){i.handleExistenceFilterMismatch(e);var u=new on(s,e,a.purpose);n.listenTargets[e]=u,n.sendUnwatchRequest(e);var c=new on(s,e,He.ExistenceFilterMismatch);n.sendWatchRequest(c)}});o.push(l)}}}),Promise.all(o).then(function(){return Mt(i.targetChanges,function(t,e){if(e.resumeToken.length>0){var r=n.listenTargets[t];r&&(n.listenTargets[t]=r.update({resumeToken:e.resumeToken,snapshotVersion:e.snapshotVersion}))}}),n.syncEngine.applyRemoteEvent(i)})},t.prototype.handleTargetError=function(t){var e=this;kt(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach(function(t){r=r.then(function(){return o.__awaiter(e,void 0,void 0,function(){return o.__generator(this,function(e){return Pt(this.listenTargets,t)?(delete this.listenTargets[t],[2,this.syncEngine.rejectListen(t,n)]):[2]})})})}),r},t.prototype.cleanUpWriteStreamState=function(){this.lastBatchSeen=Er,St("RemoteStore","Stopping write stream with "+this.pendingWrites.length+" pending writes"),this.pendingWrites=[]},t.prototype.fillWritePipeline=function(){return o.__awaiter(this,void 0,void 0,function(){var t=this;return o.__generator(this,function(e){return this.canWriteMutations()?[2,this.localStore.nextMutationBatch(this.lastBatchSeen).then(function(e){if(null!==e)return t.commit(e),t.fillWritePipeline();0===t.pendingWrites.length&&t.writeStream.markIdle()})]:[2]})})},t.prototype.canWriteMutations=function(){return this.isNetworkEnabled()&&this.pendingWrites.length<10},t.prototype.outstandingWrites=function(){return this.pendingWrites.length},t.prototype.commit=function(t){kt(this.canWriteMutations(),"commit called when batches can't be written"),this.lastBatchSeen=t.batchId,this.pendingWrites.push(t),this.shouldStartWriteStream()?this.startWriteStream():this.isNetworkEnabled()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.isNetworkEnabled()&&!this.writeStream.isStarted()&&this.pendingWrites.length>0},t.prototype.startWriteStream=function(){kt(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})},t.prototype.onWriteStreamOpen=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return this.writeStream.writeHandshake(),[2]})})},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,n=t.pendingWrites;e<n.length;e++)t.writeStream.writeMutations(n[e].mutations)})},t.prototype.onMutationResult=function(t,e){var n=this;kt(this.pendingWrites.length>0,"Got result for empty pending writes");var r=this.pendingWrites.shift(),i=Sr.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(t){return o.__awaiter(this,void 0,void 0,function(){var e=this;return o.__generator(this,function(n){return kt(this.isNetworkEnabled(),"onWriteStreamClose() should only be called when the network is enabled"),t&&this.pendingWrites.length>0?(kt(!!t,"We have pending writes, but the write stream closed without an error"),[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})]):[2]})})},t.prototype.handleHandshakeError=function(t){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(e){return mn(t.code)||t.code===xt.ABORTED?(St("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=Nt(),[2,this.localStore.setLastStreamToken(Nt())]):[2]})})},t.prototype.handleWriteError=function(t){return o.__awaiter(this,void 0,void 0,function(){var e,n=this;return o.__generator(this,function(r){return mn(t.code)?(e=this.pendingWrites.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then(function(){return n.fillWritePipeline()})]):[2]})})},t.prototype.createTransaction=function(){return new Pi(this.datastore)},t.prototype.handleUserChange=function(t){if(St("RemoteStore","RemoteStore changing users: uid=",t.uid),this.isNetworkEnabled())return this.disableNetworkInternal(),this.onlineStateTracker.set($n.Unknown),this.enableNetwork()},t}(),ji=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r}return t.prototype.start=function(t){var e=this,n=new Ei,r=new Ei,i=!1;return this.credentials.setUserChangeListener(function(o){i?e.asyncQueue.enqueue(function(){return e.handleUserChange(o)}):(i=!0,e.initializePersistence(t,r).then(function(){return e.initializeRest(o)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueue(function(){return n.promise}),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.remoteStore.enableNetwork()})},t.prototype.initializePersistence=function(t,e){var n=this;return t?this.startIndexedDbPersistence().then(e.resolve).catch(function(t){return e.reject(t),n.canFallback(t)?(console.warn("Error enabling offline storage. Falling back to storage disabled: "+t),n.startMemoryPersistence()):Promise.reject(t)}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t.code===xt.FAILED_PRECONDITION||t.code===xt.UNIMPLEMENTED},t.prototype.startIndexedDbPersistence=function(){this.garbageCollector=new _i;var t=fi.buildStoragePrefix(this.databaseInfo),e=new Gn(this.databaseInfo.databaseId,{useProto3Json:!0});return this.persistence=new fi(t,e),this.persistence.start()},t.prototype.startMemoryPersistence=function(){return this.garbageCollector=new hr,this.persistence=new bi,this.persistence.start()},t.prototype.initializeRest=function(t){var e=this;return this.platform.loadConnection(this.databaseInfo).then(function(n){e.localStore=new yi(e.persistence,t,e.garbageCollector);var r=e.platform.newSerializer(e.databaseInfo.databaseId),i=new Di(e.asyncQueue,n,e.credentials,r);return e.remoteStore=new Li(e.localStore,i,e.asyncQueue,function(t){e.syncEngine.applyOnlineStateChange(t),e.eventMgr.applyOnlineStateChange(t)}),e.syncEngine=new _r(e.localStore,e.remoteStore,t),e.remoteStore.syncEngine=e.syncEngine,e.eventMgr=new ur(e.syncEngine),e.localStore.start()}).then(function(){return e.remoteStore.start()})},t.prototype.handleUserChange=function(t){return this.asyncQueue.verifyOperationInProgress(),St("FirestoreClient","User Changed: "+t.uid),this.syncEngine.handleUserChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.remoteStore.disableNetwork()})},t.prototype.shutdown=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.credentials.removeUserChangeListener(),t.remoteStore.shutdown()}).then(function(){return t.persistence.shutdown()})},t.prototype.listen=function(t,e,n){var r=this,i=new cr(t,e,n);return this.asyncQueue.enqueue(function(){return r.eventMgr.listen(i)}),i},t.prototype.unlisten=function(t){var e=this;this.asyncQueue.enqueue(function(){return e.eventMgr.unlisten(t)})},t.prototype.write=function(t){var e=this,n=new Ei;return this.asyncQueue.enqueue(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.transaction=function(t){var e=this;return this.asyncQueue.enqueue(function(){return o.__awaiter(e,void 0,void 0,function(){return o.__generator(this,function(t){return[2]})})}).then(function(){return e.syncEngine.runTransaction(t)})},t}(),Vi=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Ui=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),Fi=function(){function t(){this.userListener=null}return t.prototype.getToken=function(t){return Promise.resolve(null)},t.prototype.setUserChangeListener=function(t){kt(!this.userListener,"Can only call setUserChangeListener() once."),this.userListener=t,t(Ui.UNAUTHENTICATED)},t.prototype.removeUserChangeListener=function(){kt(null!==this.userListener,"removeUserChangeListener() when no listener registered"),this.userListener=null},t}(),Bi=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.userCounter=0,this.userListener=null,this.tokenListener=function(){var t=e.getUser();e.currentUser&&t.isEqual(e.currentUser)||(e.currentUser=t,e.userCounter++,e.userListener&&e.userListener(e.currentUser))},this.userCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(t){var e=this;kt(null!=this.tokenListener,"getToken cannot be called after listener removed.");var n=this.userCounter;return this.app.INTERNAL.getToken(t).then(function(t){if(e.userCounter!==n)throw new Rt(xt.ABORTED,"getToken aborted due to uid change.");return t?(kt("string"==typeof t.accessToken,"Invalid tokenData returned from getToken():"+t),new function(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}}(t.accessToken,e.currentUser)):null})},t.prototype.setUserChangeListener=function(t){kt(!this.userListener,"Can only call setUserChangeListener() once."),this.userListener=t,this.currentUser&&t(this.currentUser)},t.prototype.removeUserChangeListener=function(){kt(null!=this.tokenListener,"removeUserChangeListener() called twice"),kt(null!==this.userListener,"removeUserChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.userListener=null},t.prototype.getUser=function(){"function"!=typeof this.app.INTERNAL.getUid&&At("This version of the Firestore SDK requires at least version 3.7.0 of firebase.js.");var t=this.app.INTERNAL.getUid();return kt(null===t||"string"==typeof t,"Received invalid UID: "+t),new Ui(t)},t}(),qi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=Ui.FIRST_PARTY,kt(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){return{Authorization:this.gapi.auth.getAuthHeaderValueForFirstParty([]),"X-Goog-AuthUser":this.sessionIndex}},enumerable:!0,configurable:!0}),t}(),Hi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,kt(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return t.prototype.getToken=function(t){return Promise.resolve(new qi(this.gapi,this.sessionIndex))},t.prototype.setUserChangeListener=function(t){t(Ui.FIRST_PARTY)},t.prototype.removeUserChangeListener=function(){},t}();function Wi(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Gi,Ki=function(){function t(t){this.methodName=t}return t.delete=function(){return zi.instance},t.serverTimestamp=function(){return Qi.instance},t.prototype.isEqual=function(t){return this===t},t}(),zi=function(t){function e(){return t.call(this,"FieldValue.delete()")||this}return o.__extends(e,t),e.instance=new e,e}(Ki),Qi=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp()")||this}return o.__extends(e,t),e.instance=new e,e}(Ki),Xi=Dt(Ki,"Use FieldValue.<field>() instead."),Yi=/^__.*__$/,Ji=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return n.push(null!==this.fieldMask?new pn(t,this.data,this.fieldMask,e):new fn(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new dn(t,this.fieldTransforms)),n},t}(),Zi=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new pn(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new dn(t,this.fieldTransforms)),n},t}();function $i(t){switch(t){case Gi.Set:case Gi.MergeSet:case Gi.Update:return!0;case Gi.QueryValue:return!1;default:throw At("Unexpected case for UserDataSource: "+t)}}!function(t){t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.QueryValue=3]="QueryValue"}(Gi||(Gi={}));var to=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new Rt(xt.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if($i(this.dataSource)&&Yi.test(t))throw this.createError("Document fields cannot begin and end with __")},t}(),eo=function(t,e){this.databaseId=t,this.key=e},no=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new to(Gi.Set,t,pe.EMPTY_PATH);io("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new Ji(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e){var n=new to(Gi.MergeSet,t,pe.EMPTY_PATH);io("Data must be an object, but it was:",n,e);var r=this.parseData(e,n),i=new an(n.fieldMask);return new Ji(r,i,n.fieldTransforms)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new to(Gi.Update,t,pe.EMPTY_PATH);io("Data must be an object, but it was:",r,e);var i=[],o=Le.EMPTY;Lt(e,function(e,a){var s=ao(t,e),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof zi)i.push(s);else{var c=n.parseData(a,u);null!=c&&(i.push(s),o=o.set(s,c))}});var a=new an(i);return new Zi(o,a,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new to(Gi.Update,t,pe.EMPTY_PATH),o=[oo(t,e)],a=[n];if(r.length%2!=0)throw new Rt(xt.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(oo(t,r[s])),a.push(r[s+1]);var u=[],c=Le.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof zi)u.push(l);else{var p=this.parseData(f,h);null!=p&&(u.push(l),c=c.set(l,p))}}var d=new an(u);return new Zi(c,d,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new to(Gi.QueryValue,t,pe.EMPTY_PATH),r=this.parseData(e,n);return kt(null!=r,"Parsed data should not be null."),kt(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(t){var n=so(t);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(ro(t=this.runPreConverter(t,e)))return io("Unsupported field value:",e,t),this.parseObject(t,e);if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return t instanceof Ki?(this.parseSentinelFieldValue(t,e),null):this.parseScalarValue(t,e)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=this.parseData(o[i],e.childContextForArray(r));null==a&&(a=Se.INSTANCE),n.push(a),r++}return new je(n)},t.prototype.parseObject=function(t,e){var n=this,r=new me(ee);return Lt(t,function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))}),new Le(r)},t.prototype.parseScalarValue=function(t,e){if(null===t)return Se.INSTANCE;if("number"==typeof t)return function(t){return Be(t)&&t<=Fe&&t>=Ue}(t)?new ke(t):new Oe(t);if("boolean"==typeof t)return Ie.of(t);if("string"==typeof t)return new Ne(t);if(t instanceof Date)return new xe(en.fromDate(t));if(t instanceof se)return new Me(t);if(t instanceof oe)return new De(t);if(t instanceof eo)return new Pe(t.databaseId,t.key);throw e.createError("Unsupported field value: "+Qt(t))},t.prototype.parseSentinelFieldValue=function(t,e){if(!$i(e.dataSource))throw e.createError(t.methodName+" can only be used with update() and set()");if(null===e.path)throw e.createError(t.methodName+" is not currently supported inside arrays");if(t instanceof zi){if(e.dataSource!==Gi.MergeSet)throw e.dataSource===Gi.Update?(kt(null==e.path||e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}")}else t instanceof Qi?e.fieldTransforms.push(new un(e.path,sn.instance)):At("Unknown FieldValue type: "+t)},t}();function ro(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof se||t instanceof oe||t instanceof eo||t instanceof Ki)}function io(t,e,n){if(!ro(n)||!zt(n)){var r=Qt(n);throw e.createError("an object"===r?t+" a custom object":t+" "+r)}}function oo(t,e){if(e instanceof tr)return e._internalPath;if("string"==typeof e)return ao(t,e);throw new Rt(xt.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function ao(t,e){try{return function(t){if(t.search(er)>=0)throw new Rt(xt.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(tr.bind.apply(tr,[void 0].concat(t.split("."))))}catch(e){throw new Rt(xt.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(e){var n=so(e);throw new Rt(xt.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function so(t){return t instanceof Error?t.message:t.toString()}var uo="firestore.googleapis.com",co=!0,lo=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new Rt(xt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uo,this.ssl=co}else Wt("settings","string","host",t.host),this.host=t.host,Gt("settings","boolean","ssl",t.ssl),this.ssl=void 0!==(e=t.ssl)?e:co;var e;Yt("settings",t,["host","ssl","credentials"]),Gt("settings","object","credentials",t.credentials),this.credentials=t.credentials}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials},t}(),ho=function(){},fo=function(){function t(e){var n=this;this._queue=new Ii,this.INTERNAL={delete:function(){return o.__awaiter(n,void 0,void 0,function(){return o.__generator(this,function(t){return this._firestoreClient?[2,this._firestoreClient.shutdown()]:[2]})})}};var r=new ho;if("object"==typeof e.options){var i=e;r.firebaseApp=i,r.databaseId=t.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new Bi(i)}else{var a=e;if(!a.projectId)throw new Rt(xt.INVALID_ARGUMENT,"Must provide projectId");r.databaseId=new ce(a.projectId,a.database),r.persistenceKey="[DEFAULT]",r.credentials=new Fi}r.settings=new lo({}),this._config=r,this._databaseId=r.databaseId}return t.prototype.settings=function(t){if(Ut("Firestore.settings",arguments,1),qt("Firestore.settings","object",1,t),Pt(t,"persistence"))throw new Rt(xt.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new lo(t);if(this._firestoreClient&&!this._config.settings.isEqual(e))throw new Rt(xt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=e,void 0!==e.credentials&&(this._config.credentials=function(t){if(!t)return new Fi;switch(t.type){case"gapi":return new Hi(t.client,t.sessionIndex||"0");case"provider":return t.client;default:throw new Rt(xt.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(){if(this._firestoreClient)throw new Rt(xt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(!0)},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(!1),this._firestoreClient},t.prototype.configureClient=function(t){var e=this;kt(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),kt(!this._firestoreClient,"configureClient() called multiple times");var n=new function(t,e,n,r){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r}(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl);return this._dataConverter=new no(function(t){if(t instanceof go){var n=e._config.databaseId,r=t.firestore._config.databaseId;if(!r.isEqual(n))throw new Rt(xt.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new eo(e._config.databaseId,t._key)}return t}),this._firestoreClient=new ji(Ot.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(t)},t.databaseIdFromApp=function(t){var e=t.options;if(!Pt(e,"projectId")){if(Pt(e,"firestoreId"))throw new Rt(xt.INVALID_ARGUMENT,'"firestoreId" is now specified as "projectId" in firebase.initializeApp.');throw new Rt(xt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.')}if(Pt(e,"firestoreOptions"))throw new Rt(xt.INVALID_ARGUMENT,'"firestoreOptions" values are now specified with Firestore.settings()');var n=e.projectId;if(!n||"string"!=typeof n)throw new Rt(xt.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ce(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new Rt(xt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(Ut("Firestore.collection",arguments,1),qt("Firestore.collection","string",1,t),!t)throw new Rt(xt.INVALID_ARGUMENT,"Must provide a non-empty collection path to collection()");return this.ensureClientConfigured(),new Eo(he.fromString(t),this)},t.prototype.doc=function(t){if(Ut("Firestore.doc",arguments,1),qt("Firestore.doc","string",1,t),!t)throw new Rt(xt.INVALID_ARGUMENT,"Must provide a non-empty document path to doc()");return this.ensureClientConfigured(),go.forPath(he.fromString(t),this)},t.prototype.runTransaction=function(t){var e=this;return Ut("Firestore.runTransaction",arguments,1),qt("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(n){return t(new po(e,n))})},t.prototype.batch=function(){return this.ensureClientConfigured(),new yo(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(Et()){case _t.DEBUG:return"debug";case _t.ERROR:return"error";case _t.SILENT:return"silent";default:return At("Unknown log level: "+Et())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(Ut("Firestore.setLogLevel",arguments,1),qt("Firestore.setLogLevel","string",1,t),t){case"debug":Tt(_t.DEBUG);break;case"error":Tt(_t.ERROR);break;case"silent":Tt(_t.SILENT);break;default:throw new Rt(xt.INVALID_ARGUMENT,"Invalid log level: "+t)}},t}(),po=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;Ut("Transaction.get",arguments,1);var n=Io("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return At("Mismatch in docs returned from document lookup.");var r=t[0];return new vo(e._firestore,n._key,r instanceof ge?null:r,!1)})},t.prototype.set=function(t,e,n){Bt("Transaction.set",arguments,2,3);var r=Io("Transaction.set",t,this._firestore),i=(n=To("Transaction.set",n)).merge?this._firestore._dataConverter.parseMergeData("Transaction.set",e):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof e||e instanceof tr?(Ft("Transaction.update",arguments,3),r=Io("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(Ut("Transaction.update",arguments,2),r=Io("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},t.prototype.delete=function(t){Ut("Transaction.delete",arguments,1);var e=Io("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),yo=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){Bt("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Io("WriteBatch.set",t,this._firestore),i=(n=To("WriteBatch.set",n)).merge?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,ln.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"==typeof e||e instanceof tr?(Ft("WriteBatch.update",arguments,3),r=Io("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(Ut("WriteBatch.update",arguments,2),r=Io("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,ln.exists(!0))),this},t.prototype.delete=function(t){Ut("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=Io("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new yn(e._key,ln.NONE)),this},t.prototype.commit=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new Rt(xt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),go=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!=0)throw new Rt(xt.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new de(e),n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Eo(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(Ut("DocumentReference.collection",arguments,1),qt("DocumentReference.collection","string",1,t),!t)throw new Rt(xt.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=he.fromString(t);return new Eo(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Jt("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){Bt("DocumentReference.set",arguments,1,2);var n=(e=To("DocumentReference.set",e)).merge?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,ln.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof tr?(Ft("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(Ut("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,ln.exists(!0)))},t.prototype.delete=function(){return Ut("DocumentReference.delete",arguments,0),this._firestoreClient.write([new yn(this._key,ln.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Bt("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Wi(t[i])||(Yt("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),Gt("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeDocumentMetadataChanges:r.includeMetadataChanges,includeQueryMetadataChanges:r.includeMetadataChanges};return Wi(t[i])?n=t[i]:(qt("DocumentReference.onSnapshot","function",i,t[i]),Ht("DocumentReference.onSnapshot","function",i+1,t[i+1]),Ht("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Vi({next:function(t){if(e.next){kt(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new vo(n.firestore,n._key,r,t.fromCache))}},error:r}),o=this._firestoreClient.listen(We.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(){var t=this;return Ut("DocumentReference.get",arguments,0),new Promise(function(e,n){var r=t.onSnapshotInternal({includeQueryMetadataChanges:!0,includeDocumentMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(t){r(),!t.exists&&t.metadata.fromCache?n(new Rt(xt.ABORTED,"Failed to get document because the client is offline.")):e(t)},error:n})})},t}(),mo=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),vo=function(){function t(t,e,n,r){this._firestore=t,this._key=e,this._document=n,this._fromCache=r}return t.prototype.data=function(t){return Bt("DocumentSnapshot.data",arguments,0,1),t=So("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data,Ee.fromSnapshotOptions(t)):void 0},t.prototype.get=function(t,e){if(Bt("DocumentSnapshot.get",arguments,1,2),e=So("DocumentSnapshot.get",e),this._document){var n=this._document.data.field(oo("DocumentSnapshot.get",t));if(void 0!==n)return this.convertValue(n,Ee.fromSnapshotOptions(e))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new go(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new mo(null!==this._document&&this._document.hasLocalMutations,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw Jt("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,r={};return t.forEach(function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertValue=function(t,e){if(t instanceof Le)return this.convertObject(t,e);if(t instanceof je)return this.convertArray(t,e);if(t instanceof Pe){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||It("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new go(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},t}(),bo=function(t){function e(e,n,r,i){return t.call(this,e,n,r,i)||this}return o.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return kt("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},e}(vo),wo=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,r){var i;Ut("Query.where",arguments,3),qt("Query.where","string",2,n),Xt("Query.where",3,r);var o=oo("Query.where",e);if(o.isKeyField())if("string"==typeof r){if(-1!==r.indexOf("/"))throw new Rt(xt.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it contains a slash.");if(""===r)throw new Rt(xt.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");var a=this._query.path.child(new he([r]));kt(a.length%2==0,"Path should be a document key"),i=new Pe(this.firestore._databaseId,new de(a))}else{if(!(r instanceof go))throw new Rt(xt.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+Qt(r)+".");i=new Pe(this.firestore._databaseId,r._key)}else i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var s=function(t,e,n){if(n.isEqual(Se.INSTANCE)){if(e!==Ge.EQUAL)throw new Rt(xt.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new ze(t)}if(n.isEqual(Oe.NAN)){if(e!==Ge.EQUAL)throw new Rt(xt.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new Qe(t)}return new Ke(t,e,n)}(o,Ge.fromString(n),i);return this.validateNewFilter(s),new t(this._query.addFilter(s),this.firestore)},t.prototype.orderBy=function(e,n){var r;if(Bt("Query.orderBy",arguments,1,2),Ht("Query.orderBy","string",2,n),void 0===n||"asc"===n)r=Xe.ASCENDING;else{if("desc"!==n)throw new Rt(xt.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Xe.DESCENDING}if(null!==this._query.startAt)throw new Rt(xt.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new Rt(xt.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=oo("Query.orderBy",e),o=new Je(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){if(Ut("Query.limit",arguments,1),qt("Query.limit","number",1,e),e<=0)throw new Rt(xt.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Ft("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Ft("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Ft("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Ft("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Jt("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(Xt(t,1,e),e instanceof vo){if(n.length>0)throw new Rt(xt.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new Rt(xt.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Pe(this.firestore._databaseId,e.key));else{var s=e.field(a.field);if(void 0===s){var u=a.field.canonicalString();throw new Rt(xt.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Ye(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new Rt(xt.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new Rt(xt.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(-1!==a.indexOf("/"))throw new Rt(xt.INVALID_ARGUMENT,"Invalid query. Document ID '"+a+"' contains a slash in "+t+"()");var s=new de(this._query.path.child(a));i.push(new Pe(this.firestore._databaseId,s))}else{var u=this.firestore._dataConverter.parseQueryValue(t,a);i.push(u)}}return new Ye(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Bt("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Wi(t[i])||(Yt("Query.onSnapshot",r=t[i],["includeQueryMetadataChanges","includeDocumentMetadataChanges"]),Gt("Query.onSnapshot","boolean","includeDocumentMetadataChanges",r.includeDocumentMetadataChanges),Gt("Query.onSnapshot","boolean","includeQueryMetadataChanges",r.includeQueryMetadataChanges),i++),Wi(t[i])?n=t[i]:(qt("Query.onSnapshot","function",i,t[i]),Ht("Query.onSnapshot","function",i+1,t[i+1]),Ht("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Vi({next:function(t){e.next&&e.next(new _o(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(a)}},t.prototype.get=function(){var t=this;return Ut("Query.get",arguments,0),new Promise(function(e,n){var r=t.onSnapshotInternal({includeDocumentMetadataChanges:!1,includeQueryMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(t){r(),e(t)},error:n})})},t.prototype.validateNewFilter=function(t){if(t instanceof Ke&&t.isInequality()){var e=this._query.getInequalityFilterField();if(null!==e&&!e.isEqual(t.field))throw new Rt(xt.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+e.toString()+"' and '"+t.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(t.field,n)}},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new Rt(xt.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),_o=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this.metadata=new mo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;Bt("QuerySnapshot.forEach",arguments,1,2),qt("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(r){t.call(e,n.convertToDocumentImpl(r))})},Object.defineProperty(t.prototype,"query",{get:function(){return new wo(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"docChanges",{get:function(){return this._cachedChanges||(this._cachedChanges=function(t,e){if(e.oldDocs.isEmpty()){var n,r=0;return e.docChanges.map(function(i){var o=new bo(t,i.doc.key,i.doc,e.fromCache);return kt(i.type===nr.Added,"Invalid event type for first snapshot"),kt(!n||e.query.docComparator(n,i.doc)<0,"Got added events in wrong order"),n=i.doc,{type:"added",doc:o,oldIndex:-1,newIndex:r++}})}var i=e.oldDocs;return e.docChanges.map(function(n){var r=new bo(t,n.doc.key,n.doc,e.fromCache),o=-1,a=-1;return n.type!==nr.Added&&(kt((o=i.indexOf(n.doc.key))>=0,"Index for document not found"),i=i.delete(n.doc.key)),n.type!==nr.Removed&&(a=(i=i.add(n.doc)).indexOf(n.doc.key)),{type:function(t){switch(t){case nr.Added:return"added";case nr.Modified:case nr.Metadata:return"modified";case nr.Removed:return"removed";default:return At("Unknown change type: "+t)}}(n.type),doc:r,oldIndex:o,newIndex:a}})}(this._firestore,this._snapshot)),this._cachedChanges},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw Jt("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new bo(this._firestore,t.key,t,this.metadata.fromCache)},t}(),Eo=function(t){function e(e,n){var r=t.call(this,We.atPath(e),n)||this;if(e.length%2!=1)throw new Rt(xt.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new go(new de(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(Bt("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=te.newId()),qt("CollectionReference.doc","string",1,t),""===t)throw new Rt(xt.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=he.fromString(t);return go.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){Ut("CollectionReference.add",arguments,1),qt("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},e}(wo);function To(t,e){return void 0===e?{merge:!1}:(Yt(t,e,["merge"]),Gt(t,"boolean","merge",e.merge),e)}function So(t,e){return void 0===e?{}:(Yt(t,e,["serverTimestamps"]),void 0!==(n=e.serverTimestamps)&&function(t,e,n,r,i){for(var o=[],a=0,s=["estimate","previous","none"];a<s.length;a++){var u=s[a];if(u===r)return;o.push(Qt(u))}var c=Qt(r);throw new Rt(xt.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "serverTimestamps". Acceptable values: '+o.join(", "))}(t,0,0,n),e);var n}function Io(t,e,n){if(e instanceof go){if(e.firestore!==n)throw new Rt(xt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Jt(t,"DocumentReference",1,e)}var Co=Dt(fo,"Use firebase.firestore() instead."),Ao=Dt(po,"Use firebase.firestore().runTransaction() instead."),ko=Dt(yo,"Use firebase.firestore().batch() instead."),Oo=Dt(go,"Use firebase.firestore().doc() instead."),No=Dt(vo),xo=Dt(bo),Ro=Dt(wo),Do=Dt(_o),Po=Dt(Eo,"Use firebase.firestore().collection() instead.");f.default.INTERNAL.registerService("firestore",function(t){return new fo(t)},Vt({Firestore:Co,GeoPoint:se,Blob:ae,Transaction:Ao,WriteBatch:ko,DocumentReference:Oo,DocumentSnapshot:No,Query:Ro,QueryDocumentSnapshot:xo,QuerySnapshot:Do,CollectionReference:Po,FieldPath:tr,FieldValue:Xi,setLogLevel:fo.setLogLevel}));var Mo=function(){function t(){}return t.enablePersistence=function(){return{ngModule:t,providers:[{provide:ft,useValue:!0}]}},t}(),Lo=function(){},jo=new r.o("Location Initialized"),Vo=function(){},Uo=new r.o("appBaseHref"),Fo=function(){function t(e){var n=this;this._subject=new r.m,this._platformStrategy=e;var i=this._platformStrategy.getBaseHref();this._baseHref=t.stripTrailingSlash(Bo(i)),this._platformStrategy.onPopState(function(t){n._subject.emit({url:n.path(!0),pop:!0,type:t.type})})}return t.prototype.path=function(t){return void 0===t&&(t=!1),this.normalize(this._platformStrategy.path(t))},t.prototype.isCurrentPathEqualTo=function(e,n){return void 0===n&&(n=""),this.path()==this.normalize(e+t.normalizeQueryParams(n))},t.prototype.normalize=function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Bo(e)))},t.prototype.prepareExternalUrl=function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)},t.prototype.go=function(t,e){void 0===e&&(e=""),this._platformStrategy.pushState(null,"",t,e)},t.prototype.replaceState=function(t,e){void 0===e&&(e=""),this._platformStrategy.replaceState(null,"",t,e)},t.prototype.forward=function(){this._platformStrategy.forward()},t.prototype.back=function(){this._platformStrategy.back()},t.prototype.subscribe=function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})},t.normalizeQueryParams=function(t){return t&&"?"!==t[0]?"?"+t:t},t.joinWithSlash=function(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e},t.stripTrailingSlash=function(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)},t}();function Bo(t){return t.replace(/\/index.html$/,"")}var qo=function(t){function e(e,n){var r=t.call(this)||this;return r._platformLocation=e,r._baseHref="",null!=n&&(r._baseHref=n),r}return Object(o.__extends)(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e},e.prototype.prepareExternalUrl=function(t){var e=Fo.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+Fo.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+Fo.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(Vo),Ho=function(t){function e(e,n){var r=t.call(this)||this;if(r._platformLocation=e,null==n&&(n=r._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=n,r}return Object(o.__extends)(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.prepareExternalUrl=function(t){return Fo.joinWithSlash(this._baseHref,t)},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.pathname+Fo.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?""+e+n:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+Fo.normalizeQueryParams(r));this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+Fo.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e}(Vo),Wo=["en",[["a","p"],["AM","PM"]],[["AM","PM"],,],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",,"{1} 'at' {0}"],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],Go={},Ko=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),zo=new r.o("UseV4Plurals"),Qo=function(){},Xo=function(t){function e(e,n){var r=t.call(this)||this;return r.locale=e,r.deprecatedPluralFn=n,r}return Object(o.__extends)(e,t),e.prototype.getPluralCategory=function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return function(t){var e=t.toLowerCase().replace(/_/g,"-"),n=Go[e];if(n)return n;var r=e.split("-")[0];if(n=Go[r])return n;if("en"===r)return Wo;throw new Error('Missing locale data for the locale "'+t+'".')}(t)[17]}(e||this.locale)(t)){case Ko.Zero:return"zero";case Ko.One:return"one";case Ko.Two:return"two";case Ko.Few:return"few";case Ko.Many:return"many";default:return"other"}},e}(Qo),Yo=function(){function t(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._initialClasses=[]}return Object.defineProperty(t.prototype,"klass",{set:function(t){this._applyInitialClasses(!0),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyInitialClasses(!1),this._applyClasses(this._rawClass,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClass",{set:function(t){this._cleanupClasses(this._rawClass),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r._5)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._iterableDiffer){var t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){var e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}},t.prototype._cleanupClasses=function(t){this._applyClasses(t,!0),this._applyInitialClasses(!1)},t.prototype._applyKeyValueChanges=function(t){var e=this;t.forEachAddedItem(function(t){return e._toggleClass(t.key,t.currentValue)}),t.forEachChangedItem(function(t){return e._toggleClass(t.key,t.currentValue)}),t.forEachRemovedItem(function(t){t.previousValue&&e._toggleClass(t.key,!1)})},t.prototype._applyIterableChanges=function(t){var e=this;t.forEachAddedItem(function(t){if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(r._15)(t.item));e._toggleClass(t.item,!0)}),t.forEachRemovedItem(function(t){return e._toggleClass(t.item,!1)})},t.prototype._applyInitialClasses=function(t){var e=this;this._initialClasses.forEach(function(n){return e._toggleClass(n,!t)})},t.prototype._applyClasses=function(t,e){var n=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach(function(t){return n._toggleClass(t,!e)}):Object.keys(t).forEach(function(r){null!=t[r]&&n._toggleClass(r,!e)}))},t.prototype._toggleClass=function(t,e){var n=this;(t=t.trim())&&t.split(/\s+/g).forEach(function(t){e?n._renderer.addClass(n._ngEl.nativeElement,t):n._renderer.removeClass(n._ngEl.nativeElement,t)})},t}(),Jo=function(){function t(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}return Object.defineProperty(t.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),t}(),Zo=function(){function t(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._differ=null}return Object.defineProperty(t.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(t){Object(r.S)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(t)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTemplate",{set:function(t){t&&(this._template=t)},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){if("ngForOf"in t){var e=t.ngForOf.currentValue;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(t){throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((n=e).name||typeof n)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var n},t.prototype.ngDoCheck=function(){if(this._differ){var t=this._differ.diff(this.ngForOf);t&&this._applyChanges(t)}},t.prototype._applyChanges=function(t){var e=this,n=[];t.forEachOperation(function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new Jo(null,e.ngForOf,-1,-1),i),a=new $o(t,o);n.push(a)}else null==i?e._viewContainer.remove(r):(o=e._viewContainer.get(r),e._viewContainer.move(o,i),a=new $o(t,o),n.push(a))});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);r=0;for(var i=this._viewContainer.length;r<i;r++){var o=this._viewContainer.get(r);o.context.index=r,o.context.count=i}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})},t.prototype._perViewChange=function(t,e){t.context.$implicit=e.item},t}(),$o=function(t,e){this.record=t,this.view=e},ta=function(){function t(t,e){this._viewContainer=t,this._context=new ea,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}return Object.defineProperty(t.prototype,"ngIf",{set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfThen",{set:function(t){this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfElse",{set:function(t){this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),t.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},t}(),ea=function(){this.$implicit=null,this.ngIf=null},na=function(){function t(){}return t.prototype.createSubscription=function(t,e){return t.subscribe({next:e,error:function(t){throw t}})},t.prototype.dispose=function(t){t.unsubscribe()},t.prototype.onDestroy=function(t){t.unsubscribe()},t}(),ra=new(function(){function t(){}return t.prototype.createSubscription=function(t,e){return t.then(e,function(t){throw t})},t.prototype.dispose=function(t){},t.prototype.onDestroy=function(t){},t}()),ia=new na,oa=function(){function t(t){this._ref=t,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}return t.prototype.ngOnDestroy=function(){this._subscription&&this._dispose()},t.prototype.transform=function(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue===this._latestReturnedValue?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,r.O.wrap(this._latestValue)):(t&&this._subscribe(t),this._latestReturnedValue=this._latestValue,this._latestValue)},t.prototype._subscribe=function(t){var e=this;this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,function(n){return e._updateLatestValue(t,n)})},t.prototype._selectStrategy=function(e){if(Object(r._7)(e))return ra;if(Object(r._6)(e))return ia;throw n=t,Error("InvalidPipeArgument: '"+e+"' for pipe '"+Object(r._15)(n)+"'");var n},t.prototype._dispose=function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null},t.prototype._updateLatestValue=function(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())},t}(),aa=function(){},sa=new r.o("DocumentToken"),ua=n("g5jc"),ca=n("x6VL"),la=function(t){function e(e){t.call(this),this._value=e}return Object(o.__extends)(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ca.a;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(ua.a),ha=n("Qnch");function fa(t,e){return function(t,e){return Object(ha.a)(t,e,1)}(t,e)(this)}function pa(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),Object(ha.a)(t,e,n)(this)}var da=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new ya(t,this.selector,this.caught))},t}(),ya=function(t){function e(e,n,r){t.call(this,e),this.selector=n,this.caught=r}return Object(o.__extends)(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle(),this.add(Object(T.a)(this,n))}},e}(E.a);function ga(t){return function(t){return function(e){var n=new da(t),r=e.lift(n);return n.caught=r}}(t)(this)}var ma=n("8D5t");function va(){return Object(ma.a)(1)(this)}var ba=function(t){function e(){var e=t.call(this,"no elements in sequence");this.name=e.name="EmptyError",this.stack=e.stack,this.message=e.message}return Object(o.__extends)(e,t),e}(Error),wa=function(){function t(t,e,n,r){this.predicate=t,this.resultSelector=e,this.defaultValue=n,this.source=r}return t.prototype.call=function(t,e){return e.subscribe(new _a(t,this.predicate,this.resultSelector,this.defaultValue,this.source))},t}(),_a=function(t){function e(e,n,r,i,o){t.call(this,e),this.predicate=n,this.resultSelector=r,this.defaultValue=i,this.source=o,this.index=0,this.hasCompleted=!1,this._emitted=!1}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e=this.index++;this.predicate?this._tryPredicate(t,e):this._emit(t,e)},e.prototype._tryPredicate=function(t,e){var n;try{n=this.predicate(t,e,this.source)}catch(t){return void this.destination.error(t)}n&&this._emit(t,e)},e.prototype._emit=function(t,e){this.resultSelector?this._tryResultSelector(t,e):this._emitFinal(t)},e.prototype._tryResultSelector=function(t,e){var n;try{n=this.resultSelector(t,e)}catch(t){return void this.destination.error(t)}this._emitFinal(n)},e.prototype._emitFinal=function(t){var e=this.destination;this._emitted||(this._emitted=!0,e.next(t),e.complete(),this.hasCompleted=!0)},e.prototype._complete=function(){var t=this.destination;this.hasCompleted||"undefined"==typeof this.defaultValue?this.hasCompleted||t.error(new ba):(t.next(this.defaultValue),t.complete())},e}(a.a);function Ea(t,e,n){return function(t,e,n){return function(r){return r.lift(new wa(t,e,n,r))}}(t,e,n)(this)}var Ta=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new Sa(t,this.predicate,this.thisArg,this.source))},t}(),Sa=function(t){function e(e,n,r,i){t.call(this,e),this.predicate=n,this.thisArg=r,this.source=i,this.index=0,this.thisArg=r||this}return Object(o.__extends)(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(a.a);function Ia(t,e){return function(t,e){return function(n){return n.lift(new Ta(t,e,n))}}(t,e)(this)}var Ca=function(){function t(t,e,n,r){this.predicate=t,this.resultSelector=e,this.defaultValue=n,this.source=r}return t.prototype.call=function(t,e){return e.subscribe(new Aa(t,this.predicate,this.resultSelector,this.defaultValue,this.source))},t}(),Aa=function(t){function e(e,n,r,i,o){t.call(this,e),this.predicate=n,this.resultSelector=r,this.defaultValue=i,this.source=o,this.hasValue=!1,this.index=0,"undefined"!=typeof i&&(this.lastValue=i,this.hasValue=!0)}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e=this.index++;if(this.predicate)this._tryPredicate(t,e);else{if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}},e.prototype._tryPredicate=function(t,e){var n;try{n=this.predicate(t,e,this.source)}catch(t){return void this.destination.error(t)}if(n){if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}},e.prototype._tryResultSelector=function(t,e){var n;try{n=this.resultSelector(t,e)}catch(t){return void this.destination.error(t)}this.lastValue=n,this.hasValue=!0},e.prototype._complete=function(){var t=this.destination;this.hasValue?(t.next(this.lastValue),t.complete()):t.error(new ba)},e}(a.a);function ka(t,e,n){return function(t,e,n){return function(r){return r.lift(new Ca(t,e,n,r))}}(t,e,n)(this)}function Oa(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Object(ma.a)(t)(this)}var Na=function(t){function e(){var e=t.call(this,"argument out of range");this.name=e.name="ArgumentOutOfRangeError",this.stack=e.stack,this.message=e.message}return Object(o.__extends)(e,t),e}(Error);function xa(t){return function(e){return 0===t?new z.a:e.lift(new Ra(t))}}var Ra=function(){function t(t){if(this.total=t,this.total<0)throw new Na}return t.prototype.call=function(t,e){return e.subscribe(new Da(t,this.total))},t}(),Da=function(t){function e(e,n){t.call(this,e),this.total=n,this.ring=new Array,this.count=0}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()},e}(a.a),Pa=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new Ma(t,this.defaultValue))},t}(),Ma=function(t){function e(e,n){t.call(this,e),this.defaultValue=n,this.isEmpty=!0}return Object(o.__extends)(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(a.a),La=n("f9aG");function ja(t,e){return arguments.length>=2?function(n){return Object(La.a)(at(t,e),xa(1),(void 0===(r=e)&&(r=null),function(t){return t.lift(new Pa(r))}))(n);var r}:function(e){return Object(La.a)(at(function(e,n,r){return t(e,n,r+1)}),xa(1))(e)}}var Va=null;function Ua(){return Va}var Fa,Ba={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},qa={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ha={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};r._3.Node&&(Fa=r._3.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});var Wa,Ga=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.parse=function(t){throw new Error("parse not implemented")},e.makeCurrent=function(){var t;t=new e,Va||(Va=t)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){var r;(r=t)[e].apply(r,n)},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return Ba},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return Fa.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,"content")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,n){t.insertBefore(n,e)},e.prototype.insertAllBefore=function(t,e,n){n.forEach(function(n){return t.insertBefore(n,e)})},e.prototype.insertAfter=function(t,e,n){t.insertBefore(n,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return this.getDefaultDocument().createComment(t)},e.prototype.createTemplate=function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)},e.prototype.createElementNS=function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r},e.prototype.createStyleElement=function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=""},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){var r=this.getStyle(t,e)||"";return n?r==n:r.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,r=0;r<n.length;r++){var i=n.item(r);e.set(i.name,i.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,r){t.setAttributeNS(e,n,r)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},e.prototype.getDefaultDocument=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return t.title},e.prototype.setTitle=function(t,e){t.title=e||""},e.prototype.elementMatches=function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.getAttribute("href")},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Ha.hasOwnProperty(e)&&(e=Ha[e]))}return qa[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e,n=Ka||(Ka=document.querySelector("base"))?Ka.getAttribute("href"):null;return null==n?null:(e=n,Wa||(Wa=document.createElement("a")),Wa.setAttribute("href",e),"/"===Wa.pathname.charAt(0)?Wa.pathname:"/"+Wa.pathname)},e.prototype.resetBaseElement=function(){Ka=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,"data-"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,"data-"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return function(t,e){e=encodeURIComponent(e);for(var n=0,r=t.split(";");n<r.length;n++){var i=r[n],o=i.indexOf("="),a=-1==o?[i,""]:[i.slice(0,o),i.slice(o+1)],s=a[1];if(a[0].trim()===e)return decodeURIComponent(s)}return null}(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)},e}(function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement("div",document);if(null!=e.getStyle(n,"animationName"))e._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],i=0;i<r.length;i++)if(null!=e.getStyle(n,r[i]+"AnimationName")){e._animationPrefix="-"+r[i].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=o[t])})}catch(t){e._animationPrefix=null,e._transitionEnd=null}return e}return Object(o.__extends)(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+"/../"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}())),Ka=null,za=sa;function Qa(){return!!window.history.pushState}var Xa=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._init(),n}return Object(o.__extends)(e,t),e.prototype._init=function(){this.location=Ua().getLocation(),this._history=Ua().getHistory()},e.prototype.getBaseHrefFromDOM=function(){return Ua().getBaseHref(this._doc)},e.prototype.onPopState=function(t){Ua().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){Ua().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"pathname",{get:function(){return this.location.pathname},set:function(t){this.location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){Qa()?this._history.pushState(t,e,n):this.location.hash=n},e.prototype.replaceState=function(t,e,n){Qa()?this._history.replaceState(t,e,n):this.location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.n,args:[za]}]}]},e}(Lo),Ya=function(){function t(t){this._doc=t,this._dom=Ua()}return t.prototype.addTag=function(t,e){return void 0===e&&(e=!1),t?this._getOrCreateElement(t,e):null},t.prototype.addTags=function(t,e){var n=this;return void 0===e&&(e=!1),t?t.reduce(function(t,r){return r&&t.push(n._getOrCreateElement(r,e)),t},[]):[]},t.prototype.getTag=function(t){return t&&this._dom.querySelector(this._doc,"meta["+t+"]")||null},t.prototype.getTags=function(t){if(!t)return[];var e=this._dom.querySelectorAll(this._doc,"meta["+t+"]");return e?[].slice.call(e):[]},t.prototype.updateTag=function(t,e){if(!t)return null;e=e||this._parseSelector(t);var n=this.getTag(e);return n?this._setMetaElementAttributes(t,n):this._getOrCreateElement(t,!0)},t.prototype.removeTag=function(t){this.removeTagElement(this.getTag(t))},t.prototype.removeTagElement=function(t){t&&this._dom.remove(t)},t.prototype._getOrCreateElement=function(t,e){if(void 0===e&&(e=!1),!e){var n=this._parseSelector(t),r=this.getTag(n);if(r&&this._containsAttributes(t,r))return r}var i=this._dom.createElement("meta");this._setMetaElementAttributes(t,i);var o=this._dom.getElementsByTagName(this._doc,"head")[0];return this._dom.appendChild(o,i),i},t.prototype._setMetaElementAttributes=function(t,e){var n=this;return Object.keys(t).forEach(function(r){return n._dom.setAttribute(e,r,t[r])}),e},t.prototype._parseSelector=function(t){var e=t.name?"name":"property";return e+'="'+t[e]+'"'},t.prototype._containsAttributes=function(t,e){var n=this;return Object.keys(t).every(function(r){return n._dom.getAttribute(e,r)===t[r]})},t}(),Ja=new r.o("TRANSITION_ID"),Za=[{provide:r.d,useFactory:function(t,e,n){return function(){n.get(r.e).donePromise.then(function(){var n=Ua();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(function(e){return n.getAttribute(e,"ng-transition")===t}).forEach(function(t){return n.remove(t)})})}},deps:[Ja,za,r.p],multi:!0}],$a=function(){function t(){}return t.init=function(){Object(r.U)(new t)},t.prototype.addToWindow=function(t){r._3.getAngularTestability=function(e,n){void 0===n&&(n=!0);var r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r._3.getAllAngularTestabilities=function(){return t.getAllTestabilities()},r._3.getAllAngularRootElements=function(){return t.getAllRootElements()},r._3.frameworkStabilizers||(r._3.frameworkStabilizers=[]),r._3.frameworkStabilizers.push(function(t){var e=r._3.getAllAngularTestabilities(),n=e.length,i=!1,o=function(e){i=i||e,0==--n&&t(i)};e.forEach(function(t){t.whenStable(o)})})},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?Ua().isShadowRoot(e)?this.findTestabilityInTree(t,Ua().getHost(e),!0):this.findTestabilityInTree(t,Ua().parentElement(e),!0):null},t}(),ts=function(){function t(t){this._doc=t}return t.prototype.getTitle=function(){return Ua().getTitle(this._doc)},t.prototype.setTitle=function(t){Ua().setTitle(this._doc,t)},t}();function es(t,e){"undefined"!=typeof COMPILED&&COMPILED||((r._3.ng=r._3.ng||{})[t]=e)}var ns={ApplicationRef:r.g,NgZone:r.x};function rs(t){return Object(r.R)(t)}var is=new r.o("EventManagerPlugins"),os=function(){function t(t,e){var n=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=n}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event "+t)},t}(),as=function(){function t(t){this._doc=t}return t.prototype.addGlobalEventListener=function(t,e,n){var r=Ua().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target "+r+" for event "+e);return this.addEventListener(r,e,n)},t}(),ss=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t}(),us=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return Object(o.__extends)(e,t),e.prototype._addStylesToHost=function(t,e){var n=this;t.forEach(function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return Ua().remove(t)})},e}(ss),cs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ls=/%COMP%/g,hs="_nghost-%COMP%",fs="_ngcontent-%COMP%";function ps(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?ps(t,i,n):(i=i.replace(ls,t),n.push(i))}return n}function ds(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var ys=function(){function t(t,e){this.eventManager=t,this.sharedStylesHost=e,this.rendererByCompId=new Map,this.defaultRenderer=new gs(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.N.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new ws(this.eventManager,this.sharedStylesHost,e),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case r.N.Native:return new _s(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var i=ps(e.id,e.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t}(),gs=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(cs[e],t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,n){t&&t.insertBefore(e,n)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t){var e="string"==typeof t?document.querySelector(t):t;if(!e)throw new Error('The selector "'+t+'" did not match any elements');return e.textContent="",e},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,n,r){if(r){e=r+":"+e;var i=cs[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)},t.prototype.removeAttribute=function(t,e,n){if(n){var r=cs[n];r?t.removeAttributeNS(r,e):t.removeAttribute(n+":"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,n,i){i&r.D.DashCase?t.style.setProperty(e,n,i&r.D.Important?"important":""):t.style[e]=n},t.prototype.removeStyle=function(t,e,n){n&r.D.DashCase?t.style.removeProperty(e):t.style[e]=""},t.prototype.setProperty=function(t,e,n){vs(e,"property"),t[e]=n},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,n){return vs(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ds(n)):this.eventManager.addEventListener(t,e,ds(n))},t}(),ms="@".charCodeAt(0);function vs(t,e){if(t.charCodeAt(0)===ms)throw new Error("Found the synthetic "+e+" "+t+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var bs,ws=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.component=r;var o=ps(r.id,r.styles,[]);return n.addStyles(o),i.contentAttr=fs.replace(ls,r.id),i.hostAttr=hs.replace(ls,r.id),i}return Object(o.__extends)(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,"")},e.prototype.createElement=function(e,n){var r=t.prototype.createElement.call(this,e,n);return t.prototype.setAttribute.call(this,r,this.contentAttr,""),r},e}(gs),_s=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;o.sharedStylesHost=n,o.hostEl=r,o.component=i,o.shadowRoot=r.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var a=ps(i.id,i.styles,[]),s=0;s<a.length;s++){var u=document.createElement("style");u.textContent=a[s],o.shadowRoot.appendChild(u)}return o}return Object(o.__extends)(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,n){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.insertBefore=function(e,n,r){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),n,r)},e.prototype.removeChild=function(e,n){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(gs),Es="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},Ts=Es("addEventListener"),Ss=Es("removeEventListener"),Is={},Cs="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[Es("BLACK_LISTED_EVENTS")]&&(bs={});var As=function(t){return!!bs&&bs.hasOwnProperty(t)},ks=function(t){var e=Is[t.type];if(e){var n=this[e];if(n){var r=[t];if(1===n.length)return(a=n[0]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r);for(var i=n.slice(),o=0;o<i.length&&!0!==t[Cs];o++){var a;(a=i[o]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r)}}}},Os=function(t){function e(e,n){var r=t.call(this,e)||this;return r.ngZone=n,r.patchEvent(),r}return Object(o.__extends)(e,t),e.prototype.patchEvent=function(){if(Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Cs]=!0),t&&t.apply(this,arguments)}}},e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){var i=this,o=n;if(!t[Ts]||r.x.isInAngularZone()&&!As(e))t.addEventListener(e,o,!1);else{var a=Is[e];a||(a=Is[e]=Es("ANGULAR"+e+"FALSE"));var s=t[a],u=s&&s.length>0;s||(s=t[a]=[]);var c=As(e)?Zone.root:Zone.current;if(0===s.length)s.push({zone:c,handler:o});else{for(var l=!1,h=0;h<s.length;h++)if(s[h].handler===o){l=!0;break}l||s.push({zone:c,handler:o})}u||t[Ts](e,ks,!1)}return function(){return i.removeEventListener(t,e,o)}},e.prototype.removeEventListener=function(t,e,n){var r=t[Ss];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);var i=Is[e],o=i&&t[i];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);for(var a=!1,s=0;s<o.length;s++)if(o[s].handler===n){a=!0,o.splice(s,1);break}a?0===o.length&&r.apply(t,[e,ks,!1]):t.removeEventListener.apply(t,[e,n,!1])},e}(as),Ns={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},xs=new r.o("HammerGestureConfig"),Rs=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e},t}(),Ds=function(t){function e(e,n){var r=t.call(this,e)||this;return r._config=n,r}return Object(o.__extends)(e,t),e.prototype.supports=function(t){if(!Ns.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+t+" event");return!0},e.prototype.addEventListener=function(t,e,n){var r=this,i=this.manager.getZone();return e=e.toLowerCase(),i.runOutsideAngular(function(){var o=r._config.buildHammer(t),a=function(t){i.runGuarded(function(){n(t)})};return o.on(e,a),function(){return o.off(e,a)}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},e}(as),Ps=["alt","control","meta","shift"],Ms={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},Ls=function(t){function e(e){return t.call(this,e)||this}return Object(o.__extends)(e,t),e.prototype.supports=function(t){return null!=e.parseEventName(t)},e.prototype.addEventListener=function(t,n,r){var i=e.parseEventName(n),o=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Ua().onAndCancel(t,i.domEventName,o)})},e.parseEventName=function(t){var n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;var i=e._normalizeKey(n.pop()),o="";if(Ps.forEach(function(t){var e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a},e.getEventFullKey=function(t){var e="",n=Ua().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Ps.forEach(function(r){r!=n&&(0,Ms[r])(t)&&(e+=r+".")}),e+=n},e.eventCallback=function(t,n,r){return function(i){e.getEventFullKey(i)===t&&r.runGuarded(function(){return n(i)})}},e._normalizeKey=function(t){switch(t){case"esc":return"escape";default:return t}},e}(as),js=function(){function t(t,e){this.defaultDoc=t,this.DOM=e;var n=this.DOM.createHtmlDocument();if(this.inertBodyElement=n.body,null==this.inertBodyElement){var r=this.DOM.createElement("html",n);this.inertBodyElement=this.DOM.createElement("body",n),this.DOM.appendChild(r,this.inertBodyElement),this.DOM.appendChild(n,r)}this.DOM.setInnerHTML(this.inertBodyElement,'<svg><g onload="this.parentNode.remove()"></g></svg>'),!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.DOM.setInnerHTML(this.inertBodyElement,'<svg><p><style><img src="</style><img src=x onerror=alert(1)//">'),this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return t.prototype.getInertBodyElement_XHR=function(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(t){return null}var e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(null);var n=e.response.body;return n.removeChild(n.firstChild),n},t.prototype.getInertBodyElement_DOMParser=function(t){t="<body><remove></remove>"+t+"</body>";try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(t){return null}},t.prototype.getInertBodyElement_InertDocument=function(t){var e=this.DOM.createElement("template");return"content"in e?(this.DOM.setInnerHTML(e,t),e):(this.DOM.setInnerHTML(this.inertBodyElement,t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},t.prototype.stripCustomNsAttrs=function(t){var e=this;this.DOM.attributeMap(t).forEach(function(n,r){"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.DOM.removeAttribute(t,r)});for(var n=0,r=this.DOM.childNodesAsList(t);n<r.length;n++){var i=r[n];this.DOM.isElementNode(i)&&this.stripCustomNsAttrs(i)}},t}(),Vs=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Us=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Fs(t){return(t=String(t)).match(Vs)||t.match(Us)?t:(Object(r.S)()&&Ua().log("WARNING: sanitizing unsafe URL value "+t+" (see http://g.co/ng/security#xss)"),"unsafe:"+t)}function Bs(t){for(var e={},n=0,r=t.split(",");n<r.length;n++)e[r[n]]=!0;return e}function qs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n={},r=0,i=t;r<i.length;r++){var o=i[r];for(var a in o)o.hasOwnProperty(a)&&(n[a]=!0)}return n}var Hs,Ws=Bs("area,br,col,hr,img,wbr"),Gs=Bs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ks=Bs("rp,rt"),zs=qs(Ks,Gs),Qs=qs(Ws,qs(Gs,Bs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),qs(Ks,Bs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),zs),Xs=Bs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ys=Bs("srcset"),Js=qs(Xs,Ys,Bs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),Zs=function(){function t(){this.sanitizedSomething=!1,this.buf=[],this.DOM=Ua()}return t.prototype.sanitizeChildren=function(t){for(var e=this.DOM.firstChild(t);e;)if(this.DOM.isElementNode(e)?this.startElement(e):this.DOM.isTextNode(e)?this.chars(this.DOM.nodeValue(e)):this.sanitizedSomething=!0,this.DOM.firstChild(e))e=this.DOM.firstChild(e);else for(;e;){this.DOM.isElementNode(e)&&this.endElement(e);var n=this.checkClobberedElement(e,this.DOM.nextSibling(e));if(n){e=n;break}e=this.checkClobberedElement(e,this.DOM.parentElement(e))}return this.buf.join("")},t.prototype.startElement=function(t){var e=this,n=this.DOM.nodeName(t).toLowerCase();Qs.hasOwnProperty(n)?(this.buf.push("<"),this.buf.push(n),this.DOM.attributeMap(t).forEach(function(t,n){var r,i=n.toLowerCase();Js.hasOwnProperty(i)?(Xs[i]&&(t=Fs(t)),Ys[i]&&(r=t,t=(r=String(r)).split(",").map(function(t){return Fs(t.trim())}).join(", ")),e.buf.push(" "),e.buf.push(n),e.buf.push('="'),e.buf.push(eu(t)),e.buf.push('"')):e.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0},t.prototype.endElement=function(t){var e=this.DOM.nodeName(t).toLowerCase();Qs.hasOwnProperty(e)&&!Ws.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},t.prototype.chars=function(t){this.buf.push(eu(t))},t.prototype.checkClobberedElement=function(t,e){if(e&&this.DOM.contains(t,e))throw new Error("Failed to sanitize html because the element is clobbered: "+this.DOM.getOuterHTML(t));return e},t}(),$s=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tu=/([^\#-~ |!])/g;function eu(t){return t.replace(/&/g,"&amp;").replace($s,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(tu,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var nu=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),ru=/^url\(([^)]+)\)$/,iu=function(){},ou=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n}return Object(o.__extends)(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case r.F.NONE:return e;case r.F.HTML:return e instanceof su?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){var n=Ua(),i=null;try{Hs=Hs||new js(t,n);var o=e?String(e):"";i=Hs.getInertBodyElement(o);var a=5,s=o;do{if(0===a)throw new Error("Failed to sanitize html because the input is unstable");a--,o=s,s=n.getInnerHTML(i),i=Hs.getInertBodyElement(o)}while(o!==s);var u=new Zs,c=u.sanitizeChildren(n.getTemplateContent(i)||i);return Object(r.S)()&&u.sanitizedSomething&&n.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),c}finally{if(i)for(var l=n.getTemplateContent(i)||i,h=0,f=n.childNodesAsList(l);h<f.length;h++)n.removeChild(l,f[h])}}(this._doc,String(e)));case r.F.STYLE:return e instanceof uu?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";var e=t.match(ru);return e&&Fs(e[1])===e[1]||t.match(nu)&&function(t){for(var e=!0,n=!0,r=0;r<t.length;r++){var i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(Object(r.S)()&&Ua().log("WARNING: sanitizing unsafe style value "+t+" (see http://g.co/ng/security#xss)."),"unsafe")}(e));case r.F.SCRIPT:if(e instanceof cu)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case r.F.URL:return e instanceof hu||e instanceof lu?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),Fs(String(e)));case r.F.RESOURCE_URL:if(e instanceof hu)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+t+" (see http://g.co/ng/security#xss)")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof au)throw new Error("Required a safe "+e+", got a "+t.getTypeName()+" (see http://g.co/ng/security#xss)")},e.prototype.bypassSecurityTrustHtml=function(t){return new su(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new uu(t)},e.prototype.bypassSecurityTrustScript=function(t){return new cu(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new lu(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new hu(t)},e}(iu),au=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},t}(),su=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.getTypeName=function(){return"HTML"},e}(au),uu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.getTypeName=function(){return"Style"},e}(au),cu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.getTypeName=function(){return"Script"},e}(au),lu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.getTypeName=function(){return"URL"},e}(au),hu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.getTypeName=function(){return"ResourceURL"},e}(au),fu=[{provide:r.z,useValue:"browser"},{provide:r.A,useValue:function(){Ga.makeCurrent(),$a.init()},multi:!0},{provide:Lo,useClass:Xa,deps:[za]},{provide:za,useFactory:function(){return document},deps:[]}],pu=Object(r.P)(r.T,"browser",fu);function du(){return new r.l}var yu=function(){function t(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return t.withServerTransition=function(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:Ja,useExisting:r.c},Za]}},t}();"undefined"!=typeof window&&window;var gu=function(t,e){this.id=t,this.url=e},mu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.toString=function(){return"NavigationStart(id: "+this.id+", url: '"+this.url+"')"},e}(gu),vu=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.urlAfterRedirects=r,i}return Object(o.__extends)(e,t),e.prototype.toString=function(){return"NavigationEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"')"},e}(gu),bu=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.reason=r,i}return Object(o.__extends)(e,t),e.prototype.toString=function(){return"NavigationCancel(id: "+this.id+", url: '"+this.url+"')"},e}(gu),wu=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.error=r,i}return Object(o.__extends)(e,t),e.prototype.toString=function(){return"NavigationError(id: "+this.id+", url: '"+this.url+"', error: "+this.error+")"},e}(gu),_u=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(o.__extends)(e,t),e.prototype.toString=function(){return"RoutesRecognized(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(gu),Eu=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(o.__extends)(e,t),e.prototype.toString=function(){return"GuardsCheckStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(gu),Tu=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n)||this;return a.urlAfterRedirects=r,a.state=i,a.shouldActivate=o,a}return Object(o.__extends)(e,t),e.prototype.toString=function(){return"GuardsCheckEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+", shouldActivate: "+this.shouldActivate+")"},e}(gu),Su=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(o.__extends)(e,t),e.prototype.toString=function(){return"ResolveStart(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(gu),Iu=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.urlAfterRedirects=r,o.state=i,o}return Object(o.__extends)(e,t),e.prototype.toString=function(){return"ResolveEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},e}(gu),Cu=function(){function t(t){this.route=t}return t.prototype.toString=function(){return"RouteConfigLoadStart(path: "+this.route.path+")"},t}(),Au=function(){function t(t){this.route=t}return t.prototype.toString=function(){return"RouteConfigLoadEnd(path: "+this.route.path+")"},t}(),ku=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ChildActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Ou=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ChildActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Nu=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ActivationStart(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),xu=function(){function t(t){this.snapshot=t}return t.prototype.toString=function(){return"ActivationEnd(path: '"+(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"")+"')"},t}(),Ru="primary",Du=function(){function t(t){this.params=t||{}}return t.prototype.has=function(t){return this.params.hasOwnProperty(t)},t.prototype.get=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null},t.prototype.getAll=function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]},Object.defineProperty(t.prototype,"keys",{get:function(){return Object.keys(this.params)},enumerable:!0,configurable:!0}),t}();function Pu(t){return new Du(t)}function Mu(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],s=t[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}var Lu=function(t,e){this.routes=t,this.module=e};function ju(t,e){void 0===e&&(e="");for(var n=0;n<t.length;n++){var r=t[n];Vu(r,Uu(e,r))}}function Vu(t,e){if(!t)throw new Error("\n      Invalid configuration of route '"+e+"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    ");if(Array.isArray(t))throw new Error("Invalid configuration of route '"+e+"': Array cannot be specified");if(!t.component&&t.outlet&&t.outlet!==Ru)throw new Error("Invalid configuration of route '"+e+"': a componentless route cannot have a named outlet set");if(t.redirectTo&&t.children)throw new Error("Invalid configuration of route '"+e+"': redirectTo and children cannot be used together");if(t.redirectTo&&t.loadChildren)throw new Error("Invalid configuration of route '"+e+"': redirectTo and loadChildren cannot be used together");if(t.children&&t.loadChildren)throw new Error("Invalid configuration of route '"+e+"': children and loadChildren cannot be used together");if(t.redirectTo&&t.component)throw new Error("Invalid configuration of route '"+e+"': redirectTo and component cannot be used together");if(t.path&&t.matcher)throw new Error("Invalid configuration of route '"+e+"': path and matcher cannot be used together");if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error("Invalid configuration of route '"+e+"'. One of the following must be provided: component, redirectTo, children or loadChildren");if(void 0===t.path&&void 0===t.matcher)throw new Error("Invalid configuration of route '"+e+"': routes must have either a path or a matcher specified");if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error("Invalid configuration of route '"+e+"': path cannot start with a slash");if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error("Invalid configuration of route '{path: \""+e+'", redirectTo: "'+t.redirectTo+"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.");if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error("Invalid configuration of route '"+e+"': pathMatch can only be set to 'prefix' or 'full'");t.children&&ju(t.children,e)}function Uu(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:t+"/"+e.path:"":t}function Fu(t){var e=t.children&&t.children.map(Fu);return e?Object(o.__assign)({},t,{children:e}):Object(o.__assign)({},t)}function Bu(t,e){var n,r=Object.keys(t),i=Object.keys(e);if(r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(t[n=r[o]]!==e[n])return!1;return!0}function qu(t){return Array.prototype.concat.apply([],t)}function Hu(t){return t.length>0?t[t.length-1]:null}function Wu(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Gu(t){var e=Oa.call(t);return Ia.call(e,function(t){return!0===t})}function Ku(t){return Object(r._6)(t)?t:Object(r._7)(t)?x(Promise.resolve(t)):A(t)}function zu(t,e,n){return n?function(t,e){return Bu(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Ju(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(function(n){return e[n]===t[n]})}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Ju(a=n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Ju(n.segments,i))return!1;for(var o in r.children){if(!n.children[o])return!1;if(!t(n.children[o],r.children[o]))return!1}return!0}var a=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!Ju(n.segments,a)&&!!n.children[Ru]&&e(n.children[Ru],r,s)}(e,n,n.segments)}(t.root,e.root)}var Qu=function(){function t(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}return Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=Pu(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return ec.serialize(this)},t}(),Xu=function(){function t(t,e){var n=this;this.segments=t,this.children=e,this.parent=null,Wu(e,function(t,e){return t.parent=n})}return t.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(t.prototype,"numberOfChildren",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return nc(this)},t}(),Yu=function(){function t(t,e){this.path=t,this.parameters=e}return Object.defineProperty(t.prototype,"parameterMap",{get:function(){return this._parameterMap||(this._parameterMap=Pu(this.parameters)),this._parameterMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return uc(this)},t}();function Ju(t,e){return t.length===e.length&&t.every(function(t,n){return t.path===e[n].path})}function Zu(t,e){var n=[];return Wu(t.children,function(t,r){r===Ru&&(n=n.concat(e(t,r)))}),Wu(t.children,function(t,r){r!==Ru&&(n=n.concat(e(t,r)))}),n}var $u=function(){},tc=function(){function t(){}return t.prototype.parse=function(t){var e=new pc(t);return new Qu(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())},t.prototype.serialize=function(t){var e,n;return"/"+function t(e,n){if(!e.hasChildren())return nc(e);if(n){var r=e.children[Ru]?t(e.children[Ru],!1):"",i=[];return Wu(e.children,function(e,n){n!==Ru&&i.push(n+":"+t(e,!1))}),i.length>0?r+"("+i.join("//")+")":r}var o=Zu(e,function(n,r){return r===Ru?[t(e.children[Ru],!1)]:[r+":"+t(n,!1)]});return nc(e)+"/("+o.join("//")+")"}(t.root,!0)+(e=t.queryParams,(n=Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)?n.map(function(e){return ic(t)+"="+ic(e)}).join("&"):ic(t)+"="+ic(n)})).length?"?"+n.join("&"):"")+("string"==typeof t.fragment?"#"+encodeURI(t.fragment):"")},t}(),ec=new tc;function nc(t){return t.segments.map(function(t){return uc(t)}).join("/")}function rc(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ic(t){return rc(t).replace(/%3B/gi,";")}function oc(t){return rc(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ac(t){return decodeURIComponent(t)}function sc(t){return ac(t.replace(/\+/g,"%20"))}function uc(t){return""+oc(t.path)+(e=t.parameters,Object.keys(e).map(function(t){return";"+oc(t)+"="+oc(e[t])}).join(""));var e}var cc=/^[^\/()?;=&#]+/;function lc(t){var e=t.match(cc);return e?e[0]:""}var hc=/^[^=?&#]+/,fc=/^[^?&#]+/,pc=function(){function t(t){this.url=t,this.remaining=t}return t.prototype.parseRootSegment=function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xu([],{}):new Xu([],this.parseChildren())},t.prototype.parseQueryParams=function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t},t.prototype.parseFragment=function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null},t.prototype.parseChildren=function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Ru]=new Xu(t,e)),n},t.prototype.parseSegment=function(){var t=lc(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");return this.capture(t),new Yu(ac(t),this.parseMatrixParams())},t.prototype.parseMatrixParams=function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t},t.prototype.parseParam=function(t){var e=lc(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=lc(this.remaining);r&&this.capture(n=r)}t[ac(e)]=ac(n)}},t.prototype.parseQueryParam=function(t){var e,n=(e=this.remaining.match(hc))?e[0]:"";if(n){this.capture(n);var r="";if(this.consumeOptional("=")){var i=function(t){var e=t.match(fc);return e?e[0]:""}(this.remaining);i&&this.capture(r=i)}var o=sc(n),a=sc(r);if(t.hasOwnProperty(o)){var s=t[o];Array.isArray(s)||(t[o]=s=[s]),s.push(a)}else t[o]=a}},t.prototype.parseParens=function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=lc(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '"+this.url+"'");var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Ru);var o=this.parseChildren();e[i]=1===Object.keys(o).length?o[Ru]:new Xu([],o),this.consumeOptional("//")}return e},t.prototype.peekStartsWith=function(t){return this.remaining.startsWith(t)},t.prototype.consumeOptional=function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)},t.prototype.capture=function(t){if(!this.consumeOptional(t))throw new Error('Expected "'+t+'".')},t}(),dc=function(t){this.segmentGroup=t||null},yc=function(t){this.urlTree=t};function gc(t){return new i.a(function(e){return e.error(new dc(t))})}function mc(t){return new i.a(function(e){return e.error(new yc(t))})}function vc(t){return new i.a(function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '"+t+"'"))})}var bc=function(){function t(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.v)}return t.prototype.apply=function(){var t=this,e=this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,Ru),n=$.call(e,function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)});return ga.call(n,function(e){if(e instanceof yc)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof dc)throw t.noMatchError(e);throw e})},t.prototype.match=function(t){var e=this,n=this.expandSegmentGroup(this.ngModule,this.config,t.root,Ru),r=$.call(n,function(n){return e.createUrlTree(n,t.queryParams,t.fragment)});return ga.call(r,function(t){if(t instanceof dc)throw e.noMatchError(t);throw t})},t.prototype.noMatchError=function(t){return new Error("Cannot match any routes. URL Segment: '"+t.segmentGroup+"'")},t.prototype.createUrlTree=function(t,e,n){var r,i=t.segments.length>0?new Xu([],((r={})[Ru]=t,r)):t;return new Qu(i,e,n)},t.prototype.expandSegmentGroup=function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?$.call(this.expandChildren(t,e,n),function(t){return new Xu([],t)}):this.expandSegment(t,n,e,n.segments,r,!0)},t.prototype.expandChildren=function(t,e,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return A({});var o=[],a=[],s={};Wu(n,function(n,i){var u=$.call(r.expandSegmentGroup(t,e,n,i),function(t){return s[i]=t});i===Ru?o.push(u):a.push(u)});var u=va.call(A.apply(void 0,o.concat(a))),c=ka.call(u);return $.call(c,function(){return s})}(n.children)},t.prototype.expandSegment=function(t,e,n,r,i,o){var a=this,s=A.apply(void 0,n),u=$.call(s,function(s){var u=a.expandSegmentAgainstRoute(t,e,n,s,r,i,o);return ga.call(u,function(t){if(t instanceof dc)return A(null);throw t})}),c=va.call(u),l=Ea.call(c,function(t){return!!t});return ga.call(l,function(t,n){if(t instanceof ba||"EmptyError"===t.name){if(a.noLeftoversInUrl(e,r,i))return A(new Xu([],{}));throw new dc(e)}throw t})},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.expandSegmentAgainstRoute=function(t,e,n,r,i,o,a){return Tc(r)!==o?gc(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):gc(e)},t.prototype.expandSegmentAgainstRouteUsingRedirect=function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)},t.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect=function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?mc(o):pa.call(this.lineralizeSegments(n,o),function(n){var o=new Xu(n,{});return i.expandSegment(t,o,e,n,r,!1)})},t.prototype.expandRegularSegmentAgainstRouteUsingRedirect=function(t,e,n,r,i,o){var a=this,s=wc(e,r,i),u=s.consumedSegments,c=s.lastChild,l=s.positionalParamSegments;if(!s.matched)return gc(e);var h=this.applyRedirectCommands(u,r.redirectTo,l);return r.redirectTo.startsWith("/")?mc(h):pa.call(this.lineralizeSegments(r,h),function(r){return a.expandSegment(t,e,n,r.concat(i.slice(c)),o,!1)})},t.prototype.matchSegmentAgainstRoute=function(t,e,n,r){var i=this;if("**"===n.path)return n.loadChildren?$.call(this.configLoader.load(t.injector,n),function(t){return n._loadedConfig=t,new Xu(r,{})}):A(new Xu(r,{}));var a=wc(e,n,r),s=a.consumedSegments,u=a.lastChild;if(!a.matched)return gc(e);var c=r.slice(u),l=this.getChildConfig(t,n);return pa.call(l,function(t){var n=t.module,r=t.routes,a=function(t,e,n,r){return n.length>0&&function(t,e,n){return r.some(function(n){return Ec(t,e,n)&&Tc(n)!==Ru})}(t,n)?{segmentGroup:_c(new Xu(e,function(t,e){var n={};n[Ru]=e;for(var r=0,i=t;r<i.length;r++){var o=i[r];""===o.path&&Tc(o)!==Ru&&(n[Tc(o)]=new Xu([],{}))}return n}(r,new Xu(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return r.some(function(n){return Ec(t,e,n)})}(t,n)?{segmentGroup:_c(new Xu(t.segments,function(t,e,n,i){for(var a={},s=0,u=r;s<u.length;s++){var c=u[s];Ec(t,e,c)&&!i[Tc(c)]&&(a[Tc(c)]=new Xu([],{}))}return Object(o.__assign)({},i,a)}(t,n,0,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,c,r),u=a.segmentGroup,l=a.slicedSegments;if(0===l.length&&u.hasChildren()){var h=i.expandChildren(n,r,u);return $.call(h,function(t){return new Xu(s,t)})}if(0===r.length&&0===l.length)return A(new Xu(s,{}));var f=i.expandSegment(n,u,r,l,Ru,!0);return $.call(f,function(t){return new Xu(s.concat(t.segments),t.children)})})},t.prototype.getChildConfig=function(t,e){var n=this;return e.children?A(new Lu(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?A(e._loadedConfig):pa.call(function(t,e){var n=e.canLoad;return n&&0!==n.length?Gu($.call(Y(n),function(n){var r=t.get(n);return Ku(r.canLoad?r.canLoad(e):r(e))})):A(!0)}(t.injector,e),function(r){return r?$.call(n.configLoader.load(t.injector,e),function(t){return e._loadedConfig=t,t}):function(t){return new i.a(function(e){return e.error(((n=Error("NavigationCancelingError: Cannot load children because the guard of the route \"path: '"+t.path+"'\" returned false")).ngNavigationCancelingError=!0,n));var n})}(e)}):A(new Lu([],t))},t.prototype.lineralizeSegments=function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return A(n);if(r.numberOfChildren>1||!r.children[Ru])return vc(t.redirectTo);r=r.children[Ru]}},t.prototype.applyRedirectCommands=function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)},t.prototype.applyRedirectCreatreUrlTree=function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new Qu(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)},t.prototype.createQueryParams=function(t,e){var n={};return Wu(t,function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t}),n},t.prototype.createSegmentGroup=function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),a={};return Wu(e.children,function(e,o){a[o]=i.createSegmentGroup(t,e,n,r)}),new Xu(o,a)},t.prototype.createSegments=function(t,e,n,r){var i=this;return e.map(function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)})},t.prototype.findPosParam=function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '"+t+"'. Cannot find '"+e.path+"'.");return r},t.prototype.findOrReturn=function(t,e){for(var n=0,r=0,i=e;r<i.length;r++){var o=i[r];if(o.path===t.path)return e.splice(n),o;n++}return t},t}();function wc(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(e.matcher||Mu)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function _c(t){if(1===t.numberOfChildren&&t.children[Ru]){var e=t.children[Ru];return new Xu(t.segments.concat(e.segments),e.children)}return t}function Ec(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Tc(t){return t.outlet||Ru}var Sc=function(){function t(t){this._root=t}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),t.prototype.parent=function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null},t.prototype.children=function(t){var e=Ic(t,this._root);return e?e.children.map(function(t){return t.value}):[]},t.prototype.firstChild=function(t){var e=Ic(t,this._root);return e&&e.children.length>0?e.children[0].value:null},t.prototype.siblings=function(t){var e=Cc(t,this._root);return e.length<2?[]:e[e.length-2].children.map(function(t){return t.value}).filter(function(e){return e!==t})},t.prototype.pathFromRoot=function(t){return Cc(t,this._root).map(function(t){return t.value})},t}();function Ic(t,e){if(t===e.value)return e;for(var n=0,r=e.children;n<r.length;n++){var i=Ic(t,r[n]);if(i)return i}return null}function Cc(t,e){if(t===e.value)return[e];for(var n=0,r=e.children;n<r.length;n++){var i=Cc(t,r[n]);if(i.length)return i.unshift(e),i}return[]}var Ac=function(){function t(t,e){this.value=t,this.children=e}return t.prototype.toString=function(){return"TreeNode("+this.value+")"},t}();function kc(t){var e={};return t&&t.children.forEach(function(t){return e[t.value.outlet]=t}),e}var Oc=function(t){function e(e,n){var r=t.call(this,e)||this;return r.snapshot=n,Mc(r,e),r}return Object(o.__extends)(e,t),e.prototype.toString=function(){return this.snapshot.toString()},e}(Sc);function Nc(t,e){var n=function(t,e){var n=new Dc([],{},{},"",{},Ru,e,null,t.root,-1,{});return new Pc("",new Ac(n,[]))}(t,e),r=new la([new Yu("",{})]),i=new la({}),o=new la({}),a=new la({}),s=new la(""),u=new xc(r,i,a,s,o,Ru,e,n.root);return u.snapshot=n.root,new Oc(new Ac(u,[]),n)}var xc=function(){function t(t,e,n,r,i,o,a,s){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=a,this._futureSnapshot=s}return Object.defineProperty(t.prototype,"routeConfig",{get:function(){return this._futureSnapshot.routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=$.call(this.params,function(t){return Pu(t)})),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=$.call(this.queryParams,function(t){return Pu(t)})),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.snapshot?this.snapshot.toString():"Future("+this._futureSnapshot+")"},t}();function Rc(t,e){void 0===e&&(e="emptyOnly");var n=t.pathFromRoot,r=0;if("always"!==e)for(r=n.length-1;r>=1;){var i=n[r],a=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function(t){return t.reduce(function(t,e){return{params:Object(o.__assign)({},t.params,e.params),data:Object(o.__assign)({},t.data,e.data),resolve:Object(o.__assign)({},t.resolve,e._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}var Dc=function(){function t(t,e,n,r,i,o,a,s,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=a,this.routeConfig=s,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}return Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMap",{get:function(){return this._paramMap||(this._paramMap=Pu(this.params)),this._paramMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParamMap",{get:function(){return this._queryParamMap||(this._queryParamMap=Pu(this.queryParams)),this._queryParamMap},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"Route(url:'"+this.url.map(function(t){return t.toString()}).join("/")+"', path:'"+(this.routeConfig?this.routeConfig.path:"")+"')"},t}(),Pc=function(t){function e(e,n){var r=t.call(this,n)||this;return r.url=e,Mc(r,n),r}return Object(o.__extends)(e,t),e.prototype.toString=function(){return Lc(this._root)},e}(Sc);function Mc(t,e){e.value._routerState=t,e.children.forEach(function(e){return Mc(t,e)})}function Lc(t){var e=t.children.length>0?" { "+t.children.map(Lc).join(", ")+" } ":"";return""+t.value+e}function jc(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Bu(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Bu(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!Bu(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Bu(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Vc(t,e){var n,r;return Bu(t.params,e.params)&&Ju(n=t.url,r=e.url)&&n.every(function(t,e){return Bu(t.parameters,r[e].parameters)})&&!(!t.parent!=!e.parent)&&(!t.parent||Vc(t.parent,e.parent))}function Uc(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Fc(t,e,n,r,i){var o={};return r&&Wu(r,function(t,e){o[e]=Array.isArray(t)?t.map(function(t){return""+t}):""+t}),new Qu(n.root===t?e:function t(e,n,r){var i={};return Wu(e.children,function(e,o){i[o]=e===n?r:t(e,n,r)}),new Xu(e.segments,i)}(n.root,t,e),o,i)}var Bc=function(){function t(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Uc(n[0]))throw new Error("Root segment cannot have matrix parameters");var r=n.find(function(t){return"object"==typeof t&&null!=t&&t.outlets});if(r&&r!==Hu(n))throw new Error("{outlets:{}} has to be the last command")}return t.prototype.toRoot=function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]},t}(),qc=function(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n};function Hc(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets[Ru]:""+t}function Wc(t,e,n){if(t||(t=new Xu([],{})),0===t.segments.length&&t.hasChildren())return Gc(t,e,n);var r=function(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var a=t.segments[i],s=Hc(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!Xc(s,u,a))return o;r+=2}else{if(!Xc(s,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new Xu(t.segments.slice(0,r.pathIndex),{});return o.children[Ru]=new Xu(t.segments.slice(r.pathIndex),t.children),Gc(o,0,i)}return r.match&&0===i.length?new Xu(t.segments,{}):r.match&&!t.hasChildren()?Kc(t,e,n):r.match?Gc(t,0,i):Kc(t,e,n)}function Gc(t,e,n){if(0===n.length)return new Xu(t.segments,{});var r=function(t){return"object"!=typeof t[0]?((e={})[Ru]=t,e):void 0===t[0].outlets?((n={})[Ru]=t,n):t[0].outlets;var e,n}(n),i={};return Wu(r,function(n,r){null!==n&&(i[r]=Wc(t.children[r],e,n))}),Wu(t.children,function(t,e){void 0===r[e]&&(i[e]=t)}),new Xu(t.segments,i)}function Kc(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){var o=zc(n[i].outlets);return new Xu(r,o)}if(0===i&&Uc(n[0]))r.push(new Yu(t.segments[e].path,n[0])),i++;else{var a=Hc(n[i]),s=i<n.length-1?n[i+1]:null;a&&s&&Uc(s)?(r.push(new Yu(a,Qc(s))),i+=2):(r.push(new Yu(a,{})),i++)}}return new Xu(r,{})}function zc(t){var e={};return Wu(t,function(t,n){null!==t&&(e[n]=Kc(new Xu([],{}),0,t))}),e}function Qc(t){var e={};return Wu(t,function(t,n){return e[n]=""+t}),e}function Xc(t,e,n){return t==n.path&&Bu(e,n.parameters)}var Yc=function(t){this.path=t,this.route=this.path[this.path.length-1]},Jc=function(t,e){this.component=t,this.route=e},Zc=function(){function t(t,e,n,r){this.future=t,this.curr=e,this.moduleInjector=n,this.forwardEvent=r,this.canActivateChecks=[],this.canDeactivateChecks=[]}return t.prototype.initialize=function(t){var e=this.future._root;this.setupChildRouteGuards(e,this.curr?this.curr._root:null,t,[e.value])},t.prototype.checkGuards=function(){var t=this;if(!this.isDeactivating()&&!this.isActivating())return A(!0);var e=this.runCanDeactivateChecks();return pa.call(e,function(e){return e?t.runCanActivateChecks():A(!1)})},t.prototype.resolveData=function(t){var e=this;if(!this.isActivating())return A(null);var n=Y(this.canActivateChecks),r=fa.call(n,function(n){return e.runResolve(n.route,t)});return(function(t,e){return arguments.length>=2?ja(t,e)(this):ja(t)(this)}).call(r,function(t,e){return t})},t.prototype.isDeactivating=function(){return 0!==this.canDeactivateChecks.length},t.prototype.isActivating=function(){return 0!==this.canActivateChecks.length},t.prototype.setupChildRouteGuards=function(t,e,n,r){var i=this,o=kc(e);t.children.forEach(function(t){i.setupRouteGuards(t,o[t.value.outlet],n,r.concat([t.value])),delete o[t.value.outlet]}),Wu(o,function(t,e){return i.deactivateRouteAndItsChildren(t,n.getContext(e))})},t.prototype.setupRouteGuards=function(t,e,n,r){var i=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){var s=this.shouldRunGuardsAndResolvers(o,i,i.routeConfig.runGuardsAndResolvers);s?this.canActivateChecks.push(new Yc(r)):(i.data=o.data,i._resolvedData=o._resolvedData),this.setupChildRouteGuards(t,e,i.component?a?a.children:null:n,r),s&&this.canDeactivateChecks.push(new Jc(a.outlet.component,o))}else o&&this.deactivateRouteAndItsChildren(e,a),this.canActivateChecks.push(new Yc(r)),this.setupChildRouteGuards(t,null,i.component?a?a.children:null:n,r)},t.prototype.shouldRunGuardsAndResolvers=function(t,e,n){switch(n){case"always":return!0;case"paramsOrQueryParamsChange":return!Vc(t,e)||!Bu(t.queryParams,e.queryParams);case"paramsChange":default:return!Vc(t,e)}},t.prototype.deactivateRouteAndItsChildren=function(t,e){var n=this,r=kc(t),i=t.value;Wu(r,function(t,r){n.deactivateRouteAndItsChildren(t,i.component?e?e.children.getContext(r):null:e)}),this.canDeactivateChecks.push(new Jc(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))},t.prototype.runCanDeactivateChecks=function(){var t=this,e=Y(this.canDeactivateChecks),n=pa.call(e,function(e){return t.runCanDeactivate(e.component,e.route)});return Ia.call(n,function(t){return!0===t})},t.prototype.runCanActivateChecks=function(){var t=this,e=Y(this.canActivateChecks),n=fa.call(e,function(e){return Gu(Y([t.fireChildActivationStart(e.route.parent),t.fireActivationStart(e.route),t.runCanActivateChild(e.path),t.runCanActivate(e.route)]))});return Ia.call(n,function(t){return!0===t})},t.prototype.fireActivationStart=function(t){return null!==t&&this.forwardEvent&&this.forwardEvent(new Nu(t)),A(!0)},t.prototype.fireChildActivationStart=function(t){return null!==t&&this.forwardEvent&&this.forwardEvent(new ku(t)),A(!0)},t.prototype.runCanActivate=function(t){var e=this,n=t.routeConfig?t.routeConfig.canActivate:null;return n&&0!==n.length?Gu($.call(Y(n),function(n){var r,i=e.getToken(n,t);return r=Ku(i.canActivate?i.canActivate(t,e.future):i(t,e.future)),Ea.call(r)})):A(!0)},t.prototype.runCanActivateChild=function(t){var e=this,n=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(function(t){return e.extractCanActivateChild(t)}).filter(function(t){return null!==t});return Gu($.call(Y(r),function(t){return Gu($.call(Y(t.guards),function(r){var i,o=e.getToken(r,t.node);return i=Ku(o.canActivateChild?o.canActivateChild(n,e.future):o(n,e.future)),Ea.call(i)}))}))},t.prototype.extractCanActivateChild=function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null},t.prototype.runCanDeactivate=function(t,e){var n=this,r=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!r||0===r.length)return A(!0);var i=pa.call(Y(r),function(r){var i,o=n.getToken(r,e);return i=Ku(o.canDeactivate?o.canDeactivate(t,e,n.curr,n.future):o(t,e,n.curr,n.future)),Ea.call(i)});return Ia.call(i,function(t){return!0===t})},t.prototype.runResolve=function(t,e){return $.call(this.resolveNode(t._resolve,t),function(n){return t._resolvedData=n,t.data=Object(o.__assign)({},t.data,Rc(t,e).resolve),null})},t.prototype.resolveNode=function(t,e){var n=this,r=Object.keys(t);if(0===r.length)return A({});if(1===r.length){var i=r[0];return $.call(this.getResolver(t[i],e),function(t){return(e={})[i]=t,e;var e})}var o={},a=pa.call(Y(r),function(r){return $.call(n.getResolver(t[r],e),function(t){return o[r]=t,t})});return $.call(ka.call(a),function(){return o})},t.prototype.getResolver=function(t,e){var n=this.getToken(t,e);return Ku(n.resolve?n.resolve(e,this.future):n(e,this.future))},t.prototype.getToken=function(t,e){var n=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(n?n.module.injector:this.moduleInjector).get(t)},t}(),$c=function(){},tl=function(){function t(t,e,n,r,i){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i}return t.prototype.recognize=function(){try{var t=rl(this.urlTree.root,[],[],this.config).segmentGroup,e=this.processSegmentGroup(this.config,t,Ru),n=new Dc([],Object.freeze({}),Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,{},Ru,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ac(n,e),o=new Pc(this.url,r);return this.inheritParamsAndData(o._root),A(o)}catch(t){return new i.a(function(e){return e.error(t)})}},t.prototype.inheritParamsAndData=function(t){var e=this,n=t.value,r=Rc(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(function(t){return e.inheritParamsAndData(t)})},t.prototype.processSegmentGroup=function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)},t.prototype.processChildren=function(t,e){var n,r=this,i=Zu(e,function(e,n){return r.processSegmentGroup(t,e,n)});return n={},i.forEach(function(t){var e=n[t.value.outlet];if(e){var r=e.url.map(function(t){return t.toString()}).join("/"),i=t.value.url.map(function(t){return t.toString()}).join("/");throw new Error("Two segments cannot have the same outlet name: '"+r+"' and '"+i+"'.")}n[t.value.outlet]=t.value}),i.sort(function(t,e){return t.value.outlet===Ru?-1:e.value.outlet===Ru?1:t.value.outlet.localeCompare(e.value.outlet)}),i},t.prototype.processSegment=function(t,e,n,r){for(var i=0,o=t;i<o.length;i++){var a=o[i];try{return this.processSegmentAgainstRoute(a,e,n,r)}catch(t){if(!(t instanceof $c))throw t}}if(this.noLeftoversInUrl(e,n,r))return[];throw new $c},t.prototype.noLeftoversInUrl=function(t,e,n){return 0===e.length&&!t.children[n]},t.prototype.processSegmentAgainstRoute=function(t,e,n,r){if(t.redirectTo)throw new $c;if((t.outlet||Ru)!==r)throw new $c;var i,a=[],s=[];if("**"===t.path){var u=n.length>0?Hu(n).parameters:{};i=new Dc(n,u,Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,al(t),r,t.component,t,el(e),nl(e)+n.length,sl(t))}else{var c=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new $c;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(e.matcher||Mu)(n,t,e);if(!r)throw new $c;var i={};Wu(r.posParams,function(t,e){i[e]=t.path});var a=r.consumed.length>0?Object(o.__assign)({},i,r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:a}}(e,t,n);a=c.consumedSegments,s=n.slice(c.lastChild),i=new Dc(a,c.parameters,Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,al(t),r,t.component,t,el(e),nl(e)+a.length,sl(t))}var l=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),h=rl(e,a,s,l),f=h.segmentGroup,p=h.slicedSegments;if(0===p.length&&f.hasChildren()){var d=this.processChildren(l,f);return[new Ac(i,d)]}if(0===l.length&&0===p.length)return[new Ac(i,[])];var y=this.processSegment(l,f,p,Ru);return[new Ac(i,y)]},t}();function el(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function nl(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function rl(t,e,n,r){if(n.length>0&&function(t,e,n){return r.some(function(n){return il(t,e,n)&&ol(n)!==Ru})}(t,n)){var i=new Xu(e,function(t,e,n,r){var i={};i[Ru]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(var o=0,a=n;o<a.length;o++){var s=a[o];if(""===s.path&&ol(s)!==Ru){var u=new Xu([],{});u._sourceSegment=t,u._segmentIndexShift=e.length,i[ol(s)]=u}}return i}(t,e,r,new Xu(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return r.some(function(n){return il(t,e,n)})}(t,n)){var a=new Xu(t.segments,function(t,e,n,i){for(var a={},s=0,u=r;s<u.length;s++){var c=u[s];if(il(t,e,c)&&!i[ol(c)]){var l=new Xu([],{});l._sourceSegment=t,l._segmentIndexShift=t.segments.length,a[ol(c)]=l}}return Object(o.__assign)({},i,a)}(t,n,0,t.children));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:n}}var s=new Xu(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function il(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function ol(t){return t.outlet||Ru}function al(t){return t.data||{}}function sl(t){return t.resolve||{}}var ul=function(){},cl=function(){function t(){}return t.prototype.shouldDetach=function(t){return!1},t.prototype.store=function(t,e){},t.prototype.shouldAttach=function(t){return!1},t.prototype.retrieve=function(t){return null},t.prototype.shouldReuseRoute=function(t,e){return t.routeConfig===e.routeConfig},t}(),ll=new r.o("ROUTES"),hl=function(){function t(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}return t.prototype.load=function(t,e){var n=this;this.onLoadStartListener&&this.onLoadStartListener(e);var r=this.loadModuleFactory(e.loadChildren);return $.call(r,function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new Lu(qu(i.injector.get(ll)).map(Fu),i)})},t.prototype.loadModuleFactory=function(t){var e=this;return"string"==typeof t?x(this.loader.load(t)):pa.call(Ku(t()),function(t){return t instanceof r.t?A(t):x(e.compiler.compileModuleAsync(t))})},t}(),fl=function(){},pl=function(){function t(){}return t.prototype.shouldProcessUrl=function(t){return!0},t.prototype.extract=function(t){return t},t.prototype.merge=function(t,e){return t},t}();function dl(t){throw t}function yl(t){return A(null)}var gl=function(){function t(t,e,n,i,o,a,s,u){var c=this;this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.navigations=new la(null),this.navigationId=0,this.events=new ua.a,this.errorHandler=dl,this.navigated=!1,this.hooks={beforePreactivation:yl,afterPreactivation:yl},this.urlHandlingStrategy=new pl,this.routeReuseStrategy=new cl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.ngModule=o.get(r.v),this.resetConfig(u),this.currentUrlTree=new Qu(new Xu([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.configLoader=new hl(a,s,function(t){return c.triggerEvent(new Cu(t))},function(t){return c.triggerEvent(new Au(t))}),this.routerState=Nc(this.currentUrlTree,this.rootComponentType),this.processNavigations()}return t.prototype.resetRootComponentType=function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType},t.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})},t.prototype.setUpLocationChangeListener=function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(e){var n=t.urlSerializer.parse(e.url),r="popstate"===e.type?"popstate":"hashchange";setTimeout(function(){t.scheduleNavigation(n,r,{replaceUrl:!0})},0)}))},Object.defineProperty(t.prototype,"url",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),t.prototype.triggerEvent=function(t){this.events.next(t)},t.prototype.resetConfig=function(t){ju(t),this.config=t.map(Fu),this.navigated=!1},t.prototype.ngOnDestroy=function(){this.dispose()},t.prototype.dispose=function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)},t.prototype.createUrlTree=function(t,e){void 0===e&&(e={});var n=e.relativeTo,i=e.queryParams,a=e.fragment,s=e.preserveQueryParams,u=e.queryParamsHandling,c=e.preserveFragment;Object(r.S)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var l=n||this.routerState.root,h=c?this.currentUrlTree.fragment:a,f=null;if(u)switch(u){case"merge":f=Object(o.__assign)({},this.currentUrlTree.queryParams,i);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=i||null}else f=s?this.currentUrlTree.queryParams:i||null;return null!==f&&(f=this.removeEmptyProps(f)),function(t,e,n,r,i){if(0===n.length)return Fc(e.root,e.root,e,r,i);var o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Bc(!0,0,t);var e=0,n=!1,r=t.reduce(function(t,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var o={};return Wu(r.outlets,function(t,e){o[e]="string"==typeof t?t.split("/"):t}),t.concat([{outlets:o}])}if(r.segmentPath)return t.concat([r.segmentPath])}return"string"!=typeof r?t.concat([r]):0===i?(r.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):t.concat([r])},[]);return new Bc(n,e,r)}(n);if(o.toRoot())return Fc(e.root,new Xu([],{}),e,r,i);var a=function(t,n,r){if(t.isAbsolute)return new qc(e.root,!0,0);if(-1===r.snapshot._lastPathIndex)return new qc(r.snapshot._urlSegment,!0,0);var i=Uc(t.commands[0])?0:1;return function(e,n,o){for(var a=r.snapshot._urlSegment,s=r.snapshot._lastPathIndex+i,u=t.numberOfDoubleDots;u>s;){if(u-=s,!(a=a.parent))throw new Error("Invalid number of '../'");s=a.segments.length}return new qc(a,!1,s-u)}()}(o,0,t),s=a.processChildren?Gc(a.segmentGroup,a.index,o.commands):Wc(a.segmentGroup,a.index,o.commands);return Fc(a.segmentGroup,s,e,r,i)}(l,this.currentUrlTree,t,f,h)},t.prototype.navigateByUrl=function(t,e){void 0===e&&(e={skipLocationChange:!1});var n=t instanceof Qu?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",e)},t.prototype.navigate=function(t,e){return void 0===e&&(e={skipLocationChange:!1}),function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains "+n+" segment at index "+e)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)},t.prototype.serializeUrl=function(t){return this.urlSerializer.serialize(t)},t.prototype.parseUrl=function(t){return this.urlSerializer.parse(t)},t.prototype.isActive=function(t,e){if(t instanceof Qu)return zu(this.currentUrlTree,t,e);var n=this.urlSerializer.parse(t);return zu(this.currentUrlTree,n,e)},t.prototype.removeEmptyProps=function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return null!==r&&void 0!==r&&(e[n]=r),e},{})},t.prototype.processNavigations=function(){var t=this;fa.call(this.navigations,function(e){return e?(t.executeScheduledNavigation(e),e.promise.catch(function(){})):A(null)}).subscribe(function(){})},t.prototype.scheduleNavigation=function(t,e,n){var r=this.navigations.value;if(r&&"imperative"!==e&&"imperative"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(r&&"hashchange"==e&&"popstate"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(r&&"popstate"==e&&"hashchange"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);var i=null,o=null,a=new Promise(function(t,e){i=t,o=e}),s=++this.navigationId;return this.navigations.next({id:s,source:e,rawUrl:t,extras:n,resolve:i,reject:o,promise:a}),a.catch(function(t){return Promise.reject(t)})},t.prototype.executeScheduledNavigation=function(t){var e=this,n=t.id,r=t.rawUrl,i=t.extras,o=t.resolve,a=t.reject,s=this.urlHandlingStrategy.extract(r),u=!this.navigated||s.toString()!==this.currentUrlTree.toString();("reload"===this.onSameUrlNavigation||u)&&this.urlHandlingStrategy.shouldProcessUrl(r)?(this.events.next(new mu(n,this.serializeUrl(s))),Promise.resolve().then(function(t){return e.runNavigate(s,r,!!i.skipLocationChange,!!i.replaceUrl,n,null)}).then(o,a)):u&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)?(this.events.next(new mu(n,this.serializeUrl(s))),Promise.resolve().then(function(t){return e.runNavigate(s,r,!1,!1,n,Nc(s,e.rootComponentType).snapshot)}).then(o,a)):(this.rawUrlTree=r,o(null))},t.prototype.runNavigate=function(t,e,n,r,i,o){var a=this;return i!==this.navigationId?(this.events.next(new bu(i,this.serializeUrl(t),"Navigation ID "+i+" is not equal to the current navigation id "+this.navigationId)),Promise.resolve(!1)):new Promise(function(s,u){var c;if(o)c=A({appliedUrl:t,snapshot:o});else{var l=new bc(a.ngModule.injector,a.configLoader,a.urlSerializer,t,a.config).apply();c=pa.call(l,function(e){return $.call(function(t,e,n,r,i){return void 0===i&&(i="emptyOnly"),new tl(t,e,n,r,i).recognize()}(a.rootComponentType,a.config,e,a.serializeUrl(e),a.paramsInheritanceStrategy),function(n){return a.events.next(new _u(i,a.serializeUrl(t),a.serializeUrl(e),n)),{appliedUrl:e,snapshot:n}})})}var h,f=pa.call(c,function(t){return $.call(a.hooks.beforePreactivation(t.snapshot),function(){return t})}),p=$.call(f,function(t){var e=t.appliedUrl,n=t.snapshot;return(h=new Zc(n,a.routerState.snapshot,a.ngModule.injector,function(t){return a.triggerEvent(t)})).initialize(a.rootContexts),{appliedUrl:e,snapshot:n}}),d=pa.call(p,function(e){var n=e.appliedUrl,r=e.snapshot;return a.navigationId!==i?A(!1):(a.triggerEvent(new Eu(i,a.serializeUrl(t),n,r)),$.call(h.checkGuards(),function(e){return a.triggerEvent(new Tu(i,a.serializeUrl(t),n,r,e)),{appliedUrl:n,snapshot:r,shouldActivate:e}}))}),y=pa.call(d,function(e){return a.navigationId!==i?A(!1):e.shouldActivate&&h.isActivating()?(a.triggerEvent(new Su(i,a.serializeUrl(t),e.appliedUrl,e.snapshot)),$.call(h.resolveData(a.paramsInheritanceStrategy),function(){return a.triggerEvent(new Iu(i,a.serializeUrl(t),e.appliedUrl,e.snapshot)),e})):A(e)}),g=pa.call(y,function(t){return $.call(a.hooks.afterPreactivation(t.snapshot),function(){return t})}),m=$.call(g,function(t){var e,n,r,i=t.appliedUrl,o=t.shouldActivate;return o?{appliedUrl:i,state:(r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){(s=r.value)._futureSnapshot=n.value;var i=function(e,n,r){return n.children.map(function(n){for(var i=0,o=r.children;i<o.length;i++){var a=o[i];if(e.shouldReuseRoute(a.value.snapshot,n.value))return t(e,n,a)}return t(e,n)})}(e,n,r);return new Ac(s,i)}if(e.retrieve(n.value)){var o=e.retrieve(n.value).route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(var r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,o),o}var a,s=new xc(new la((a=n.value).url),new la(a.params),new la(a.queryParams),new la(a.fragment),new la(a.data),a.outlet,a.component,a);return i=n.children.map(function(n){return t(e,n)}),new Ac(s,i)}(a.routeReuseStrategy,(e=t.snapshot)._root,(n=a.routerState)?n._root:void 0),new Oc(r,e)),shouldActivate:o}:{appliedUrl:i,state:null,shouldActivate:o}});a.activateRoutes(m,a.routerState,a.currentUrlTree,i,t,e,n,r,s,u)})},t.prototype.activateRoutes=function(t,e,n,r,i,o,a,s,u,c){var l,h=this;t.forEach(function(t){var n=t.state;if(t.shouldActivate&&r===h.navigationId){if(h.currentUrlTree=t.appliedUrl,h.rawUrlTree=h.urlHandlingStrategy.merge(h.currentUrlTree,o),h.routerState=n,!a){var i=h.urlSerializer.serialize(h.rawUrlTree);h.location.isCurrentPathEqualTo(i)||s?h.location.replaceState(i):h.location.go(i)}new ml(h.routeReuseStrategy,n,e,function(t){return h.triggerEvent(t)}).activate(h.rootContexts),l=!0}else l=!1}).then(function(){l?(h.navigated=!0,h.events.next(new vu(r,h.serializeUrl(i),h.serializeUrl(h.currentUrlTree))),u(!0)):(h.resetUrlToCurrentUrlTree(),h.events.next(new bu(r,h.serializeUrl(i),"")),u(!1))},function(t){if((a=t)&&a.ngNavigationCancelingError)h.navigated=!0,h.resetStateAndUrl(e,n,o),h.events.next(new bu(r,h.serializeUrl(i),t.message)),u(!1);else{h.resetStateAndUrl(e,n,o),h.events.next(new wu(r,h.serializeUrl(i),t));try{u(h.errorHandler(t))}catch(t){c(t)}}var a})},t.prototype.resetStateAndUrl=function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()},t.prototype.resetUrlToCurrentUrlTree=function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree))},t}(),ml=function(){function t(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}return t.prototype.activate=function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),jc(this.futureState.root),this.activateChildRoutes(e,n,t)},t.prototype.deactivateChildRoutes=function(t,e,n){var r=this,i=kc(e);t.children.forEach(function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]}),Wu(i,function(t,e){r.deactivateRouteAndItsChildren(t,n)})},t.prototype.deactivateRoutes=function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)},t.prototype.deactivateRouteAndItsChildren=function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)},t.prototype.detachAndStoreRouteSubtree=function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}},t.prototype.deactivateRouteAndOutlet=function(t,e){var n=this,r=e.getContext(t.value.outlet);if(r){var i=kc(t),o=t.value.component?r.children:e;Wu(i,function(t,e){return n.deactivateRouteAndItsChildren(t,o)}),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}},t.prototype.activateChildRoutes=function(t,e,n){var r=this,i=kc(e);t.children.forEach(function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new xu(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Ou(t.value.snapshot))},t.prototype.activateRoutes=function(t,e,n){var r=t.value,i=e?e.value:null;if(jc(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component)if(o=n.getOrCreateContext(r.outlet),this.routeReuseStrategy.shouldAttach(r.snapshot)){var a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),vl(a.route)}else{var s=function(t){for(var e=r.snapshot.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(),u=s?s.module.componentFactoryResolver:null;o.route=r,o.resolver=u,o.outlet&&o.outlet.activateWith(r,u),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,n)},t}();function vl(t){jc(t.value),t.children.forEach(vl)}var bl=function(){return function(){this.outlet=null,this.route=null,this.resolver=null,this.children=new wl,this.attachRef=null}}(),wl=function(){function t(){this.contexts=new Map}return t.prototype.onChildOutletCreated=function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)},t.prototype.onChildOutletDestroyed=function(t){var e=this.getContext(t);e&&(e.outlet=null)},t.prototype.onOutletDeactivated=function(){var t=this.contexts;return this.contexts=new Map,t},t.prototype.onOutletReAttached=function(t){this.contexts=t},t.prototype.getOrCreateContext=function(t){var e=this.getContext(t);return e||(e=new bl,this.contexts.set(t,e)),e},t.prototype.getContext=function(t){return this.contexts.get(t)||null},t}(),_l=function(){function t(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.m,this.deactivateEvents=new r.m,this.name=i||Ru,t.onChildOutletCreated(this.name,this)}return t.prototype.ngOnDestroy=function(){this.parentContexts.onChildOutletDestroyed(this.name)},t.prototype.ngOnInit=function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}},Object.defineProperty(t.prototype,"isActivated",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRoute",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRouteData",{get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}},enumerable:!0,configurable:!0}),t.prototype.detach=function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t},t.prototype.attach=function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)},t.prototype.deactivate=function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}},t.prototype.activateWith=function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new El(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)},t}(),El=function(){function t(t,e,n){this.route=t,this.childContexts=e,this.parent=n}return t.prototype.get=function(t,e){return t===xc?this.route:t===wl?this.childContexts:this.parent.get(t,e)},t}(),Tl=function(){},Sl=function(){function t(){}return t.prototype.preload=function(t,e){return ga.call(e(),function(){return A(null)})},t}(),Il=function(){function t(){}return t.prototype.preload=function(t,e){return A(null)},t}(),Cl=function(){function t(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new hl(e,n,function(e){return t.triggerEvent(new Cu(e))},function(e){return t.triggerEvent(new Au(e))})}return t.prototype.setUpPreloading=function(){var t=this,e=ot.call(this.router.events,function(t){return t instanceof vu});this.subscription=fa.call(e,function(){return t.preload()}).subscribe(function(){})},t.prototype.preload=function(){var t=this.injector.get(r.v);return this.processRoutes(t,this.router.config)},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.processRoutes=function(t,e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];if(o.loadChildren&&!o.canLoad&&o._loadedConfig){var a=o._loadedConfig;n.push(this.processRoutes(a.module,a.routes))}else o.loadChildren&&!o.canLoad?n.push(this.preloadConfig(t,o)):o.children&&n.push(this.processRoutes(t,o.children))}return Oa.call(Y(n))},t.prototype.preloadConfig=function(t,e){var n=this;return this.preloadingStrategy.preload(e,function(){var r=n.loader.load(t.injector,e);return pa.call(r,function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)})})},t}(),Al=new r.o("ROUTER_CONFIGURATION"),kl=new r.o("ROUTER_FORROOT_GUARD"),Ol=[Fo,{provide:$u,useClass:tc},{provide:gl,useFactory:Ml,deps:[r.g,$u,wl,Fo,r.p,r.u,r.i,ll,Al,[fl,new r.y],[ul,new r.y]]},wl,{provide:xc,useFactory:Ll,deps:[gl]},{provide:r.u,useClass:r.H},Cl,Il,Sl,{provide:Al,useValue:{enableTracing:!1}}];function Nl(){return new r.w("Router",gl)}var xl=function(){function t(t,e){}return t.forRoot=function(e,n){return{ngModule:t,providers:[Ol,Pl(e),{provide:kl,useFactory:Dl,deps:[[gl,new r.y,new r.G]]},{provide:Al,useValue:n||{}},{provide:Vo,useFactory:Rl,deps:[Lo,[new r.n(Uo),new r.y],Al]},{provide:Tl,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Il},{provide:r.w,multi:!0,useFactory:Nl},[jl,{provide:r.d,multi:!0,useFactory:Vl,deps:[jl]},{provide:Fl,useFactory:Ul,deps:[jl]},{provide:r.b,multi:!0,useExisting:Fl}]]}},t.forChild=function(e){return{ngModule:t,providers:[Pl(e)]}},t}();function Rl(t,e,n){return void 0===n&&(n={}),n.useHash?new qo(t,e):new Ho(t,e)}function Dl(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Pl(t){return[{provide:r.a,multi:!0,useValue:t},{provide:ll,multi:!0,useValue:t}]}function Ml(t,e,n,r,i,o,a,s,u,c,l){void 0===u&&(u={});var h=new gl(null,e,n,r,i,o,a,qu(s));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.enableTracing){var f=Ua();h.events.subscribe(function(t){f.logGroup("Router Event: "+t.constructor.name),f.log(t.toString()),f.log(t),f.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),h}function Ll(t){return t.routerState.root}var jl=function(){function t(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new ua.a}return t.prototype.appInitializer=function(){var t=this;return this.injector.get(jo,Promise.resolve(null)).then(function(){var e=null,n=new Promise(function(t){return e=t}),r=t.injector.get(gl),i=t.injector.get(Al);if(t.isLegacyDisabled(i)||t.isLegacyEnabled(i))e(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),e(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '"+i.initialNavigation+"'");r.hooks.afterPreactivation=function(){return t.initNavigation?A(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()}return n})},t.prototype.bootstrapListener=function(t){var e=this.injector.get(Al),n=this.injector.get(Cl),i=this.injector.get(gl),o=this.injector.get(r.g);t===o.components[0]&&(this.isLegacyEnabled(e)?i.initialNavigation():this.isLegacyDisabled(e)&&i.setUpLocationChangeListener(),n.setUpPreloading(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())},t.prototype.isLegacyEnabled=function(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation},t.prototype.isLegacyDisabled=function(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation},t}();function Vl(t){return t.appInitializer.bind(t)}function Ul(t){return t.bootstrapListener.bind(t)}var Fl=new r.o("Router Initializer"),Bl=function(){function t(t,e,n,r){this.authService=t,this.router=e,this.route=n,this.db=r,this.message="Waiting for opponent"}return t.prototype.ngOnInit=function(){var t=this;this.roomId=this.route.snapshot.paramMap.get("id"),this.db.doc("rooms/"+this.roomId).valueChanges().subscribe(function(e){t.room=e,2!==Object.keys(e.players).length||t.room.winner?t.room.winner&&(t.message=t.room.winner===t.myId?"You win !!!":"You loose !!!"):(t.message="Starting game",Object.keys(e.players)[0]!==t.myId||e.deck&&0!==e.deck.length||t.distributeCards())})},t.prototype.distributeCards=function(){var t=this;this.db.collection("cards").valueChanges().take(1).subscribe(function(e){t.shuffleArray(e);for(var n=[[],[]],r=1;r<15;)n[r%2].push(e.pop()),r+=1;t.room.deck=e,t.room.turn=t.opponentId,t.putCard(t.room.deck.pop()),t.firstPlayer.cards=n[0],t.secondPlayer.cards=n[1],t.updateRoom()})},t.prototype.putCard=function(t){this.room.graveyard?this.room.graveyard.push(t):this.room.graveyard=[t],this.updateRoom()},t.prototype.playCard=function(t){if(this.canIPlay(this.me.cards[t])){var e=this.me.cards.splice(t,1)[0];this.putCard(e),this.endTurn()}},t.prototype.updateRoom=function(){this.db.doc("rooms/"+this.roomId).update(this.room)},t.prototype.endTurn=function(){0===this.getCards(this.myId).length&&(this.room.winner=this.myId),this.changeTurn(),this.updateRoom()},t.prototype.drawCard=function(){var t=this.room.deck.pop();this.me.cards.push(t),this.updateRoom(),this.canIPlay(t)?this.playCard(this.me.cards.length-1):this.endTurn()},t.prototype.canIPlay=function(t){return!(!this.isMyTurn()||t.value!==this.getLastPlayed().value&&t.color!==this.getLastPlayed().color)},t.prototype.changeTurn=function(){this.room.turn=this.room.turn===this.myId?this.opponentId:this.myId},Object.defineProperty(t.prototype,"me",{get:function(){return this.room.players[this.myId]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opponent",{get:function(){return this.room.players[this.opponentId]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"myId",{get:function(){return this.authService.authId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opponentId",{get:function(){return Object.keys(this.room.players)[0]===this.myId?Object.keys(this.room.players)[1]:Object.keys(this.room.players)[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstPlayer",{get:function(){return this.room.players[Object.keys(this.room.players)[0]]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"secondPlayer",{get:function(){return this.room.players[Object.keys(this.room.players)[1]]},enumerable:!0,configurable:!0}),t.prototype.isMyTurn=function(){return this.myId===this.room.turn},t.prototype.isUno=function(){return 1===this.firstPlayer.cards.length||1===this.secondPlayer.cards.length},t.prototype.newGame=function(){},t.prototype.goToHome=function(){this.router.navigate(["home"])},t.prototype.isReady=function(){return!(!this.room||!this.room.turn||this.room.winner)},t.prototype.getLastPlayed=function(){return this.room&&this.room.graveyard?this.room.graveyard[this.room.graveyard.length-1]:new j},t.prototype.getCardClasses=function(t){return["num-"+t.value,t.color]},t.prototype.getCards=function(t){return this.room.players[t].cards},t.prototype.shuffleArray=function(t){var e,n,r;for(r=t.length-1;r>0;r-=1)e=Math.floor(Math.random()*(r+1)),n=t[r],t[r]=t[e],t[e]=n},t}(),ql=function(){function t(t){if(this.total=t,this.total<0)throw new Na}return t.prototype.call=function(t,e){return e.subscribe(new Hl(t,this.total))},t}(),Hl=function(t){function e(e,n){t.call(this,e),this.total=n,this.count=0}return Object(o.__extends)(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(a.a);i.a.prototype.take=function(t){return function(t){return function(e){return 0===t?new z.a:e.lift(new ql(t))}}(t)(this)};var Wl=function(){function t(t,e,n){this.db=t,this.router=e,this.afAuth=n}return t.prototype.ngOnInit=function(){},t.prototype.goToLogin=function(){this.router.navigate(["login"])},t}(),Gl=function(){function t(t,e,n){this.authService=t,this.db=e,this.router=n}return t.prototype.ngOnInit=function(){var t=this;this.authSubscription=this.authService.authState.take(1).subscribe(function(e){e&&t.getRooms()})},t.prototype.ngOnDestroy=function(){this.authSubscription.unsubscribe()},t.prototype.getRooms=function(){var t=this;this.db.collection("rooms").snapshotChanges().take(1).subscribe(function(e){var n=new function(){};n.name=t.authService.name,n.cards=[];for(var r=0,i=e;r<i.length;r++){var o=i[r],a=o.payload.doc.id,s=o.payload.doc.data();if(1===Object.keys(s.players).length)return s.players[t.authService.authId]=n,t.db.doc("rooms/"+a).update(JSON.parse(JSON.stringify(s))),void t.router.navigate(["game",a])}var u=new function(){};u.players={},u.players[t.authService.authId]=n,t.db.collection("rooms").add(JSON.parse(JSON.stringify(u))).then(function(e){t.router.navigate(["game",e.id])})})},t}(),Kl=function(){function t(t,e){this.authService=t,this.router=e}return t.prototype.ngOnInit=function(){var t=this;this.authSubscription=this.authService.authState.subscribe(function(e){e&&t.router.navigate(["matchmaking"])})},t.prototype.ngOnDestroy=function(){this.authSubscription.unsubscribe()},t.prototype.login=function(){this.authService.login()},t.prototype.logout=function(){this.authService.logout()},t}(),zl=function(){},Ql=function(){function t(t,e){this.db=t,this.router=e}return t.prototype.ngOnInit=function(){this.checkCards()},t.prototype.checkCards=function(){var t=this;this.db.collection("cards").valueChanges().take(1).subscribe(function(e){0===e.length&&t.generateCards()})},t.prototype.generateCards=function(){for(var t=this.db.collection("cards"),e=0,n=["red","yellow","green","blue"];e<n.length;e++){for(var r=n[e],i=0;i<10;)(o=new j).color=r,o.value=i,t.add(JSON.parse(JSON.stringify(o))),i+=1;for(i=1;i<10;){var o;(o=new j).color=r,o.value=i,t.add(JSON.parse(JSON.stringify(o))),i+=1}}},t}(),Xl=r._0({encapsulation:0,styles:[["p[_ngcontent-%COMP%]{color:#000}"]],data:{}});function Yl(t){return r._18(0,[(t()(),r._2(0,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r._16(-1,null,["\n  home works!\n"])),(t()(),r._16(-1,null,["\n\n"])),(t()(),r._2(3,0,null,null,1,"button",[["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.goToLogin()&&r),r},null,null)),(t()(),r._16(-1,null,["Play game"]))],null,null)}var Jl=r.Y("app-home",Wl,function(t){return r._18(0,[(t()(),r._2(0,0,null,null,1,"app-home",[],null,null,null,Yl,Xl)),r._1(1,114688,null,0,Wl,[dt,gl,R],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),Zl=r._0({encapsulation:0,styles:[["p[_ngcontent-%COMP%]{color:#000}"]],data:{}});function $l(t){return r._18(0,[(t()(),r._2(0,0,null,null,7,"div",[],null,null,null,null,null)),(t()(),r._16(-1,null,["\n  "])),(t()(),r._2(2,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),r._16(3,null,["Hello ","!"])),(t()(),r._16(-1,null,["\n  "])),(t()(),r._2(5,0,null,null,1,"button",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.logout()&&r),r},null,null)),(t()(),r._16(-1,null,["Logout"])),(t()(),r._16(-1,null,["\n"]))],null,function(t,e){t(e,3,0,e.context.ngIf.displayName)})}function th(t){return r._18(0,[(t()(),r._16(-1,null,["\n  "])),(t()(),r._2(1,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r._16(-1,null,["Please login."])),(t()(),r._16(-1,null,["\n  "])),(t()(),r._2(4,0,null,null,1,"button",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.login()&&r),r},null,null)),(t()(),r._16(-1,null,["Login with Google"])),(t()(),r._16(-1,null,["\n"]))],null,null)}function eh(t){return r._18(0,[(t()(),r._2(0,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r._16(-1,null,["\n  login works!\n"])),(t()(),r._16(-1,null,["\n\n"])),(t()(),r.X(16777216,null,null,2,null,$l)),r._1(4,16384,null,0,ta,[r.M,r.J],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),r._13(131072,oa,[r.h]),(t()(),r._16(-1,null,["\n"])),(t()(),r.X(0,[["showLogin",2]],null,0,null,th))],function(t,e){var n=e.component;t(e,4,0,r._17(e,4,0,r._11(e,5).transform(n.authService.authState)),r._11(e,7))},null)}var nh=r.Y("app-login",Kl,function(t){return r._18(0,[(t()(),r._2(0,0,null,null,1,"app-login",[],null,null,null,eh,Zl)),r._1(1,245760,null,0,Kl,[L,gl],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),rh=r._0({encapsulation:0,styles:[['@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro:900);div[_ngcontent-%COMP%]{outline:#fff solid 2px;min-height:50px}.flexrow[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.flexcol[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.item[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1;flex:1}.card-back[_ngcontent-%COMP%]{width:116px;height:178px}.card[_ngcontent-%COMP%]{width:116px;height:178px;float:left;background:#fff;border-radius:5px;display:table;-webkit-box-sizing:border-box;box-sizing:border-box;padding:5px;margin:10px;font-family:\'Source Sans Pro\',sans-serif;font-size:100px;text-shadow:1px 1px 0 #000,-1px -1px 0 #000,-1px 1px 0 #000,1px -1px 0 #000,1px 0 0 #000,-1px 0 0 #000,0 -1px 0 #000,0 1px 0 #000,4px 4px 0 #000;-webkit-box-shadow:0 0 10px #aaa;box-shadow:0 0 10px #aaa;text-align:center;position:relative}.card[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;border-radius:5px;overflow:hidden}.card[_ngcontent-%COMP%]   .mark[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;background:#fff;margin:auto;padding:0 26px;border-radius:100px 60px/120px 60px;line-height:1.4}.card[_ngcontent-%COMP%]:after, .card[_ngcontent-%COMP%]:before{display:inline-block;position:absolute;line-height:0;font-size:20px;color:#fff;text-shadow:1px 1px 0 #000,-1px -1px 0 #000,-1px 1px 0 #000,1px -1px 0 #000,1px 0 0 #000,-1px 0 0 #000,0 -1px 0 #000,0 1px 0 #000,2px 2px 0 #000}.card[_ngcontent-%COMP%]:before{top:15px;left:10px}.card[_ngcontent-%COMP%]:after{bottom:15px;right:10px;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.card.blue[_ngcontent-%COMP%]{color:#0063b3}.card.blue[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{background:#0063b3}.card.green[_ngcontent-%COMP%]{color:#18a849}.card.green[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{background:#18a849}.card.red[_ngcontent-%COMP%]{color:#c72a18}.card.red[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{background:#c72a18}.card.yellow[_ngcontent-%COMP%]{color:#e6ca1e}.card.yellow[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{background:#e6ca1e}.card.num-0[_ngcontent-%COMP%]:after, .card.num-0[_ngcontent-%COMP%]:before{content:"0"}.card.num-1[_ngcontent-%COMP%]:after, .card.num-1[_ngcontent-%COMP%]:before{content:"1"}.card.num-2[_ngcontent-%COMP%]:after, .card.num-2[_ngcontent-%COMP%]:before{content:"2"}.card.num-3[_ngcontent-%COMP%]:after, .card.num-3[_ngcontent-%COMP%]:before{content:"3"}.card.num-4[_ngcontent-%COMP%]:after, .card.num-4[_ngcontent-%COMP%]:before{content:"4"}.card.num-5[_ngcontent-%COMP%]:after, .card.num-5[_ngcontent-%COMP%]:before{content:"5"}.card.num-6[_ngcontent-%COMP%]:after, .card.num-6[_ngcontent-%COMP%]:before{content:"6"}.card.num-7[_ngcontent-%COMP%]:after, .card.num-7[_ngcontent-%COMP%]:before{content:"7"}.card.num-8[_ngcontent-%COMP%]:after, .card.num-8[_ngcontent-%COMP%]:before{content:"8"}.card.num-9[_ngcontent-%COMP%]:after, .card.num-9[_ngcontent-%COMP%]:before{content:"9"}.card.num-6[_ngcontent-%COMP%]   .mark[_ngcontent-%COMP%]:after, .card.num-9[_ngcontent-%COMP%]   .mark[_ngcontent-%COMP%]:after{display:block;content:"";position:relative;top:-25px;left:5px;width:80%;border:1px solid #000;height:4px;-webkit-box-shadow:1px 1px 0 #000;box-shadow:1px 1px 0 #000}.card.num-6.blue[_ngcontent-%COMP%]   .mark[_ngcontent-%COMP%]:after, .card.num-9.blue[_ngcontent-%COMP%]   .mark[_ngcontent-%COMP%]:after{background:#0063b3}.card.num-6.green[_ngcontent-%COMP%]   .mark[_ngcontent-%COMP%]:after, .card.num-9.green[_ngcontent-%COMP%]   .mark[_ngcontent-%COMP%]:after{background:#18a849}.card.num-6.red[_ngcontent-%COMP%]   .mark[_ngcontent-%COMP%]:after, .card.num-9.red[_ngcontent-%COMP%]   .mark[_ngcontent-%COMP%]:after{background:#c72a18}.card.num-6.yellow[_ngcontent-%COMP%]   .mark[_ngcontent-%COMP%]:after, .card.num-9.yellow[_ngcontent-%COMP%]   .mark[_ngcontent-%COMP%]:after{background:#e6ca1e}']],data:{}});function ih(t){return r._18(0,[(t()(),r._2(0,0,null,null,3,"div",[["class","item"]],null,null,null,null,null)),(t()(),r._16(-1,null,["\n      "])),(t()(),r._2(2,0,null,null,0,"img",[["class","card-back"],["src","assets/uno-back.png"]],null,null,null,null,null)),(t()(),r._16(-1,null,["\n    "]))],null,null)}function oh(t){return r._18(0,[(t()(),r._2(0,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r._16(-1,null,["\n      That's my turn !\n    "]))],null,null)}function ah(t){return r._18(0,[(t()(),r._16(-1,null,["\n      Wait the other to play\n    "]))],null,null)}function sh(t){return r._18(0,[(t()(),r._2(0,0,null,null,4,"div",[["class","item"]],null,null,null,null,null)),(t()(),r._16(-1,null,["\n    "])),(t()(),r._2(2,0,null,null,1,"button",[["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.drawCard()&&r),r},null,null)),(t()(),r._16(-1,null,["Pick new card"])),(t()(),r._16(-1,null,["\n  "]))],null,null)}function uh(t){return r._18(0,[(t()(),r._2(0,0,null,null,11,"div",[["class","item"]],null,null,null,null,null)),(t()(),r._16(-1,null,["\n      "])),(t()(),r._2(2,0,null,null,8,"div",[["class","card"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.playCard(t.context.index)&&r),r},null,null)),r._1(3,278528,null,0,Yo,[r.q,r.r,r.k,r.B],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),r._16(-1,null,["\n        "])),(t()(),r._2(5,0,null,null,4,"span",[["class","inner"]],null,null,null,null,null)),(t()(),r._16(-1,null,["\n          "])),(t()(),r._2(7,0,null,null,1,"span",[["class","mark"]],null,null,null,null,null)),(t()(),r._16(8,null,["",""])),(t()(),r._16(-1,null,["\n        "])),(t()(),r._16(-1,null,["\n      "])),(t()(),r._16(-1,null,["\n    "]))],function(t,e){t(e,3,0,"card",e.component.getCardClasses(e.context.$implicit))},function(t,e){t(e,8,0,e.context.$implicit.value)})}function ch(t){return r._18(0,[(t()(),r._2(0,0,null,null,38,"div",[["class","flexcol"]],null,null,null,null,null)),(t()(),r._16(-1,null,["\n  "])),(t()(),r._2(2,0,null,null,4,"div",[["class","flexrow"]],null,null,null,null,null)),(t()(),r._16(-1,null,["\n    "])),(t()(),r.X(16777216,null,null,1,null,ih)),r._1(5,802816,null,0,Zo,[r.M,r.J,r.q],{ngForOf:[0,"ngForOf"]},null),(t()(),r._16(-1,null,["\n  "])),(t()(),r._16(-1,null,["\n  "])),(t()(),r._2(8,0,null,null,11,"div",[["class","item"]],null,null,null,null,null)),(t()(),r._16(-1,null,["\n    "])),(t()(),r._2(10,0,null,null,8,"div",[["class","card"]],null,null,null,null,null)),r._1(11,278528,null,0,Yo,[r.q,r.r,r.k,r.B],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),r._16(-1,null,["\n      "])),(t()(),r._2(13,0,null,null,4,"span",[["class","inner"]],null,null,null,null,null)),(t()(),r._16(-1,null,["\n        "])),(t()(),r._2(15,0,null,null,1,"span",[["class","mark"]],null,null,null,null,null)),(t()(),r._16(16,null,["",""])),(t()(),r._16(-1,null,["\n      "])),(t()(),r._16(-1,null,["\n    "])),(t()(),r._16(-1,null,["\n  "])),(t()(),r._16(-1,null,["\n  "])),(t()(),r._2(21,0,null,null,6,"div",[["class","item"]],null,null,null,null,null)),(t()(),r._16(-1,null,["\n    "])),(t()(),r.X(16777216,null,null,1,null,oh)),r._1(24,16384,null,0,ta,[r.M,r.J],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r._16(-1,null,["\n    "])),(t()(),r.X(0,[["elseBlock",2]],null,0,null,ah)),(t()(),r._16(-1,null,["\n  "])),(t()(),r._16(-1,null,["\n  "])),(t()(),r.X(16777216,null,null,1,null,sh)),r._1(30,16384,null,0,ta,[r.M,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r._16(-1,null,["\n  "])),(t()(),r._16(-1,null,["\n  "])),(t()(),r._2(33,0,null,null,4,"div",[["class","flexrow"]],null,null,null,null,null)),(t()(),r._16(-1,null,["\n    "])),(t()(),r.X(16777216,null,null,1,null,uh)),r._1(36,802816,null,0,Zo,[r.M,r.J,r.q],{ngForOf:[0,"ngForOf"]},null),(t()(),r._16(-1,null,["\n  "])),(t()(),r._16(-1,null,["\n\n"]))],function(t,e){var n=e.component;t(e,5,0,n.opponent.cards),t(e,11,0,"card",n.getCardClasses(n.getLastPlayed())),t(e,24,0,n.isMyTurn(),r._11(e,26)),t(e,30,0,n.isMyTurn()),t(e,36,0,n.me.cards)},function(t,e){t(e,16,0,e.component.getLastPlayed().value)})}function lh(t){return r._18(0,[(t()(),r._2(0,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r._16(1,null,["\n  ","\n"])),(t()(),r._16(-1,null,["\n"])),(t()(),r._2(3,0,null,null,1,"button",[["type","button"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.goToHome()&&r),r},null,null)),(t()(),r._16(-1,null,["Go to Home"])),(t()(),r._16(-1,null,["\n\n"])),(t()(),r.X(16777216,null,null,1,null,ch)),r._1(7,16384,null,0,ta,[r.M,r.J],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,7,0,e.component.isReady())},function(t,e){t(e,1,0,e.component.message)})}var hh=r.Y("app-game",Bl,function(t){return r._18(0,[(t()(),r._2(0,0,null,null,1,"app-game",[],null,null,null,lh,rh)),r._1(1,114688,null,0,Bl,[L,gl,xc,dt],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),fh=r._0({encapsulation:0,styles:[["p[_ngcontent-%COMP%]{color:#000}"]],data:{}});function ph(t){return r._18(0,[(t()(),r._2(0,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r._16(-1,null,["\n  match-making works!\n"])),(t()(),r._16(-1,null,["\n"]))],null,null)}var dh=r.Y("app-match-making",Gl,function(t){return r._18(0,[(t()(),r._2(0,0,null,null,1,"app-match-making",[],null,null,null,ph,fh)),r._1(1,245760,null,0,Gl,[L,dt,gl],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),yh=r._0({encapsulation:0,styles:[["p[_ngcontent-%COMP%]{color:#000}"]],data:{}});function gh(t){return r._18(0,[(t()(),r._2(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r._1(1,212992,null,0,_l,[wl,r.M,r.j,[8,null],r.h],null,null)],function(t,e){t(e,1,0)},null)}var mh=r.Y("app-root",Ql,function(t){return r._18(0,[(t()(),r._2(0,0,null,null,1,"app-root",[],null,null,null,gh,yh)),r._1(1,114688,null,0,Ql,[dt,gl],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),vh=r.Z(zl,[Ql],function(t){return r._8([r._9(512,r.j,r.V,[[8,[Jl,nh,hh,dh,mh]],[3,r.j],r.v]),r._9(5120,r.s,r._14,[[3,r.s]]),r._9(4608,Qo,Xo,[r.s,[2,zo]]),r._9(5120,r.c,r._4,[]),r._9(5120,r.q,r._10,[]),r._9(5120,r.r,r._12,[]),r._9(4608,iu,ou,[sa]),r._9(6144,r.E,null,[iu]),r._9(4608,xs,Rs,[]),r._9(5120,is,function(t,e,n,r,i){return[new Os(t,e),new Ls(n),new Ds(r,i)]},[sa,r.x,sa,sa,xs]),r._9(4608,os,os,[is,r.x]),r._9(135680,us,us,[sa]),r._9(4608,ys,ys,[os,us]),r._9(6144,r.C,null,[ys]),r._9(6144,ss,null,[us]),r._9(4608,r.K,r.K,[r.x]),r._9(4608,Ya,Ya,[sa]),r._9(4608,ts,ts,[sa]),r._9(5120,d,y,[p,b]),r._9(4608,dt,dt,[d,[2,ft]]),r._9(5120,R,D,[d]),r._9(5120,xc,Ll,[gl]),r._9(4608,Il,Il,[]),r._9(6144,Tl,null,[Il]),r._9(135680,Cl,Cl,[gl,r.u,r.i,r.p,Tl]),r._9(4608,Sl,Sl,[]),r._9(5120,Fl,Ul,[jl]),r._9(5120,r.b,function(t){return[t]},[Fl]),r._9(4608,L,L,[R]),r._9(512,aa,aa,[]),r._9(1024,r.l,du,[]),r._9(1024,r.w,function(){return[Nl()]},[]),r._9(512,jl,jl,[r.p]),r._9(1024,r.d,function(t,e){return[(n=t,es("probe",rs),es("coreTokens",Object(o.__assign)({},ns,(n||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return rs}),Vl(e)];var n},[[2,r.w],jl]),r._9(512,r.e,r.e,[[2,r.d]]),r._9(131584,r.g,r.g,[r.x,r.W,r.p,r.l,r.j,r.e]),r._9(512,r.f,r.f,[r.g]),r._9(512,yu,yu,[[3,yu]]),r._9(1024,kl,Dl,[[3,gl]]),r._9(512,$u,tc,[]),r._9(512,wl,wl,[]),r._9(256,Al,{},[]),r._9(1024,Vo,Rl,[Lo,[2,Uo],Al]),r._9(512,Fo,Fo,[Vo]),r._9(512,r.i,r.i,[]),r._9(512,r.u,r.H,[r.i,[2,r.I]]),r._9(1024,ll,function(){return[[{path:"",component:Wl},{path:"login",component:Kl},{path:"game/:id",component:Bl},{path:"matchmaking",component:Gl}]]},[]),r._9(1024,gl,Ml,[r.g,$u,wl,Fo,r.p,r.u,r.i,ll,Al,[2,fl],[2,ul]]),r._9(512,xl,xl,[[2,kl],[2,gl]]),r._9(512,w,w,[]),r._9(512,Mo,Mo,[]),r._9(512,P,P,[]),r._9(512,zl,zl,[]),r._9(256,p,{apiKey:"AIzaSyDuoB6YsejfBlEYWW5_qlwXfgEZxaW5JFw",authDomain:"uno-game-a69b0.firebaseapp.com",databaseURL:"https://uno-game-a69b0.firebaseio.com",projectId:"uno-game-a69b0",storageBucket:"",messagingSenderId:"98733526363"},[]),r._9(256,b,void 0,[])])});Object(r.Q)(),pu().bootstrapModuleFactory(vh).catch(function(t){return console.log(t)})},x6VL:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("TToO"),i=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return Object(r.__extends)(e,t),e}(Error)}},[0]);